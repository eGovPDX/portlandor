uuid: c5623f33-42b2-416d-8a31-6dfbafe4f48b
langcode: en
status: open
dependencies: {  }
weight: 0
open: null
close: null
uid: 60
template: false
archive: false
id: permit_guide_vending_carts
title: 'Permit Guide - Vending Carts'
description: ''
categories:
  - 'Permit Guide'
elements: |-
  container_guide_cards:
    '#type': container
    fetch_card_building_permit_application:
      '#type': portland_node_fetcher
      '#title': 'Card - Building Permit Application'
      '#node_alias_path': /ppd/commercial-permitting/content-component/card-commercial-building-permit-application
      '#render_inline': 0
    fetch_card_detailed_plans:
      '#type': portland_node_fetcher
      '#title': 'Card - Detailed Plans'
      '#node_alias_path': /ppd/commercial-permitting/content-component/card-commercial-vending-carts-detailed-plans
      '#render_inline': 0
    fetch_card_commercial_permitting_15_min_appointment:
      '#type': portland_node_fetcher
      '#title': 'Card - Commercial Permitting 15 Min Appointment'
      '#node_alias_path': /ppd/commercial-permitting/content-component/card-commercial-permitting-15-minute-appointment
      '#render_inline': 0
    fetch_card_zoning_and_land_use_15_min_appointment:
      '#type': portland_node_fetcher
      '#title': 'Card - Zoning and Land Use 15 Min Appointment'
      '#node_alias_path': /ppd/content-component/card-zoning-and-land-use-15-minute-appointment
      '#render_inline': 0
    fetch_card_electrical_permit_application:
      '#type': portland_node_fetcher
      '#title': 'Card - Electrical Permit Application'
      '#node_alias_path': /ppd/commercial-permitting/content-component/card-commercial-electrical-permit-application
      '#render_inline': 0
    fetch_card_plumbing_permit_application:
      '#type': portland_node_fetcher
      '#title': 'Card - Plumbing Permit Application'
      '#help': '<p><strong>Content missing: Plumbing Permit Application</strong></p>'
      '#node_alias_path': /ppd/commercial-permitting/content-component/card-commercial-plumbing-permit-application
      '#render_inline': 0
    fetch_card_mechanical_permit_application:
      '#type': portland_node_fetcher
      '#title': 'Card - Mechanical Permit Application'
      '#node_alias_path': /ppd/commercial-permitting/content-component/card-commercial-mechanical-permit-application
      '#render_inline': 0
    fetch_card_fire_dept_requirements:
      '#type': portland_node_fetcher
      '#title': 'Card - Fire department requirements'
      '#node_alias_path': /ppd/commercial-permitting/content-component/card-commercial-fire-department-requirements
      '#render_inline': 0
    fetch_card_portable_sign_registration:
      '#type': portland_node_fetcher
      '#title': 'Card - Portable (A-board) Sign Registration Form'
      '#node_alias_path': /ppd/commercial-permitting/content-component/card-commercial-portable-sign-registration-form
      '#render_inline': 0
    fetch_card_street_tree_requirements:
      '#type': portland_node_fetcher
      '#title': 'Card - Street tree pruning requirements'
      '#node_alias_path': /ppd/commercial-permitting/content-component/card-commercial-street-tree-pruning-requirements
      '#render_inline': 0
    fetch_card_tenant_improvement:
      '#type': portland_node_fetcher
      '#title': 'Card - Tenant Improvement'
      '#node_alias_path': /ppd/commercial-permitting/content-component/card-commercial-tenant-improvement
      '#render_inline': 0
    process_step_building_permit_not_needed:
      '#type': portland_node_fetcher
      '#title': "Process Step - You Don't need a building permit"
      '#node_alias_path': /ppd/commercial-permitting/content-component/process-step-commercial-vending-carts-you-dont-need
      '#render_inline': 0
    process_step_start_building_no_permit_required:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Start Building (no permit required)'
      '#node_alias_path': /ppd/commercial-permitting/content-component/process-step-commercial-vending-carts-start-building-no
      '#render_inline': 0
    process_step_gather:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Research your project requirements'
      '#node_alias_path': /ppd/commercial-permitting/content-component/process-step-commercial-research-your-project
      '#render_inline': 0
    process_step_apply:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Prepare your application materials'
      '#node_alias_path': /ppd/commercial-permitting/content-component/process-step-commercial-vending-carts-prepare-your
      '#render_inline': 0
    process_step_respond:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Apply, Pay, Respond to Feedback'
      '#node_alias_path': /ppd/commercial-permitting/content-component/process-step-commercial-vending-carts-apply-pay-and
      '#render_inline': 0
    process_step_start:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Get your permit and start work'
      '#node_alias_path': /ppd/commercial-permitting/content-component/process-step-commercial-vending-carts-get-your-permit
      '#render_inline': 0
    process_step_inspect:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Get Inspections'
      '#node_alias_path': /ppd/commercial-permitting/content-component/process-step-commercial-vending-carts-get-inspections
      '#render_inline': 0
  test:
    '#type': hidden
    '#title': 'Test mode'
  returning_user:
    '#type': hidden
    '#title': 'Returning User?'
  ajax_indicator:
    '#type': portland_ajax_indicator
    '#title': 'Ajax Indicator'
  container_project_details:
    '#type': container
    '#states':
      invisible:
        ':input[name="returning_user"]':
          filled: true
        ':input[name="edit_my_project[Edit my project]"]':
          unchecked: true
    section_location:
      '#type': webform_section
      '#title': 'Project Details'
      '#attributes':
        class:
          - mb-10
      q0_project_address:
        '#type': portland_address_verifier
        '#title': Address
        '#location_address__required': true
        '#location_city__required': true
        '#location_state__required': true
        '#location_zip__required': true
        '#find_unincorporated': 1
        '#require_portland_city_limits': 1
        '#not_verified_remedy': 'A verified address is required. Please try again.'
        '#lookup_taxlot': 1
        '#secondary_queries':
          - api: 'https://www.portlandmaps.com/api/detail/'
            api_args:
              - detail_type: zoning
              - sections: zoning
              - geometry: '{"x":${x}, "y":${y}}'
              - api_key: AC3208DDEFB2FD0AE5F26D573C27252F
            capture:
              - path: 'zoning.overlay[].code'
                field: hidden_zoning_overlays
                parse: stringify
              - path: 'zoning.base[0].code'
                field: hidden_base_zone
                parse: stringify
              - path: 'zoning.historic_district[].code'
                field: hidden_historic_district
                parse: stringify
              - path: 'zoning.national_register_district[].code'
                field: hidden_national_register_district
                parse: stringify
              - path: 'zoning.conservation_district[].code'
                field: hidden_conservation_district
                parse: stringify
              - path: historic_resource
                field: hidden_historic_resource
                parse: flatten
                omit_null_properties: true
          - api: 'https://www.portlandmaps.com/api/detail/'
            api_args:
              - detail_type: environmental-percent-slope
              - sections: general
              - geometry: '{"x":${x}, "y":${y}}'
              - api_key: AC3208DDEFB2FD0AE5F26D573C27252F
            capture:
              - path: general.percent_slope
                field: q4_project_deck_site_slope
      hidden_zoning_overlays:
        '#type': hidden
        '#title': 'Hidden Zoning Overlays'
      hidden_historic_district:
        '#type': hidden
        '#title': 'Hidden Historic District'
      hidden_national_register_district:
        '#type': hidden
        '#title': 'Hidden National Register District'
      hidden_conservation_district:
        '#type': hidden
        '#title': 'Hidden Conservation District'
      hidden_historic_resource:
        '#type': hidden
        '#title': 'Hidden Historic Resource'
      hidden_base_zone:
        '#type': hidden
        '#title': 'Hidden Base Zone'
      markup_01:
        '#type': webform_markup
        '#states':
          visible:
            ':input[name="q0_project_address[location_verification_status]"]':
              '!value': Verified
        '#markup': '<p><strong>Please enter and verify a property address in Portland to begin.</strong></p>'
      container_zoning_warning:
        '#type': container
        '#states':
          visible:
            ':input[name="test"]':
              filled: true
            ':input[name="q1_project_address[location_verification_status]"]':
              value: Verified
            ':input[name="hidden_base_zone"]':
              value:
                '!pattern': R10|R2\.5|R20|R5|R7
        warning_invalid_zone:
          '#type': portland_node_fetcher
          '#title': 'Warning - Invalid Zone'
          '#title_display': none
          '#node_alias_path': /ppd/residential-permitting/content-component/warning-general-incorrect-zone
    section_property_details:
      '#type': webform_section
      '#title': 'Property Details'
      '#description': '<p><em>Information provided by </em><a href="https://portlandmaps.com" target="_blank"><em>PortlandMaps</em></a><em>.</em></p>'
      '#attributes':
        class:
          - mb-10
          - d-none
      property_id:
        '#type': webform_computed_twig
        '#title': 'Property ID'
        '#title_display': inline
        '#display_on': form
        '#template': |-
          {{ data.q1_project_address.location_taxlot_id
           }}
        '#whitespace': trim
        '#ajax': true
      q0_1_environmental_overlay_zone:
        '#type': webform_computed_twig
        '#title': 'Is the site in an environmental overlay zone?'
        '#title_display': inline
        '#display_on': form
        '#mode': text
        '#template': |-
          {% set value = data.hidden_zoning_overlays %}
          {% if 'c' in value or 'p' in value %}Yes{% else %}No{% endif %}
        '#whitespace': trim
        '#ajax': true
      q0_2_greenway_overlay_zone:
        '#type': webform_computed_twig
        '#title': 'Is the site in a greenway overlay zone?'
        '#title_display': inline
        '#display_on': form
        '#mode': text
        '#template': |-
          {% set value = data.hidden_zoning_overlays %}
          {% if 'g' in value  %}Yes{% else %}No{% endif %}
        '#whitespace': trim
        '#ajax': true
      q0_3_historic_landmark:
        '#type': webform_computed_twig
        '#title': 'Is the property a historic/conservation landmark or in a historic district?'
        '#title_display': inline
        '#display_on': form
        '#mode': text
        '#template': '{% if data.hidden_historic_district != "" or data.hidden_national_register_district != "" or data.hidden_conservation_district != "" or data.hidden_historic_resource != "" %}Yes{% else %}No{% endif %}'
        '#whitespace': trim
        '#ajax': true
    section_project_details:
      '#type': webform_section
      '#title': 'Project Details'
      '#title_display': invisible
      '#states':
        invisible:
          ':input[name="q0_project_address[location_verification_status]"]':
            '!value': Verified
      '#attributes':
        class:
          - mb-10
      q1_building_installing_permanent_structure:
        '#type': radios
        '#title': 'Will this project include building or installing a permanent structure?'
        '#description': '<p>A permanent structure is something built to stay in place, like a patio or seating area, or new walls in a warehouse space.</p>'
        '#description_display': before
        '#options': yes_no
        '#states':
          visible:
            ':input[name="q2_change_the_building_structure_or_size"]':
              value: 'Yes'
        '#required': true
      q2_making_building_improvements:
        '#type': radios
        '#title': 'Will this project involve making improvements to or repurposing an existing building on the property that people will be inside of?'
        '#description': '<p>This means fixing up, remodeling, or changing how an existing building is used.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q3_change_how_space_is_used:
        '#type': radios
        '#title': 'Will this project change how the space is used?'
        '#description': '<p>This could mean using the space for a new purpose, such as changing an office into a home or a garage into a shop.</p>'
        '#description_display': before
        '#options': yes_no
        '#states':
          visible:
            ':input[name="q2_making_building_improvements"]':
              value: 'Yes'
        '#required': true
      q4_occupancy_change:
        '#type': radios
        '#title': 'Will the number of people allowed in the building change?'
        '#description': '<p>For example, this could mean adding more seating in a restaurant or creating more space for workers.</p>'
        '#description_display': before
        '#options': yes_no
        '#states':
          visible:
            ':input[name="q2_making_building_improvements"]':
              value: 'Yes'
        '#required': true
      q5_include_anchoring_or_building:
        '#type': radios
        '#title': 'Will this project include anchoring or building into the site?'
        '#description': '<p>Anchoring means attaching something firmly into the ground or structure, such as posts, poles, or foundations.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q6_include_drive_thru:
        '#type': radios
        '#title': 'Will this project include adding a drive-through feature?'
        '#description': '<p>A drive-through is a lane where people stay in their car to get service, like at a bank or coffee shop.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q7_include_restriping_parking_lot:
        '#type': radios
        '#title': 'Will this project include re-striping a parking lot?'
        '#description': '<p>Re-striping means painting or repainting the lines that mark parking spaces.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q8_electrical_work:
        '#type': radios
        '#title': 'Will this project include any electrical work?'
        '#description': '<p>This includes adding, moving, or removing things like outlets, lights, or wiring.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q9_plumbing_work:
        '#type': radios
        '#title': 'Will this project include any plumbing work?'
        '#description': '<p>This includes installing, moving, or removing pipes, drains, or fixtures like sinks and toilets.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q10_mechanical_work:
        '#type': radios
        '#title': 'Will this project include any mechanical work?'
        '#description': '<p>This includes work on heating, cooling, or ventilation systems like furnaces, air conditioners, ducts, rooftop units, or walk-in coolers.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q11_use_of_propane_tank:
        '#type': radios
        '#title': 'Will this project include the use of a propane tank?'
        '#description': '<p>A propane tank is a container that holds fuel for things like heating, cooking, or equipment.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q12_propane_tank_size:
        '#type': number
        '#title': 'How many gallons will the propane tank be?'
        '#description': '<p>The size of the tank is measured in gallons. You can usually find this information on the tank itself or in the purchase details.</p>'
        '#description_display': before
        '#states':
          visible:
            ':input[name="q11_use_of_propane_tank"]':
              value: 'Yes'
        '#required': true
      q13_use_of_tent:
        '#type': radios
        '#title': 'Will this project include the use of a tent?'
        '#description': '<p>A tent could be for events, outdoor sales, or temporary shelter.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q14_use_of_portable_sign:
        '#type': radios
        '#title': 'Will this project include the use of a portable A-board sign on the sidewalk or property?'
        '#description': '<p>An A-board sign is a fold-out sign shaped like the letter "A" that stands on the ground and can be moved around.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q15_tree_pruning_in_right_of_way:
        '#type': radios
        '#title': 'Do you need to prune any trees (branch or root) in the right-of-way?'
        '#description': '<p>The public right-of-way is shared space next to streets, like sidewalks, planting strips, road shoulders, medians, or alleys.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
    section_send_link:
      '#type': webform_section
      '#title': 'Send a link?'
      '#description': "<p>If you'd like us to send a link back to this project, please provide an email address. It will only be used to send this one email and won't be used for any other purpose.</p>"
      '#states':
        visible:
          ':input[name="q0_project_address[location_verification_status]"]':
            value: Verified
      '#attributes':
        class:
          - mb-10
      email_address_optional:
        '#type': textfield
        '#title': 'Email address (optional)'
    section_disclaimer:
      '#type': webform_section
      '#title': Disclaimer
      '#states':
        visible:
          ':input[name="q0_project_address[location_verification_status]"]':
            value: Verified
      fetch_disclaimer_text:
        '#type': portland_node_fetcher
        '#title': 'Fetch Disclaimer Text'
        '#title_display': none
        '#node_alias_path': /ppd/residential-permitting/content-component/disclaimer-general-permit-guide-disclaimer-text
      disclaimer_confirmation:
        '#type': checkbox
        '#title': 'I understand and acknowledge that this tool is for informational purposes only.'
        '#required': true
        '#required_error': 'You must indicate your acknowledgement by checking the box'
  container_welcome_back_results:
    '#type': container
    '#states':
      visible:
        - ':input[name="returning_user"]':
            filled: true
        - or
        - ':input[name="test"]':
            filled: true
    return_link:
      '#type': webform_computed_twig
      '#title': 'Return Link'
      '#display_on': none
      '#template': |
        https://{{ webform_token('[site:url-brief]', webform_submission, [], options) }}{{ webform_token('[current-page:url:path]', webform_submission, [], options) }}?returning_user=1&q0_project_address[location_address]={{ data.q0_project_address.location_address }}&q0_project_address[location_city]={{ data.q0_project_address.location_city }}&q0_project_address[location_state]={{ data.q0_project_address.location_state }}&q0_project_address[location_zip]={{ data.q0_project_address.location_zip }}&q0_1_environmental_overlay_zone={{ data.q0_1_environmental_overlay_zone }}&q0_2_greenway_overlay_zone={{ data.q0_2_greenway_overlay_zone }}&q0_3_historic_landmark={{ data.q0_3_historic_landmark }}&q2_change_the_building_structure_or_size={{ data.q2_change_the_building_structure_or_size }}&q3_change_how_space_is_used={{ data.q3_change_how_space_is_used }}&q4_structural_changes={{ data.q4_structural_changes }}&q5_occupancy_change={{ data.q5_occupancy_change }}&q6_occupancy_change_increase_or_decrease={{ data.q6_occupancy_change_increase_or_decrease }}&q7_include_restaurant={{ data.q7_include_restaurant }}&q8_electrical_work={{ data.q8_electrical_work }}&q9_plumbing_work={{ data.q9_plumbing_work }}&q10_mechanical_work={{ data.q10_mechanical_work }}&q11_fire_alarm_changes={{ data.q11_fire_alarm_changes }}&q12_tall_racks_shelves={{ data.q12_tall_racks_shelves }}&q13_empty_unfinished_space={{ data.q13_empty_unfinished_space }}&q14_street_trees={{ data.q14_street_trees }}&email_address_optional={{ data.email_address_optional }}&disclaimer_confirmation={{ data.disclaimer_confirmation }}
    computed_permit_required:
      '#type': webform_computed_twig
      '#title': 'Computed Permit Required'
      '#wrapper_attributes':
        class:
          - d-nonex
      '#display_on': form
      '#mode': text
      '#template': |-
        {% if data.q2_making_building_improvements == "Yes" 
              or data.q3_change_how_space_is_used == "Yes" 
              or data.q5_occupancy_change == "Yes" 
              or data.q6_include_drive_thru == "Yes" 
              or data.q7_include_restriping_parking_lot == "Yes" %}Yes{% else %}No{% endif %}
      '#whitespace': trim
    computed_project_details:
      '#type': webform_computed_twig
      '#title': 'Computed Project Details'
      '#title_display': none
      '#display_on': none
      '#mode': html
      '#template': |2
              <table class="mb-5">

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Project address:"|t }}</th>
                  <td>{{ data.q0_project_address.location_address }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Permanent structure:"|t }}</th>
                  <td>{{ data.q1_building_installing_permanent_structure }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Building improvements or reuse:"|t }}</th>
                  <td>{{ data.q2_making_building_improvements }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Change in use:"|t }}</th>
                  <td>{{ data.q3_change_how_space_is_used }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Change in occupancy:"|t }}</th>
                  <td>{{ data.q4_occupancy_change }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Anchoring/building into site:"|t }}</th>
                  <td>{{ data.q5_include_anchoring_or_building }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Drive-through feature: "|t }}</th>
                  <td>{{ data.q6_include_drive_thru }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Parking lot re-striping:"|t }}</th>
                  <td>{{ data.q7_include_restriping_parking_lot }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Electrical work:"|t }}</th>
                  <td>{{ data.q8_electrical_work }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Plumbing work:"|t }}</th>
                  <td>{{ data.q9_plumbing_work }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Mechanical work:"|t }}</th>
                  <td>{{ data.q10_mechanical_work }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Propane tank use:"|t }}</th>
                  <td>{{ data.q11_use_of_propane_tank }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Propane tank size:"|t }}</th>
                  <td>{{ data.q12_propane_tank_size }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Tent use:"|t }}</th>
                  <td>{{ data.q13_use_of_tent }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Portable A-board sign:"|t }}</th>
                  <td>{{ data.q14_use_of_portable_sign }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Tree pruning in right-of-way:"|t }}</th>
                  <td>{{ data.q15_tree_pruning_in_right_of_way }}</td>
                </tr>

              </table>

              <a href="{{ data.return_link|replace({'returning_user=1&':''}) }}" class="btn btn-outline-primary ms-auto rounded rounded-1 border-2">{{ 'Edit details'|t }}</a>
    computed_project_details_container:
      '#type': webform_computed_twig
      '#title': 'Computed Project Details Container'
      '#title_display': none
      '#display_on': form
      '#template': |
        <div class="accordion aria-accordion no-expand-all mb-5" id="acc-1-0">
          <h3 class="aria-accordion__heading accordion-item">
            <button
              class="accordion-button collapsed aria-accordion__trigger"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#acc-1-0-panel-1"
              aria-expanded="false"
              aria-controls="acc-1-0-panel-1"
              id="acc-1-0-panel-1-trigger">
              Your project details
            </button>
          </h3>
          <div
            id="acc-1-0-panel-1"
            class="accordion-collapse collapse aria-accordion__panel aria-accordion__panel--transition"
            role="region"
            aria-labelledby="acc-1-0-panel-1-trigger"
            data-bs-parent="#acc-1-0">
            <div class="accordion-body">

              {{ data.computed_project_details }}

            </div>
          </div>
        </div>
      '#ajax': true
    computed_requirements:
      '#type': webform_computed_twig
      '#title': 'Computed Requirements'
      '#title_display': none
      '#display_on': none
      '#mode': html
      '#template': |2-

            {% if data.computed_permit_required == "Yes" or data.test != "" %}
            {{ data.fetch_card_building_permit_application|raw }}
            {% endif %}


            {% if data.computed_permit_required == "Yes" or data.test != "" %}
            {{ data.fetch_card_detailed_plans|raw }}
            {% endif %}
            

            {% if data.computed_permit_required == "Yes" or data.q3_change_how_space_is_used == "Yes" or data.q5_occupancy_change == "Yes" or data.test != "" %}
              {{ data.fetch_card_change_of_use_guidance|raw }}
            {% endif %}
            

            {% if data.computed_permit_required == "Yes" or data.q3_change_how_space_is_used == "Yes" or data.q5_occupancy_change == "Yes" or data.test != "" %}
              {{ data.fetch_card_seismic_upgrade_guidance|raw }}
            {% endif %}
            

            {% if data.q8_electrical_work == "Yes" or data.test != "" %}
              {{ data.fetch_card_electrical_permit_application|raw }}
            {% endif %}
            

            {% if data.q9_plumbing_work == "Yes" or data.test != "" %}
              {{ data.fetch_card_plumbing_permit_application|raw }}
            {% endif %}
            

            {% if data.q10_mechanical_work == "Yes" or data.test != "" %}
              {{ data.fetch_card_mechanical_permit_application|raw }}
            {% endif %}
            

            {% if data.computed_permit_required == "Yes" or data.test != "" %}
              {{ data.fetch_card_fire_sprinkler_permit_app|raw }}
            {% endif %}
            

            {% if data.q11_fire_alarm_changes == "Yes" or data.test != "" %}
              {{ data.fetch_card_fire_alarm_permit_app|raw }}
            {% endif %}
            

            {% if data.computed_permit_required == "Yes" or data.test != "" %}
              {{ data.fetch_card_fire_dept_requirements|raw }}
            {% endif %}
            

            {% if data.q3_change_how_space_is_used   == "Yes" or data.test != "" %}
              {{ data.fetch_card_commercial_sdc_form|raw }}
            {% endif %}
            

            {% if data.q6_occupancy_change_increase_or_decrease == "Increase" or data.test != "" %}
              {{ data.fetch_card_public_row_upgrades|raw }}
            {% endif %}
            

            {% if data.q7_include_restaurant == "Yes" or data.test != "" %}
              {{ data.fetch_card_commercial_food_requirements|raw }}
            {% endif %}
            

            {% if data.q13_empty_unfinished_space == "Yes" or data.test != "" %}
              {{ data.fetch_card_shell_permit_statement|raw }}
            {% endif %}
            

            {% if data.q12_tall_racks_shelves == "Yes" or data.test != "" %}
              {{ data.fetch_card_rack_storage_requirements|raw }}
            {% endif %}
            

            {% if data.computed_permit_required == "Yes" or data.test != "" %}
              {{ data.fetch_card_fire_safety_appointment|raw }}
            {% endif %}
            

            {% if data.q14_street_trees == "Yes" or data.test != "" %}
              {{ data.fetch_card_street_tree_requirements|raw }}
            {% endif %}
      '#whitespace': trim
    computed_results:
      '#type': webform_computed_twig
      '#title': 'Computed Results'
      '#title_display': none
      '#display_on': form
      '#mode': html
      '#template': |+
        {% if data.test %}
        <div class="bg-info p-3 mb-5">
          NOTE: These results are being viewed in reviewer mode, with all possible options displayed for testing purposes. To exit reviewer mode, remove the parameter <strong>test=true</strong> from the URL.
        </div>
        {% endif %}

        <ol class="process-list mb-10">

        {% if data.computed_permit_required == "No" or data.test != "" %}
          <li>
            {{ data.process_step_building_permit_not_needed|raw }}
          </li>
        {% endif %}

        {% if (data.q0_3_historic_landmark == "Yes" or data.q0_2_greenway_overlay_zone == "Yes" or data.q0_1_environmental_overlay_zone == "Yes") or data.test != "" %}

          <li>
            {{ data.fetch_card_zoning_and_land_use_15_min_appointment|raw }}

            <div class="position-relative mt-4">
              <div class="alert p-3">
                <p class="mb-2"><strong>{{ "We're suggesting this because..."|t }}</strong></p>
                <ul class="mb-0">
                  {% if data.q0_3_historic_landmark == "Yes" or data.test is not empty %}
                  <li>{{ "This address is in a Historic District."|t }}</li>
                  {% endif %}
                  {% if data.q0_1_environmental_overlay_zone == "Yes" or data.test is not empty %}
                  <li>{{ "This address is in an Environmental Zone."|t }}</li>
                  {% endif %}
                  {% if data.q0_2_greenway_overlay_zone == "Yes" or data.test is not empty %}
                  <li>{{ "This address is in a Greenway Zone."|t }}</li>
                  {% endif %}
                </ul>
              </div>
            </div>

          </li>

        {% endif %}

        {% if data.computed_requirements != "" or data.test != "" %}
          <li>
            {{ data.process_step_gather|raw }}
            {{ data.computed_requirements|raw }}
          </li>

          <li>
            {{ data.process_step_apply|raw }}
          </li>

          <li>
            {{ data.process_step_respond|raw }}
          </li>

          <li>
            {{ data.process_step_start|raw }}
          </li>

          <li>
            {{ data.process_step_inspect|raw }}
          </li>
        {% else %}
          <li>
            {{ data.process_step_start_building_no_permit_required|raw }}
          </li>
        {% endif %}

        </ol>

      '#whitespace': spaceless
      '#ajax': true
  actions:
    '#type': webform_actions
    '#title': 'Submit button(s)'
    '#states':
      invisible:
        - ':input[name="q0_project_address[location_verification_status]"]':
            empty: true
        - or
        - ':input[name="q0_project_address[location_verification_status]"]':
            empty: false
          ':input[name="edit_my_project[Edit my project]"]':
            unchecked: true
          ':input[name="returning_user"]':
            empty: false
css: ''
javascript: ''
settings:
  ajax: false
  ajax_scroll_top: form
  ajax_progress_type: ''
  ajax_effect: ''
  ajax_speed: null
  page: true
  page_submit_path: ''
  page_confirm_path: ''
  page_theme_name: ''
  form_title: source_entity_webform
  form_submit_once: false
  form_open_message: ''
  form_close_message: ''
  form_exception_message: ''
  form_previous_submissions: true
  form_confidential: false
  form_confidential_message: ''
  form_disable_remote_addr: false
  form_convert_anonymous: false
  form_prepopulate: true
  form_prepopulate_source_entity: false
  form_prepopulate_source_entity_required: false
  form_prepopulate_source_entity_type: ''
  form_unsaved: false
  form_disable_back: false
  form_submit_back: false
  form_disable_autocomplete: false
  form_novalidate: false
  form_disable_inline_errors: false
  form_required: false
  form_autofocus: false
  form_details_toggle: false
  form_reset: false
  form_access_denied: default
  form_access_denied_title: ''
  form_access_denied_message: ''
  form_access_denied_attributes: {  }
  form_file_limit: ''
  form_attributes:
    class:
      - permit-guide
    id: residential-bathrooms-guide
  form_method: ''
  form_action: ''
  share: false
  share_node: false
  share_theme_name: ''
  share_title: true
  share_page_body_attributes: {  }
  submission_label: ''
  submission_exception_message: ''
  submission_locked_message: ''
  submission_log: false
  submission_excluded_elements: {  }
  submission_exclude_empty: false
  submission_exclude_empty_checkbox: false
  submission_views: {  }
  submission_views_replace: {  }
  submission_user_columns: {  }
  submission_user_duplicate: false
  submission_access_denied: default
  submission_access_denied_title: ''
  submission_access_denied_message: ''
  submission_access_denied_attributes: {  }
  previous_submission_message: ''
  previous_submissions_message: ''
  autofill: false
  autofill_message: ''
  autofill_excluded_elements: {  }
  wizard_progress_bar: true
  wizard_progress_pages: false
  wizard_progress_percentage: false
  wizard_progress_link: false
  wizard_progress_states: false
  wizard_start_label: ''
  wizard_preview_link: false
  wizard_confirmation: true
  wizard_confirmation_label: ''
  wizard_auto_forward: true
  wizard_auto_forward_hide_next_button: false
  wizard_keyboard: true
  wizard_track: ''
  wizard_prev_button_label: ''
  wizard_next_button_label: ''
  wizard_toggle: false
  wizard_toggle_show_label: ''
  wizard_toggle_hide_label: ''
  wizard_page_type: container
  wizard_page_title_tag: h2
  preview: 0
  preview_label: ''
  preview_title: ''
  preview_message: ''
  preview_attributes: {  }
  preview_excluded_elements: {  }
  preview_exclude_empty: true
  preview_exclude_empty_checkbox: false
  draft: none
  draft_multiple: false
  draft_auto_save: false
  draft_saved_message: ''
  draft_loaded_message: ''
  draft_pending_single_message: ''
  draft_pending_multiple_message: ''
  confirmation_type: inline
  confirmation_url: ''
  confirmation_title: ''
  confirmation_message: '<p>This permit guide has been generated based on the details of your project. If you provided an email address in the form, you''ll get a copy by email too.&nbsp;</p><h3>Project details</h3><div class="mb-10">[webform_submission:values:computed_project_details:html]</div><div>[webform_submission:values:computed_results:html]</div>'
  confirmation_attributes: {  }
  confirmation_back: true
  confirmation_back_label: ''
  confirmation_back_attributes: {  }
  confirmation_exclude_query: false
  confirmation_exclude_token: false
  confirmation_update: false
  limit_total: null
  limit_total_interval: null
  limit_total_message: ''
  limit_total_unique: false
  limit_user: null
  limit_user_interval: null
  limit_user_message: ''
  limit_user_unique: false
  entity_limit_total: null
  entity_limit_total_interval: null
  entity_limit_user: null
  entity_limit_user_interval: null
  purge: none
  purge_days: null
  results_disabled: false
  results_disabled_ignore: false
  results_customize: false
  token_view: false
  token_update: false
  token_delete: false
  serial_disabled: false
access:
  create:
    roles:
      - anonymous
      - authenticated
    users: {  }
    permissions: {  }
  view_any:
    roles: {  }
    users: {  }
    permissions: {  }
  update_any:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_any:
    roles: {  }
    users: {  }
    permissions: {  }
  purge_any:
    roles: {  }
    users: {  }
    permissions: {  }
  view_own:
    roles: {  }
    users: {  }
    permissions: {  }
  update_own:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_own:
    roles: {  }
    users: {  }
    permissions: {  }
  administer:
    roles: {  }
    users: {  }
    permissions: {  }
  test:
    roles: {  }
    users: {  }
    permissions: {  }
  configuration:
    roles: {  }
    users: {  }
    permissions: {  }
handlers:
  email:
    id: email
    handler_id: email
    label: 'Send confirmation and return link'
    notes: ''
    status: true
    conditions: {  }
    weight: 0
    settings:
      states:
        - completed
      to_mail: '[webform_submission:values:email_address_optional:raw]'
      to_options: {  }
      bcc_mail: ''
      bcc_options: {  }
      cc_mail: ''
      cc_options: {  }
      from_mail: ppd@portlandoregon.gov
      from_options: {  }
      from_name: _default
      reply_to: ''
      return_path: ''
      sender_mail: ''
      sender_name: ''
      subject: 'Your tenant improvement permit guide'
      body: '<p>Thanks for telling us about your tenant improvement project on <span>Portland.gov</span>. We use these details to show you what you''ll need to apply for a permit. Those results are included below.</p><p>You can return to update your project and review the requirements anytime by using this link: <a href="[webform_submission:values:return_link]#residential-bathrooms-guide"><strong>Return to your project details</strong></a></p><p>For more on completing your permitting project, <a href="https://www.portland.gov/ppd/commercial-permitting/tenant-improvement">visit our pages on tenant improvement with change of occupancy</a>. <span style="color:Red;">TODO: need final production link</span></p><p>Have questions? Just reply to this email. We''re happy to help.</p><p>Thank you,</p><p>Portland Permitting &amp; Development (PPD)<br>City of Portland<br><a href="http://portland.gov/ppd">Portland.gov/ppd</a></p><hr style="margin:30px 0;"><h2>Project Details</h2><div>[webform_submission:values:computed_project_details:html]&nbsp;<br><br>&nbsp;</div><hr><h2>Your residential bathroom permit plan</h2><div>[webform_submission:values:computed_results:html]</div>'
      excluded_elements: {  }
      ignore_access: false
      exclude_empty: true
      exclude_empty_checkbox: false
      exclude_attachments: false
      html: true
      attachments: false
      twig: false
      theme_name: ''
      parameters: {  }
      debug: false
variants: {  }
