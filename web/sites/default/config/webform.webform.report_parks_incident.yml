uuid: a35c81b7-d8aa-4f88-ae93-06671960025c
langcode: en
status: open
dependencies:
  module:
    - portland
    - portland_zendesk
third_party_settings:
  portland:
    disable_demographic_form_prompt: 0
    exclude_from_json: {  }
weight: 0
open: null
close: null
uid: 60
template: false
archive: false
id: report_parks_incident
title: 'Report PP&R Incident'
description: ''
categories: {  }
elements: |-
  container_report:
    '#type': container
    report_organization:
      '#type': webform_select_other
      '#title': 'Reporting Organization'
      '#options':
        'PP&R Staff': 'PP&R Staff'
        'PP&R Rangers': 'PP&R Rangers'
        'Portland Fire & Rescue': 'Portland Fire & Rescue'
        'Portland Police': 'Portland Police'
      '#required': true
    report_injury:
      '#type': radios
      '#title': 'Was someone injured?'
      '#description': "<p><strong>This is NOT a claim form.</strong> Additional forms for staff (workers' comp) or visitors (general liability) are needed to file a claim.</p>"
      '#description_display': before
      '#options':
        'Yes, I was injured and I called my supervisor': 'Yes, I was injured and I called my supervisor'
        'Yes, a visitor (not me)': 'Yes, a visitor (not me)'
        'No': 'No'
        'No, but it was a near-miss incident that could have resulted in an injury or illness to a worker.': 'No, but it was a near-miss incident that could have resulted in an injury or illness to a worker.'
      '#required': true
    markup_urgent:
      '#type': webform_markup
      '#states':
        visible:
          ':input[name="report_injury"]':
            checked: true
      '#markup': '<div class="alert alert--info next-steps"><h2>Please Note</h2><p class="mb-0">For staff or visitor injuries that result in a trip to a hospital or clinic, contact the safety team at Park Ranger Dispatch 503-823-1637.</p></div>'
    report_issue_category:
      '#type': webform_select_other
      '#title': 'Issue Category'
      '#options':
        'Crime related': 'Crime related'
        'Environmental/infrastructure hazards': 'Environmental/infrastructure hazards'
        'Medical event/first aid': 'Medical event/first aid'
        'Park violations or safety issues': 'Park violations or safety issues'
        'Trail and facility hazards': 'Trail and facility hazards'
      '#required': true
    report_issue_type_crime:
      '#type': webform_select_other
      '#title': 'What type of crime?'
      '#options':
        Arson: Arson
        Break-in: Break-in
        'Child/elder abuse': 'Child/elder abuse'
        'Destruction of property': 'Destruction of property'
        'Drug dealer': 'Drug dealer'
        'Physical assault': 'Physical assault'
        Theft: Theft
        Trespassing: Trespassing
      '#required': true
      '#states':
        visible:
          ':input[name="report_issue_category[select]"]':
            value: 'Crime related'
    report_issue_type_environmental_hazard:
      '#type': webform_select_other
      '#title': 'What type of environmental/infrastructure hazard?'
      '#options':
        Dumping/trash: Dumping/trash
        'Ecological damage': 'Ecological damage'
      '#required': true
      '#states':
        visible:
          ':input[name="report_issue_category[select]"]':
            value: 'Environmental/infrastructure hazards'
    report_issue_type_medical:
      '#type': webform_select_other
      '#title': 'What type of medical event/first aid issue?'
      '#options':
        'Initial care provided': 'Initial care provided'
        'Medica emergency (CPR, stroke, substance OD)': 'Medical emergency (CPR, stroke, substance OD)'
        'Mental health crisis': 'Mental health crisis'
        'Wellness check': 'Wellness check'
        'Wound care': 'Wound care'
      '#required': true
      '#states':
        visible:
          ':input[name="report_issue_category[select]"]':
            value: 'Medical event/first aid'
    report_issue_type_violations_safety:
      '#type': webform_select_other
      '#title': 'What type of park violation or safety issue?'
      '#options':
        Alcohol/smoking: Alcohol/smoking
        'Bodily fluids': 'Bodily fluids'
        Camping: Camping
        Dog-bite: Dog-bite
        DOLA: DOLA
        'Drug use/paraphernalia': 'Drug use/paraphernalia'
        Hate/bias: Hate/bias
        'Vehicle damage - employee': 'Vehicle damage - employee'
        'Vehicle damage - public': 'Vehicle damage - public'
        'Verbal threats or harassment': 'Verbal threats or harassment'
      '#required': true
      '#states':
        visible:
          ':input[name="report_issue_category[select]"]':
            value: 'Park violations or safety issues'
    report_issue_type_trail_facility_hazard:
      '#type': webform_select_other
      '#title': 'What type of trail/facility hazard?'
      '#options':
        'Trail Maintenance': 'Trail Maintenance'
      '#required': true
      '#states':
        visible:
          ':input[name="report_issue_category[select]"]':
            value: 'Trail and facility hazards'
  incident_details:
    '#type': webform_section
    '#title': 'Incident details'
    '#states':
      visible:
        - ':input[name="report_issue_type_crime[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_environmental_hazard[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_medical[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_violations_safety[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_trail_facility_hazard[select]"]':
            filled: true
    report_incident_date_and_time:
      '#type': datetime
      '#title': 'Incident date and time'
      '#states':
        required:
          - ':input[name="report_issue_type_crime[select]"]':
              filled: true
          - or
          - ':input[name="report_issue_type_environmental_hazard[select]"]':
              filled: true
          - or
          - ':input[name="report_issue_type_medical[select]"]':
              filled: true
          - or
          - ':input[name="report_issue_type_violations_safety[select]"]':
              filled: true
          - or
          - ':input[name="report_issue_type_trail_facility_hazard[select]"]':
              filled: true
      '#date_time_step': '60'
    report_description:
      '#type': textarea
      '#title': 'Incident narrative / damage details'
      '#description': '<ul><li>What happened and where?&nbsp;</li><li>Who was involved/injured?&nbsp;</li><li>Who witnessed it?</li><li>Suspect information, if any?</li><li>Estimated repair costs, if any?</li></ul>'
      '#description_display': before
      '#required': true
    report_photo:
      '#type': webform_image_file
      '#title': Photo
      '#description': '<p>If appropriate, please include a photo of the issue you are reporting.</p>'
      '#description_display': before
      '#file_preview': name
      '#max_filesize': '30'
      '#file_extensions': 'gif jpg png svg jpeg'
      '#file_name': 'report_[webform_submission:sid]'
      '#sanitize': true
      '#max_resolution': 1280x1280
      '#attachment_image_style': webform_report_uploaded_image
  location:
    '#type': webform_section
    '#title': Location
    '#states':
      visible:
        - ':input[name="report_issue_type_crime[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_environmental_hazard[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_medical[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_violations_safety[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_trail_facility_hazard[select]"]':
            filled: true
    report_location_type:
      '#type': radios
      '#title': 'Where is the issue located?'
      '#prepopulate': true
      '#options':
        'Park or natural area': 'Park or natural area'
        'Community center': 'Community center'
        'Community garden': 'Community garden'
      '#default_value': 'Park or natural area'
    report_location_community_center:
      '#type': select
      '#title': 'Community Center'
      '#prepopulate': true
      '#options':
        'Community Music Center': 'Community Music Center'
        'Charles Jordan Community Center': 'Charles Jordan Community Center'
        'East Portland Community Center': 'East Portland Community Center'
        'Fulton Park Community Center': 'Fulton Park Community Center'
        'Interstate Firehouse Cultural Center': 'Interstate Firehouse Cultural Center'
        'Matt Dishman Community Center': 'Matt Dishman Community Center'
        'Montavilla Community Center': 'Montavilla Community Center'
        'Mt. Scott Community Center': 'Mt. Scott Community Center'
        'Multnomah Arts Center': 'Multnomah Arts Center'
        'Peninsula Park Community Center': 'Peninsula Park Community Center'
        'Sellwood Community Center': 'Sellwood Community Center'
        'Southwest Community Center': 'Southwest Community Center'
        'St. Johns Community Center': 'St. Johns Community Center'
        'Woodstock Community Center': 'Woodstock Community Center'
      '#required': true
      '#states':
        visible:
          ':input[name="report_location_type"]':
            value: 'Community center'
    report_location_community_garden:
      '#type': textfield
      '#title': 'Community Garden Name/Location'
      '#required': true
      '#states':
        visible:
          ':input[name="report_issue_category[select]"]':
            value: 'Community garden'
    report_location:
      '#type': portland_location_picker
      '#title': 'Location of Issue'
      '#prepopulate': true
      '#states':
        visible:
          ':input[name="report_location_type"]':
            value: 'Park or natural area'
      '#location_map__description': 'Please place the marker as close to the incident or issue as possible. You may click or drag it to any location on the map.'
      '#place_name__title': 'Park Name'
      '#location_details__access': false
      '#location_details__help': 'Please provide information to help us find this site.'
      '#place_name__description_display': invisible
      '#require_boundary': false
      '#display_boundary': false
      '#primary_layer_behavior': informational
      '#primary_layer_type': region-hidden
      '#primary_layer_source': 'https://www.portlandmaps.com/arcgis/rest/services/Public/Parks_Administrative_Boundaries/MapServer/1/query?where=1%3D1&f=geojson'
      '#region_id_property_name': Name
  contact_information:
    '#type': webform_section
    '#title': 'Contact information'
    '#states':
      visible:
        - ':input[name="report_issue_type_crime[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_environmental_hazard[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_medical[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_violations_safety[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_trail_facility_hazard[select]"]':
            filled: true
    contact_name:
      '#type': textfield
      '#title': Name
      '#required': true
    contact_phone:
      '#type': textfield
      '#title': Phone
      '#input_mask': '(999) 999-9999'
      '#required': true
    contact_email:
      '#type': textfield
      '#title': Email
      '#description': '<p>We will only use your email address to respond to your report if needed.</p>'
      '#pattern': '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
      '#pattern_error': 'Please enter a correctly formatted email address, such as myname@example.com.'
  additional_details:
    '#type': webform_section
    '#title': 'Additional Details'
    '#states':
      visible:
        - ':input[name="report_issue_type_crime[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_environmental_hazard[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_medical[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_violations_safety[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_trail_facility_hazard[select]"]':
            filled: true
    details_other_steps:
      '#type': checkboxes
      '#title': 'What other steps have you taken?'
      '#options':
        'I notified my supervisor. THIS IS REQUIRED!': 'I notified my supervisor. THIS IS REQUIRED!'
        'I placed a work order for the damage': 'I placed a work order for the damage'
        'I called 911, but no one responded': 'I called 911, but no one responded'
        'I called 911 and police or fire responded': 'I called 911 and police or fire responded'
        'I submitted an online police report': 'I submitted an online police report'
    details_police_info:
      '#type': textfield
      '#title': 'PPB Case Number / officer information (if 911 responded)'
    details_file_upload:
      '#type': webform_document_file
      '#title': 'Form upload(s)'
      '#multiple': 4
      '#file_preview': name
      '#file_extensions': pdf
    markup_pre_submit:
      '#type': webform_markup
      '#markup': '<div class="alert alert--info next-steps"><h2>Please Note</h2><ul><li>For guest accidents and employee injuries, additional forms are needed. Please refer to the Red Book.&nbsp;</li><li>For criminal activity, remember to also fill out an online police report.</li></ul><p><strong>Except for specific health/injury information for employees or visitors, all submissions are considered public record.</strong> If you have questions, please reach out to the safety team or a supervisor by phone before submitting.</p></div>'
  actions:
    '#type': webform_actions
    '#title': 'Submit button(s)'
    '#states':
      visible:
        - ':input[name="report_issue_type_crime[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_environmental_hazard[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_medical[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_violations_safety[select]"]':
            filled: true
        - or
        - ':input[name="report_issue_type_trail_facility_hazard[select]"]':
            filled: true
  request_ticket_id:
    '#type': hidden
    '#title': 'Zendesk Ticket ID'
  support_agent_use_only:
    '#type': portland_support_agent_widget
    '#title': 'Support Agent Use Only'
    '#zendesk_request_number__access': false
    '#employee_notes_panel__access': false
    '#escalate_issue__access': false
  computed_issue_description:
    '#type': webform_computed_twig
    '#title': 'Computed Issue Description'
    '#mode': html
    '#template': |+
      <p><strong>Reporting organization</strong>: {{ data.report_organization }}</p>

      <p><strong>Was someone injured?</strong>: {{ data.report_injury }}</p>

      <p><strong>Issue category</strong>: {{ data.report_issue_category }}</p>

      {% if data.report_issue_type_crime and data.report_issue_type_crime is not iterable %}
        <p><strong>What type of crime?</strong>: {{ data.report_issue_type_crime }}</p>
      {% endif %}

      {% if data.report_issue_type_environmental_hazard and data.report_issue_type_environmental_hazard is not iterable %}
        <p><strong>What time of environmental/infrastructure hazard?</strong>: {{ data.report_issue_type_environmental_hazard }}</p>
      {% endif %}

      {% if data.report_issue_type_medical and data.report_issue_type_medical is not iterable %}
        <p><strong>What type of medical event/first aid issue?</strong>: {{ data.report_issue_type_medical }}</p>
      {% endif %}

      {% if data.report_issue_type_violations_safety and data.report_issue_type_violations_safety is not iterable %}
        <p><strong>What type of park violation or safety issue?</strong>: {{ data.report_issue_type_violations_safety }}</p>
      {% endif %}

      {% if data.report_issue_type_trail_facility_hazard and data.report_issue_type_trail_facility_hazard is not iterable %}
        <p><strong>What type of trail/facility hazard</strong>: {{ data.report_issue_type_trail_facility_hazard }}</p>
      {% endif %}

      <p><strong>Incident details</strong>:<br>{{ data.report_description }}</p>

      <p><strong>Incident date and time</strong>: {{ data.report_incident_date_and_time is iterable ? '' : data.report_incident_date_and_time|date('m/d/Y g:i A') }}</p>

      {% if data.report_photo|length > 0 %}
        <p><strong>Incident photo uploaded.</strong></p>
      {% endif %}

      <p><strong>Issue location:</strong><br>
        {{ data.report_location_type }}<br>
        {% if data.report_location_type == 'Park or natural area' %}
          {{ data.report_location.location_address }}<br>
          Lat/lon: <a href="https://www.google.com/maps/place/{{ data.report_location.location_lat }},{{ data.report_location.location_lon }}">{{ data.report_location.location_lat }},{{ data.report_location.location_lon }}</a>
        {% elseif data.report_location_type == 'Community center' %}
          {{ data.report_location_community_center }}<br>
        {% elseif data.report_location_type == 'Community garden' %}
          {{ data.report_location_community_garden }}<br>
        {% endif %}
      </p>

      <p><strong>Contact information:</strong><br>
      {{ data.contact_name }}<br>
      {{ data.contact_phone }}
      {% if data.contact_email %}<br>{{ data.contact_email }}{% endif %}</p>

      {% if data.details_other_steps or data.details_police_info or data.details_file_upload|length > 0 %}
        <p><strong>Additional details:</strong><br>
        {% if data.details_other_steps %}{{ data.details_other_steps is iterable ? '' : data.details_other_steps }}<br>{% endif %}
        {% if data.details_police_info %}<strong>PPB case info:</strong>{{ data.details_police_info }}<br>{% endif %}
        {% if data.details_file_upload|length > 0 %}
          Uploaded files: {{ data.details_file_upload|length }}
        {% endif %}</p>
      {% endif %}

    '#whitespace': spaceless
    '#ajax': true
css: ''
javascript: ''
settings:
  ajax: false
  ajax_scroll_top: form
  ajax_progress_type: ''
  ajax_effect: ''
  ajax_speed: null
  page: true
  page_submit_path: ''
  page_confirm_path: ''
  page_theme_name: ''
  form_title: both
  form_submit_once: false
  form_open_message: ''
  form_close_message: ''
  form_exception_message: ''
  form_previous_submissions: true
  form_confidential: false
  form_confidential_message: ''
  form_disable_remote_addr: false
  form_convert_anonymous: false
  form_prepopulate: false
  form_prepopulate_source_entity: false
  form_prepopulate_source_entity_required: false
  form_prepopulate_source_entity_type: ''
  form_unsaved: false
  form_disable_back: false
  form_submit_back: false
  form_disable_autocomplete: false
  form_novalidate: false
  form_disable_inline_errors: false
  form_required: false
  form_autofocus: false
  form_details_toggle: false
  form_reset: false
  form_access_denied: default
  form_access_denied_title: ''
  form_access_denied_message: ''
  form_access_denied_attributes: {  }
  form_file_limit: ''
  form_attributes: {  }
  form_method: ''
  form_action: ''
  share: false
  share_node: false
  share_theme_name: ''
  share_title: true
  share_page_body_attributes: {  }
  submission_label: ''
  submission_exception_message: ''
  submission_locked_message: ''
  submission_log: false
  submission_excluded_elements: {  }
  submission_exclude_empty: false
  submission_exclude_empty_checkbox: false
  submission_views: {  }
  submission_views_replace: {  }
  submission_user_columns: {  }
  submission_user_duplicate: false
  submission_access_denied: default
  submission_access_denied_title: ''
  submission_access_denied_message: ''
  submission_access_denied_attributes: {  }
  previous_submission_message: ''
  previous_submissions_message: ''
  autofill: false
  autofill_message: ''
  autofill_excluded_elements: {  }
  wizard_progress_bar: true
  wizard_progress_pages: false
  wizard_progress_percentage: false
  wizard_progress_link: false
  wizard_progress_states: false
  wizard_start_label: ''
  wizard_preview_link: false
  wizard_confirmation: true
  wizard_confirmation_label: ''
  wizard_auto_forward: true
  wizard_auto_forward_hide_next_button: false
  wizard_keyboard: true
  wizard_track: ''
  wizard_prev_button_label: ''
  wizard_next_button_label: ''
  wizard_toggle: false
  wizard_toggle_show_label: ''
  wizard_toggle_hide_label: ''
  wizard_page_type: container
  wizard_page_title_tag: h2
  preview: 0
  preview_label: ''
  preview_title: ''
  preview_message: ''
  preview_attributes: {  }
  preview_excluded_elements: {  }
  preview_exclude_empty: true
  preview_exclude_empty_checkbox: false
  draft: none
  draft_multiple: false
  draft_auto_save: false
  draft_saved_message: ''
  draft_loaded_message: ''
  draft_pending_single_message: ''
  draft_pending_multiple_message: ''
  confirmation_type: page
  confirmation_url: ''
  confirmation_title: ''
  confirmation_message: '<p>[webform_submission:values:computed_issue_description]</p>'
  confirmation_attributes: {  }
  confirmation_back: true
  confirmation_back_label: ''
  confirmation_back_attributes: {  }
  confirmation_exclude_query: false
  confirmation_exclude_token: false
  confirmation_update: false
  limit_total: null
  limit_total_interval: null
  limit_total_message: ''
  limit_total_unique: false
  limit_user: null
  limit_user_interval: null
  limit_user_message: ''
  limit_user_unique: false
  entity_limit_total: null
  entity_limit_total_interval: null
  entity_limit_user: null
  entity_limit_user_interval: null
  purge: none
  purge_days: null
  results_disabled: false
  results_disabled_ignore: false
  results_customize: false
  token_view: false
  token_update: false
  token_delete: false
  serial_disabled: false
access:
  create:
    roles:
      - anonymous
      - authenticated
    users: {  }
    permissions: {  }
  view_any:
    roles: {  }
    users: {  }
    permissions: {  }
  update_any:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_any:
    roles: {  }
    users: {  }
    permissions: {  }
  purge_any:
    roles: {  }
    users: {  }
    permissions: {  }
  view_own:
    roles: {  }
    users: {  }
    permissions: {  }
  update_own:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_own:
    roles: {  }
    users: {  }
    permissions: {  }
  administer:
    roles: {  }
    users: {  }
    permissions: {  }
  test:
    roles: {  }
    users: {  }
    permissions: {  }
  configuration:
    roles: {  }
    users: {  }
    permissions: {  }
handlers:
  zendesk_new_request:
    id: zendesk
    handler_id: zendesk_new_request
    label: 'Zendesk new request'
    notes: ''
    status: false
    conditions:
      enabled:
        ':input[name="support_agent_use_only[test_submission]"]':
          unchecked: true
    weight: 0
    settings:
      requester_name: contact_name
      requester_email: contact_email
      subject: 'New Parks Incident Report'
      comment: '[webform_submission:values:html]'
      tags: 'drupal webform'
      priority: normal
      status: new
      recipient: ''
      group_id: '4549352062487'
      assignee_id: ''
      type: incident
      collaborators: ''
      custom_fields: ''
      ticket_id_field: request_ticket_id
      ticket_fork_field: ''
      ticket_form_id: '4990038807319'
  test_zendesk_new_request:
    id: zendesk
    handler_id: test_zendesk_new_request
    label: 'TEST: Zendesk new request'
    notes: ''
    status: false
    conditions:
      enabled:
        ':input[name="support_agent_use_only[test_submission]"]':
          unchecked: true
    weight: 2
    settings:
      requester_name: contact_name
      requester_email: contact_email
      subject: 'New Parks Incident Report'
      comment: '[webform_submission:values:html]'
      tags: 'drupal webform'
      priority: normal
      status: new
      recipient: ''
      group_id: '4549352062487'
      assignee_id: ''
      type: incident
      collaborators: ''
      custom_fields: ''
      ticket_id_field: request_ticket_id
      ticket_fork_field: ''
      ticket_form_id: '4990038807319'
variants: {  }
