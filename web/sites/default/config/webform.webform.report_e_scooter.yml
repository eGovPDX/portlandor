uuid: cd908bf7-451f-433f-9239-d548c8643cba
langcode: en
status: open
dependencies:
  module:
    - antibot
    - honeypot
    - zendesk_webform
third_party_settings:
  antibot:
    antibot: true
  honeypot:
    honeypot: true
open: null
close: null
weight: 0
uid: 60
template: false
archive: false
id: report_e_scooter
title: 'Report an E-Scooter'
description: ''
category: Report
elements: |-
  section_public_records_statement:
    '#type': webform_section
    '#title': 'Public Records Statement'
    '#title_display': invisible
    public_records_statement_standard:
      '#type': webform_markup
      '#markup': 'Information you provide to the City is a public record and may be subject to release under Oregon&rsquo;s <a data-renderer-mark="true" href="https://www.doj.state.or.us/oregon-department-of-justice/public-records/attorney-generals-public-records-and-meetings-manual/i-public-records/#:~:text=Under%20Oregon''s%20Public%20Records%20Law,committee%20of%20the%20Legislative%20Assembly" title="https://www.doj.state.or.us/oregon-department-of-justice/public-records/attorney-generals-public-records-and-meetings-manual/i-public-records/#:~:text=Under%20Oregon''s%20Public%20Records%20Law,committee%20of%20the%20Legislative%20Assembly">Public Records Law</a>. This law classifies certain information as available to the public on request. See our <a data-renderer-mark="true" href="/help/about/privacy" title="https://www.portland.gov/help/about/privacy">privacy statement</a> for more information.'
  section_report:
    '#type': webform_section
    '#title': Report
    '#title_display': invisible
    report_scooter_issue:
      '#type': webform_radios_other
      '#title': 'What is the issue with the e-scooter?'
      '#prepopulate': true
      '#options':
        'improperly parked': 'E-scooter is improperly parked'
        damaged: 'E-scooter is damaged or not working correctly'
        'riding on sidewalk': 'User is riding on a sidewalk'
      '#other__option_label': 'Something else...'
      '#other__placeholder': 'Please describe...'
      '#required': true
    report_scooter_company:
      '#type': radios
      '#title': 'Electric scooter (e-scooter) company'
      '#description': 'Which e-scooter company does the scooter belong to? Or, what color is the e-scooter?'
      '#description_display': before
      '#prepopulate': true
      '#options':
        Bird: 'Bird (black)'
        Bolt: 'Bold (black and yellow)'
        Lime: 'Lime (green)'
        Spin: 'Spin (orange)'
        'Not sure': 'Not sure'
      '#states':
        required:
          - ':input[name="report_scooter_issue[radios]"]':
              value: 'improperly parked'
          - or
          - ':input[name="report_scooter_issue[radios]"]':
              value: damaged
    report_scooter_blocking:
      '#type': radios
      '#title': 'Is the e-scooter blocking a sidewalk, trail, bike lane, driveway, street, transit stop or other type of transportation lane? '
      '#options': yes_no
      '#options_display': side_by_side
      '#states':
        visible:
          ':input[name="report_scooter_issue[radios]"]':
            value: 'improperly parked'
      '#default_value': 'No'
    report_scooter_private_property:
      '#type': radios
      '#title': 'Is the e-scooter parked on private property?'
      '#options': yes_no
      '#options_display': side_by_side
      '#states':
        visible:
          ':input[name="report_scooter_blocking"]':
            value: 'No'
      '#default_value': 'No'
    report_scooter_id:
      '#type': textfield
      '#title': 'E-scooter ID'
      '#minlength': 5
      '#maxlength': 12
      '#prepopulate': true
      '#states':
        visible:
          ':input[name="report_scooter_issue[radios]"]':
            '!value': 'riding on sidewalk'
    report_location:
      '#type': portland_location_picker
      '#title': Location
      '#default_value':
        location_type: street
        location_park: ''
        location_address: ''
        place_name: ''
        location_details: ''
        location_lat: ''
        location_lon: ''
        location_private_owner: ''
      '#location_type__access': false
      '#location_park_container__access': false
      '#waterway_instructions__access': false
      '#location_private_owner__access': false
    report_photo:
      '#type': webform_image_file
      '#title': Photo
      '#multiple': 3
      '#description': 'If appropriate, please include up to 3 photos of the issue you are reporting.'
      '#description_display': before
      '#file_preview': 'medium:image'
      '#max_filesize': '30'
      '#file_extensions': 'gif jpg png svg jpeg'
      '#file_name': 'report_[webform_submission:sid]'
      '#sanitize': true
  section_contact:
    '#type': webform_section
    '#title': 'Your Contact Information'
    '#title_display': invisible
    contact_name:
      '#type': textfield
      '#title': 'Your Name'
    contact_email:
      '#type': email
      '#title': 'Your Email'
      '#description': 'We will use your email to confirm your submission and respond if necessary.'
      '#input_mask': '''alias'': ''email'''
      '#required': true
  resolution:
    '#type': webform_section
    '#title': Resolution
    '#states':
      visible:
        ':input[name="issue_resolved"]':
          checked: true
    '#attributes':
      style: 'padding: 15px; background-color: #cccccc;'
    markup_resolved:
      '#type': webform_markup
      '#markup': '<strong>Was the incorrect e-scooter company identified in this report? </strong>If so, uncheck the &quot;Issue Resolved&quot; checkbox, select the correct company above, and submit the form. It will be re-routed to the correct company.'
    issue_resolved:
      '#type': checkbox
      '#title': 'Issue Resolved'
      '#prepopulate': true
    report_issue_resolution:
      '#type': webform_radios_other
      '#title': 'How was the issue resolved?'
      '#options':
        'Scooter has been moved': 'Scooter has been moved'
        'Scooter has been taken in for repairs': 'Scooter has been taken in for repairs'
        'Scooter has been fixed on location': 'Scooter has been fixed on location'
    company_rep_id:
      '#type': textfield
      '#title': 'Company Rep ID'
  section_agent_use_only:
    '#type': webform_section
    '#title': 'Agent Use Only'
    '#attributes':
      style: 'padding: 15px; background-color: #cccccc;'
    '#access_create_roles':
      - administrator
      - support_agent
    '#access_update_roles':
      - administrator
      - support_agent
    '#access_view_roles':
      - administrator
      - support_agent
    agent_email:
      '#type': textfield
      '#title': 'Agent Email'
      '#default_value': '[current-user:display-name] <[current-user:mail]>'
      '#access_create_roles':
        - administrator
        - support_agent
      '#access_update_roles':
        - administrator
        - support_agent
      '#access_view_roles':
        - administrator
        - support_agent
    agent_ticket_number:
      '#type': number
      '#title': 'Ticket Number'
      '#min': 1000
      '#max': 999999999
    agent_action_taken:
      '#type': radios
      '#title': 'Action Taken'
      '#options':
        Resolved: Resolved
        Referred: Referred
      '#options_display': side_by_side
      '#states':
        invisible:
          ':input[name="agent_ticket_number"]':
            filled: true
    agent_contact_type:
      '#type': radios
      '#title': 'Contact Type'
      '#options':
        Phone: Phone
        Email: Email
        Webform: Webform
        'In Person': 'In Person'
        Webchat: Webchat
      '#options_display': side_by_side
      '#states':
        invisible:
          ':input[name="agent_ticket_number"]':
            filled: true
      '#default_value': Webform
    agent_reason:
      '#type': hidden
      '#title': 'Reason for Contact'
      '#default_value': Incident
    service_level_expectation_hours:
      '#type': webform_computed_twig
      '#title': 'Service Level Expectation (in hours)'
      '#mode': text
      '#template': |
        {% set response = 'NA' %}

        {% if data.report_scooter_issue == 'improperly parked' and data.report_scooter_blocking == 'Yes' %}
          {% set response = '1' %}
        {% elseif data.report_scooter_issue == 'improperly parked' and data.report_scooter_blocking == 'No' %}
          {% set response = '24' %}
        {% elseif data.report_scooter_issue == 'damaged' %}
          {% set response = '1' %}
        {% elseif data.report_scooter_issue == 'scooter not working' %}
          {% set response = '1' %}
        {% endif %}

        {{ response }}
      '#whitespace': spaceless
      '#store': true
      '#ajax': true
  report_ticket_id:
    '#type': textfield
    '#title': 'Zendesk New Ticket ID'
  update_token:
    '#type': hidden
    '#title': 'Update Token'
    '#default_value': '[webform_submission:token-update-url]'
  actions:
    '#type': webform_actions
    '#title': 'Submit button(s)'
    '#submit__label': Submit
css: ''
javascript: ''
settings:
  ajax: false
  ajax_scroll_top: form
  ajax_progress_type: ''
  ajax_effect: ''
  ajax_speed: null
  page: true
  page_submit_path: ''
  page_confirm_path: ''
  page_theme_name: ''
  form_title: source_entity_webform
  form_submit_once: false
  form_exception_message: ''
  form_open_message: ''
  form_close_message: ''
  form_previous_submissions: true
  form_confidential: false
  form_confidential_message: ''
  form_disable_remote_addr: false
  form_convert_anonymous: false
  form_prepopulate: false
  form_prepopulate_source_entity: false
  form_prepopulate_source_entity_required: false
  form_prepopulate_source_entity_type: ''
  form_reset: false
  form_disable_autocomplete: false
  form_novalidate: false
  form_disable_inline_errors: false
  form_required: true
  form_unsaved: false
  form_disable_back: false
  form_submit_back: false
  form_autofocus: false
  form_details_toggle: false
  form_access_denied: default
  form_access_denied_title: ''
  form_access_denied_message: ''
  form_access_denied_attributes: {  }
  form_file_limit: ''
  form_method: ''
  form_action: ''
  form_attributes: {  }
  share: false
  share_node: false
  share_theme_name: ''
  share_title: true
  share_page_body_attributes: {  }
  submission_label: ''
  submission_log: false
  submission_views: {  }
  submission_views_replace: {  }
  submission_user_columns: {  }
  submission_user_duplicate: false
  submission_access_denied: default
  submission_access_denied_title: ''
  submission_access_denied_message: ''
  submission_access_denied_attributes: {  }
  submission_exception_message: ''
  submission_locked_message: ''
  submission_excluded_elements: {  }
  submission_exclude_empty: false
  submission_exclude_empty_checkbox: false
  previous_submission_message: ''
  previous_submissions_message: ''
  autofill: false
  autofill_message: ''
  autofill_excluded_elements: {  }
  wizard_progress_bar: true
  wizard_progress_pages: false
  wizard_progress_percentage: false
  wizard_progress_link: false
  wizard_progress_states: false
  wizard_auto_forward: true
  wizard_auto_forward_hide_next_button: false
  wizard_keyboard: true
  wizard_start_label: ''
  wizard_preview_link: false
  wizard_confirmation: true
  wizard_confirmation_label: ''
  wizard_track: ''
  wizard_prev_button_label: ''
  wizard_next_button_label: ''
  wizard_toggle: true
  wizard_toggle_show_label: ''
  wizard_toggle_hide_label: ''
  preview: 0
  preview_label: ''
  preview_title: ''
  preview_message: ''
  preview_attributes: {  }
  preview_excluded_elements: {  }
  preview_exclude_empty: true
  preview_exclude_empty_checkbox: false
  draft: none
  draft_multiple: false
  draft_auto_save: false
  draft_saved_message: ''
  draft_loaded_message: ''
  draft_pending_single_message: ''
  draft_pending_multiple_message: ''
  confirmation_type: page
  confirmation_title: ''
  confirmation_message: ''
  confirmation_url: ''
  confirmation_attributes: {  }
  confirmation_back: true
  confirmation_back_label: ''
  confirmation_back_attributes: {  }
  confirmation_exclude_query: false
  confirmation_exclude_token: false
  confirmation_update: false
  limit_total: null
  limit_total_interval: null
  limit_total_message: ''
  limit_total_unique: false
  limit_user: null
  limit_user_interval: null
  limit_user_message: ''
  limit_user_unique: false
  entity_limit_total: null
  entity_limit_total_interval: null
  entity_limit_user: null
  entity_limit_user_interval: null
  purge: all
  purge_days: 14
  results_disabled: false
  results_disabled_ignore: false
  results_customize: false
  token_view: false
  token_update: true
  token_delete: false
  serial_disabled: false
access:
  create:
    roles:
      - authenticated
    users: {  }
    permissions: {  }
  view_any:
    roles:
      - support_agent
      - administrator
    users: {  }
    permissions: {  }
  update_any:
    roles:
      - support_agent
      - administrator
    users: {  }
    permissions: {  }
  delete_any:
    roles:
      - support_agent
      - administrator
    users: {  }
    permissions: {  }
  purge_any:
    roles:
      - administrator
    users: {  }
    permissions: {  }
  view_own:
    roles:
      - authenticated
    users: {  }
    permissions: {  }
  update_own:
    roles:
      - support_agent
      - administrator
    users: {  }
    permissions: {  }
  delete_own:
    roles:
      - support_agent
      - administrator
    users: {  }
    permissions: {  }
  administer:
    roles:
      - support_agent
      - administrator
    users: {  }
    permissions: {  }
  test:
    roles:
      - support_agent
      - administrator
    users: {  }
    permissions: {  }
  configuration:
    roles: {  }
    users: {  }
    permissions: {  }
handlers:
  submit_to_zendesk_api:
    id: zendesk
    label: 'Create report ticket using Zendesk API'
    notes: 'Uses the zendesk-webform module to submit the report and create a ticket in Zendesk using the API.'
    handler_id: submit_to_zendesk_api
    status: true
    conditions:
      disabled:
        ':input[name="issue_resolved"]':
          checked: true
    weight: 6
    settings:
      requester_name: contact_name
      requester_email: contact_email
      subject: 'Portland e-scooter report: [webform_submission:values:report_scooter_issue]'
      comment: "<p><b>What is the issue with the e-scooter?</b> [webform_submission:values:report_scooter_issue]</p>\r\n\r\n<p><b>E-scooter company:</b> [webform_submission:values:report_scooter_company:raw]</p>\r\n\r\n<p><b>Is the e-scooter blocking?</b> [webform_submission:values:report_scooter_blocking]</p>\r\n\r\n<p><b>Is the e-scooter parked on private property?</b> [webform_submission:values:report_scooter_private_property]</p>\r\n\r\n<p><b>E-scooter ID:</b> [webform_submission:values:report_scooter_id]</p>\r\n\r\n<p><b>Location:</b><br>\r\nAddress: <a href=\"https://www.google.com/maps/place/[webform_submission:values:report_location:location_address]\">[webform_submission:values:report_location:location_address]</a><br>\r\n\r\nPlace name: [webform_submission:values:report_location:place_name]<br>\r\nLocation description: [webform_submission:values:report_location:location_details]<br>\r\nLat/lon: \r\n<a href=\"https://www.google.com/maps/place/[webform_submission:values:report_location:location_lat],[webform_submission:values:report_location:location_lon]\">[webform_submission:values:report_location:location_lat],[webform_submission:values:report_location:location_lon]</a></p>\r\n\r\n<p><b>Service level expectation (in hours):</b> [webform_submission:values:service_level_expectation_hours]</p>"
      tags: ''
      priority: normal
      status: new
      assignee_id: '1520526687201'
      type: problem
      collaborators: ''
      custom_fields: "1500012251042: '[webform_submission:values:report_scooter_company:raw]'\r\n1500011653762: '[webform_submission:values:report_location:location_address]'\r\n1900003291865: '[webform_submission:values:report_location:location_lat],[webform_submission:values:report_location:location_lon]'\r\n1500012260701: '[webform_submission:values:service_level_expectation_hours]'\r\n1900003111085: '[webform_submission:values:agent_contact_type]'\r\n1500012355781: '[webform_submission:values:report_scooter_issue]'\r\n1500012420562: '[webform_submission:values:report_scooter_id]'\r\n1500012365401: '[webform_submission:token-update-url]'"
      ticket_id_field: report_ticket_id
  update_resolved_report_ticket_using_zendesk_api:
    id: zendesk
    label: 'Update resolved report ticket using Zendesk API'
    notes: 'Uses the zendesk-webform module to submit the report and create a ticket in Zendesk using the API.'
    handler_id: update_resolved_report_ticket_using_zendesk_api
    status: true
    conditions:
      enabled:
        ':input[name="issue_resolved"]':
          checked: true
    weight: 1
    settings:
      requester_name: contact_name
      requester_email: contact_email
      subject: 'Portland e-scooter report: [webform_submission:values:report_scooter_issue]'
      comment: "<p><b>What is the issue with the e-scooter?</b> [webform_submission:values:report_scooter_issue]</p>\r\n\r\n<p><b>E-scooter company:</b> [webform_submission:values:report_scooter_company:raw]</p>\r\n\r\n<p><b>Is the e-scooter blocking?</b> [webform_submission:values:report_scooter_blocking]</p>\r\n\r\n<p><b>Is the e-scooter parked on private property?</b> [webform_submission:values:report_scooter_private_property]</p>\r\n\r\n<p><b>E-scooter ID:</b> [webform_submission:values:report_scooter_id]</p>\r\n\r\n<p><b>Location:</b><br>\r\nAddress: <a href=\"https://www.google.com/maps/place/[webform_submission:values:report_location:location_address]\">[webform_submission:values:report_location:location_address]</a><br>\r\n\r\nPlace name: [webform_submission:values:report_location:place_name]<br>\r\nLocation description: [webform_submission:values:report_location:location_details]<br>\r\nLat/lon: \r\n<a href=\"https://www.google.com/maps/place/[webform_submission:values:report_location:location_lat],[webform_submission:values:report_location:location_lon]\">[webform_submission:values:report_location:location_lat],[webform_submission:values:report_location:location_lon]</a></p>\r\n\r\n<p><b>Service level expectation (in hours):</b> [webform_submission:values:service_level_expectation_hours]</p>"
      tags: ''
      priority: normal
      status: solved
      assignee_id: '1520526687201'
      type: problem
      collaborators: ''
      custom_fields: "1500012251042: '[webform_submission:values:report_scooter_company:raw]'\r\n1500011653762: '[webform_submission:values:report_location:location_address]'\r\n1900003291865: '[webform_submission:values:report_location:location_lat],[webform_submission:values:report_location:location_lon]'\r\n1500012260701: '[webform_submission:values:service_level_expectation_hours]'\r\n1900003111085: '[webform_submission:values:agent_contact_type]'\r\n1500012355781: '[webform_submission:values:report_scooter_issue]'\r\n1500012420562: '[webform_submission:values:report_scooter_id]'"
      ticket_id_field: report_ticket_id
variants: {  }
