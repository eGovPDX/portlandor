uuid: d7801c74-afa2-4fa3-a037-79dac683ddfb
langcode: en
status: open
dependencies:
  module:
    - portland
third_party_settings:
  portland:
    disable_demographic_form_prompt: 0
    exclude_from_json: {  }
weight: 0
open: null
close: null
uid: 60
template: false
archive: false
id: permit_wizard_residential_decks
title: 'Permit Guide - Residential Decks'
description: ''
categories:
  - 'Permit Guide'
elements: |-
  container_guide_cards:
    '#type': container
    fetch_card_building_permit_application:
      '#type': portland_node_fetcher
      '#title': 'Card - Building Permit Application'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-general-building-permit-application
      '#render_inline': 0
    fetch_card_detailed_plans:
      '#type': portland_node_fetcher
      '#title': 'Card - Detailed Plans'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-decks-detailed-plans
      '#render_inline': 0
    fetch_card_simple_site_erosion_control:
      '#type': portland_node_fetcher
      '#title': 'Card - Simple Site Erosion Control'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-general-simple-site-erosion-control
      '#render_inline': 0
    fetch_card_stormwater_mitigation_plan:
      '#type': portland_node_fetcher
      '#title': 'Card - Stormwater Mitigation Plan'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-general-stormwater-mitigation-plan
      '#render_inline': 0
    fetch_card_owner_doing_work_form:
      '#type': portland_node_fetcher
      '#title': 'Card - Owner Doing Work Form'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-general-owner-doing-work-form
      '#render_inline': 0
    fetch_card_erosion_control_plan:
      '#type': portland_node_fetcher
      '#title': 'Card - Erosion Control Plan'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-general-erosion-control-plan
      '#render_inline': 0
    fetch_card_existing_sewage_system:
      '#type': portland_node_fetcher
      '#title': 'Card - Disclaimer for Existing On-Site Sewage System'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-general-disclaimer-existing-site-sewage-system
      '#render_inline': 0
    fetch_card_zoning_and_land_use_15_min_appointment:
      '#type': portland_node_fetcher
      '#title': 'Card - Zoning and Land Use 15 Min Appointment'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-general-zoning-land-use-15-min-appointment
      '#render_inline': 0
    fetch_card_street_tree_pruning:
      '#type': portland_node_fetcher
      '#title': 'Card - Street Tree Pruning Requirements'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-general-street-tree-pruning-requirements
      '#render_inline': 0
    process_step_permit_not_required:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Permit Not Required'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-general-permit-not-required
      '#render_inline': 0
    process_step_start_no_permit_needed:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Start (no permit needed)'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-residential-decks-start-building-no
      '#render_inline': 0
    process_step_gather_requirements:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Gather Requirements'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-general-gather-requirements
      '#render_inline': 0
    process_step_apply:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Apply'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-decks-apply
      '#render_inline': 0
    process_step_respond:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Respond'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-residential-decks-apply-pay-and-respond
      '#render_inline': 0
    process_step_start:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Start'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-decks-start-building
      '#render_inline': 0
    process_step_inspect:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Inspect'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-decks-schedule-inspections
      '#render_inline': 0
  test:
    '#type': hidden
    '#title': 'Test mode'
  returning_user:
    '#type': hidden
    '#title': 'Returning User?'
  ajax_indicator:
    '#type': portland_ajax_indicator
    '#title': 'Ajax indicator'
  container_project_details:
    '#type': container
    '#states':
      invisible:
        ':input[name="returning_user"]':
          filled: true
    section_location:
      '#type': webform_section
      '#title': 'Project Details'
      '#attributes':
        class:
          - mb-10
      q1_project_address:
        '#type': portland_address_verifier
        '#title': Address
        '#location_address__required': true
        '#location_city__required': true
        '#location_state__required': true
        '#location_zip__required': true
        '#find_unincorporated': 1
        '#require_portland_city_limits': 1
        '#not_verified_remedy': 'A verified address is required. Please try again.'
        '#lookup_taxlot': 1
        '#secondary_queries':
          - api: 'https://www.portlandmaps.com/api/detail/'
            api_args:
              - detail_type: zoning
              - sections: zoning
              - geometry: '{"x":${x}, "y":${y}}'
              - api_key: AC3208DDEFB2FD0AE5F26D573C27252F
            capture:
              - path: 'zoning.overlay[].code'
                field: hidden_zoning_overlays
                parse: stringify
              - path: 'zoning.base[0].code'
                field: hidden_base_zone
                parse: stringify
              - path: 'zoning.historic_district[].code'
                field: hidden_historic_district
                parse: stringify
              - path: 'zoning.national_register_district[].code'
                field: hidden_national_register_district
                parse: stringify
              - path: 'zoning.conservation_district[].code'
                field: hidden_conservation_district
                parse: stringify
              - path: historic_resource
                field: hidden_historic_resource
                parse: flatten
                omit_null_properties: true
          - api: 'https://www.portlandmaps.com/api/detail/'
            api_args:
              - detail_type: environmental-percent-slope
              - sections: general
              - geometry: '{"x":${x}, "y":${y}}'
              - api_key: AC3208DDEFB2FD0AE5F26D573C27252F
            capture:
              - path: general.percent_slope
                field: hidden_pmapi_site_slope
      hidden_zoning_overlays:
        '#type': hidden
        '#title': 'Hidden Zoning Overlays'
      hidden_historic_district:
        '#type': hidden
        '#title': 'Hidden Historic District'
      hidden_national_register_district:
        '#type': hidden
        '#title': 'Hidden National Register District'
      hidden_conservation_district:
        '#type': hidden
        '#title': 'Hidden Conservation District'
      hidden_historic_resource:
        '#type': hidden
        '#title': 'Hidden Historic Resource'
      hidden_pmapi_site_slope:
        '#type': hidden
        '#title': 'Hidden PM Site Slope'
      hidden_base_zone:
        '#type': hidden
        '#title': 'Hidden Base Zone'
      markup_01:
        '#type': webform_markup
        '#states':
          visible:
            ':input[name="q1_project_address[location_verification_status]"]':
              empty: true
            ':input[name="edit_my_project[Edit my project]"]':
              unchecked: true
        '#markup': '<p><strong>Please enter and verify a property address in Portland to begin.</strong></p>'
      container_zoning_warning:
        '#type': container
        '#states':
          visible:
            ':input[name="test"]':
              filled: true
            ':input[name="q1_project_address[location_verification_status]"]':
              value: Verified
            ':input[name="hidden_base_zone"]':
              value:
                '!pattern': R10|R2\.5|R20|R5|R7
        warning_invalid_zone:
          '#type': portland_node_fetcher
          '#title': 'Warning - Invalid Zone'
          '#title_display': none
          '#node_alias_path': /ppd/residential-permitting/content-component/warning-general-incorrect-zone
    section_property_details:
      '#type': webform_section
      '#title': 'Property Details'
      '#description': '<p><em>Information provided by </em><a href="https://portlandmaps.com" target="_blank"><em>PortlandMaps</em></a><em>.</em></p>'
      '#attributes':
        class:
          - mb-10
          - d-none
      property_id:
        '#type': webform_computed_twig
        '#title': 'Property ID'
        '#title_display': inline
        '#display_on': form
        '#template': |-
          {{ data.q1_project_address.location_taxlot_id
           }}
        '#whitespace': trim
        '#ajax': true
      q1_1_environmental_overlay_zone:
        '#type': webform_computed_twig
        '#title': 'Is the site in an environmental overlay zone?'
        '#title_display': inline
        '#display_on': form
        '#mode': text
        '#template': |-
          {% set value = data.hidden_zoning_overlays %}
          {% if 'c' in value or 'p' in value %}Yes{% else %}No{% endif %}
        '#whitespace': trim
        '#ajax': true
      q1_2_greenway_overlay_zone:
        '#type': webform_computed_twig
        '#title': 'Is the site in a greenway overlay zone?'
        '#title_display': inline
        '#display_on': form
        '#mode': text
        '#template': |-
          {% set value = data.hidden_zoning_overlays %}
          {% if 'g' in value  %}Yes{% else %}No{% endif %}
        '#whitespace': trim
        '#ajax': true
      q1_3_historic_landmark:
        '#type': webform_computed_twig
        '#title': 'Is the property a historic/conservation landmark or in a historic district?'
        '#title_display': inline
        '#display_on': form
        '#mode': text
        '#template': '{% if data.hidden_historic_district != "" or data.hidden_national_register_district != "" or data.hidden_conservation_district != "" or data.hidden_historic_resource != "" %}Yes{% else %}No{% endif %}'
        '#whitespace': trim
        '#ajax': true
    section_project_details:
      '#type': webform_section
      '#title': 'Project Details'
      '#title_display': invisible
      '#states':
        invisible:
          ':input[name="q1_project_address[location_verification_status]"]':
            empty: true
      '#attributes':
        class:
          - mb-10
      q2_project_deck_height:
        '#type': number
        '#title': "How high off the ground is the highest point of the deck's walking surface?"
        '#description': '<p>Measure (in inches) 3 feet from where the perimeter of the deck will be.</p>'
        '#description_display': before
        '#field_suffix': inches
        '#required': true
      q3_project_deck_builder:
        '#type': radios
        '#title': 'Who will be doing the construction?'
        '#options':
          'The property owner': 'The property owner'
          'A hired contractor': 'A hired contractor'
        '#required': true
        '#prepopulate': true
      computed_slope_message:
        '#type': webform_computed_twig
        '#title': 'Slope message'
        '#title_display': none
        '#template': |
          <label for="edit-q4-project-deck-site-slope" class="js-form-required form-required">{{ 'What is the slope of the worksite?'|t }}</label>
          <div id="edit-q4-project-deck-site-slope--description" class="webform-element-description">
          {{ 'Using data from'|t }} <a href="https://www.portlandmaps.com/search/?query={{ data.q1_project_address.location_address }}" target="_blank">Portland Maps</a>, {{ 'we\'ve determined that the average slope of your property is'|t }} {{ data.hidden_pmapi_site_slope }}%. {{ 'If the slope of the worksite is more or less than that, please enter the new number as a percentage.'|t }} <a href="/ppd/glossary-term/slope" target="_blank">{{ 'Learn more about slope'|t }}</a>.
          </div>
        '#ajax': true
      q4_project_deck_site_slope:
        '#type': number
        '#title': 'What is the slope of the worksite?'
        '#title_display': none
        '#description_display': invisible
        '#field_suffix': '%'
        '#required': true
      q5_project_deck_near_waterbody:
        '#type': radios
        '#title': 'Is there a wetland or body of water near the worksite?'
        '#options': yes_no
        '#required': true
      q6_project_waterbody_distance:
        '#type': number
        '#title': 'How far away is the wetland or body of water from the worksite?'
        '#description': '<p>Enter the distance in feet.</p>'
        '#description_display': before
        '#field_suffix': feet
        '#required': true
        '#states':
          visible:
            ':input[name="q5_project_deck_near_waterbody"]':
              value: 'Yes'
      q7_project_using_powered_machinery:
        '#type': radios
        '#title': 'Will your project temporarily disturb more than 500 square feet of the ground?'
        '#options': yes_no
        '#required': true
      q8_project_deck_single_level:
        '#type': radios
        '#title': 'Will the deck have only one level?'
        '#description': "<p>A single-level deck is one flat surface. If your deck will have multiple sections at different heights, it's not single-level.</p>"
        '#description_display': before
        '#options': yes_no
        '#required': true
      q9_project_deck_connected_to_house:
        '#type': radios
        '#title': 'Will the deck connect to the outside wall of the house?'
        '#description': '<p>This means the deck will be physically attached to the house, not free-standing.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q10_project_deck_finish:
        '#type': radios
        '#title': 'Will you add tile, concrete, or other finish materials on top of the deck?'
        '#description': '<p>Some decks are designed to hold finish materials like tile or concrete. These materials add extra weight, so your deck may have additional design requirements.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q11_project_deck_rectangular:
        '#type': radios
        '#title': 'Will the deck be rectangular in shape?'
        '#description': '<p>This means your deck is shaped like a rectangle â€” not an L-shape, hexagon, or something more complex.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
        '#prepopulate': true
      q12_project_deck_one_row_posts:
        '#type': radios
        '#title': 'Will the deck have just one row of posts supporting the outer edge?'
        '#description': '<p>This means the joists (the boards under the deck that support the surface) run straight from the house to a single beam (a heavy board that rests on posts). This is called a single-span deck, and the joists may cantilever (stick out a little past the beam).</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
        '#prepopulate': true
      q13_project_deck_heavy:
        '#type': radios
        '#title': 'Will the deck need to hold something very heavy, like a hot tub?'
        '#description': '<p>Some decks need to support concentrated weight (heavy items in one spot), like a hot tub. This affects how the deck must be built to stay safe and strong.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q14_project_deck_manufactured_handrails:
        '#type': radios
        '#title': 'Will the deck have manufactured handrails made of glass, cable, aluminum, or steel?'
        '#description': '<p>This refers to handrail systems that are pre-made by a company, often called proprietary handrails.</p>'
        '#description_display': before
        '#prepopulate': true
        '#options': yes_no
        '#required': true
      q15_project_large_impervious_surface:
        '#type': radios
        '#title': 'Will the project add more than 1,000 square feet of impervious surface?'
        '#description': '<p>Impervious surfaces are things like concrete or asphalt that stop water from soaking into the ground. We use this to understand how your project affects rainwater drainage.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q16_project_deck_has_roof:
        '#type': radios
        '#title': 'Will the deck have a solid, covered roof?'
        '#description_display': before
        '#options': yes_no
        '#required': true
        '#prepopulate': true
      q17_project_deck_roof_over_200_sqft:
        '#type': radios
        '#title': 'Will the solid, covered roof be more than 200 square feet?'
        '#description_display': before
        '#prepopulate': true
        '#options': yes_no
        '#required': true
        '#states':
          visible:
            ':input[name="q16_project_deck_has_roof"]':
              value: 'Yes'
      q18_project_septic_on_property:
        '#type': radios
        '#title': 'Is there a septic system or cesspool on the property?'
        '#options': yes_no
        '#required': true
        '#prepopulate': true
      q19_how_far_is_the_septic_from_the_deck:
        '#type': number
        '#title': 'How far is the septic system or cesspool from the deck?'
        '#description': '<p>Enter the distance (in feet) that the septic system or cesspool is away from the deck.</p>'
        '#description_display': before
        '#states':
          visible:
            ':input[name="q18_project_septic_on_property"]':
              value: 'Yes'
      q20_project_deck_large_trees:
        '#type': radios
        '#title': 'Are there trees near where the project will be happening?'
        '#options': yes_no
        '#required': true
      q21_project_deck_trees_distance:
        '#type': number
        '#title': 'How far are the trees from where the project will be happening?'
        '#description': '<p>Enter the distance (in feet) that the trees are away from the project.</p>'
        '#description_display': before
        '#field_suffix': feet
        '#required': true
        '#states':
          visible:
            ':input[name="q20_project_deck_large_trees"]':
              value: 'Yes'
      q22_project_deck_trees_near_row:
        '#type': radios
        '#title': 'Do any of these trees come close to a public right-of-way?'
        '#description': '<p>Public right-of-way are things like sidewalks, planting strips, road shoulders, street medians, alleys, etc.</p>'
        '#description_display': before
        '#prepopulate': true
        '#options': yes_no
        '#required': true
        '#states':
          visible:
            ':input[name="q20_project_deck_large_trees"]':
              value: 'Yes'
    section_send_link:
      '#type': webform_section
      '#title': 'Send a link?'
      '#description': "<p>If you'd like us to send a link back to this project, please provide an email address. It will only be used to send this one email and won't be used for any other purpose.</p>"
      '#states':
        visible:
          ':input[name="q1_project_address[location_verification_status]"]':
            filled: true
      '#attributes':
        class:
          - mb-10
      email_address_optional:
        '#type': textfield
        '#title': 'Email address (optional)'
    container_disclaimer:
      '#type': webform_section
      '#title': Disclaimer
      '#states':
        visible:
          ':input[name="q1_project_address[location_verification_status]"]':
            filled: true
      '#attributes':
        class:
          - mb-10
      markup_disclaimer:
        '#type': webform_markup
        '#markup': '<p>This tool is for informational purposes only and offers general guidance based on your answers. It does not replace review by City staff or guarantee permitting requirements. We work hard to keep the information accurate and current, but errors may occur. Please contact us if you have questions or need help confirming requirements.</p>'
      disclaimer_confirmation:
        '#type': checkbox
        '#title': 'I understand and acknowledge that this tool is for informational purposes only.'
        '#description_display': before
        '#required': true
        '#required_error': 'You must indicate your acknowledgement by checking the box'
  container_welcome_back_results:
    '#type': container
    '#states':
      visible:
        - ':input[name="returning_user"]':
            filled: true
        - or
        - ':input[name="test"]':
            filled: true
    return_link:
      '#type': webform_computed_twig
      '#title': 'Return Link'
      '#display_on': none
      '#template': "https://{{ webform_token('[site:url-brief]', webform_submission, [], options) }}{{ webform_token('[current-page:url:path]', webform_submission, [], options) }}?returning_user=1&q1_project_address[location_address]={{ data.q1_project_address.location_address }}&q1_project_address[location_city]={{ data.q1_project_address.location_city }}&q1_project_address[location_state]={{ data.q1_project_address.location_state }}&q1_project_address[location_zip]={{ data.q1_project_address.location_zip }}&q1_1_environmental_overlay_zone={{ data.q1_1_environmental_overlay_zone }}&q1_2_greenway_overlay_zone={{ data.q1_2_greenway_overlay_zone }}&q1_3_historic_landmark={{ data.q1_3_historic_landmark }}&q2_project_deck_height={{ data.q2_project_deck_height }}&q3_project_deck_builder={{ data.q3_project_deck_builder }}&q4_project_deck_site_slope={{ data.q4_project_deck_site_slope }}&q5_project_deck_near_waterbody={{ data.q5_project_deck_near_waterbody }}&q6_project_waterbody_distance={{ data.q6_project_waterbody_distance }}&q7_project_using_powered_machinery={{ data.q7_project_using_powered_machinery }}&q8_project_deck_single_level={{ data.q8_project_deck_single_level }}&q9_project_deck_connected_to_house={{ data.q9_project_deck_connected_to_house }}&q10_project_deck_finish={{ data.q10_project_deck_finish }}&q11_project_deck_rectangular={{ data.q11_project_deck_rectangular }}&q12_project_deck_one_row_posts={{ data.q12_project_deck_one_row_posts }}&q13_project_deck_heavy={{ data.q13_project_deck_heavy }}&q14_project_deck_manufactured_handrails={{ data.q14_project_deck_manufactured_handrails }}&q15_project_large_impervious_surface={{ data.q15_project_large_impervious_surface }}&q16_project_deck_has_roof={{ data.q16_project_deck_has_roof }}&q17_project_deck_roof_over_200_sqft={{ data.q17_project_deck_roof_over_200_sqft }}&q18_project_septic_on_property={{ data.q18_project_septic_on_property }}&q19_how_far_is_the_septic_from_the_deck={{ data.q19_how_far_is_the_septic_from_the_deck }}&q20_project_deck_large_trees={{ data.q20_project_deck_large_trees }}&q21_project_deck_trees_distance={{ data.q21_project_deck_trees_distance }}&q22_project_deck_trees_near_row={{ data.q22_project_deck_trees_near_row }}&email_address_optional={{ data.email_address_optional }}&disclaimer_confirmation={{ data.disclaimer_confirmation }}"
    computed_permit_required:
      '#type': webform_computed_twig
      '#title': 'Computed Permit Required'
      '#wrapper_attributes':
        class:
          - d-nonex
      '#display_on': form
      '#mode': text
      '#template': |-
        {% set permit_required = "Yes" %}
        {% if data.q2_project_deck_height <= 30 and data.q17_project_deck_roof_over_200_sqft != "Yes" %}
          {% set permit_required = "No" %}
        {% endif %}
        {{ permit_required }}
      '#whitespace': trim
      '#ajax': true
    computed_project_details:
      '#type': webform_computed_twig
      '#title': 'Computed Project Details'
      '#title_display': none
      '#display_on': none
      '#mode': html
      '#template': |2+
              <table class="mb-5">

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Project address:"|t }}</th>
                  <td>{{ data.q1_project_address.location_address }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Deck height:"|t }}</th>
                  <td>{{ data.q2_project_deck_height }} {{ "inches"|t }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Who is doing the construction:"|t }}</th>
                  <td>{{ data.q3_project_deck_builder }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Worksite slope:"|t }}</th>
                  <td>{{ data.q4_project_deck_site_slope }}%</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Near body of water:"|t }}</th>
                  <td>{{ data.q5_project_deck_near_waterbody }}</td>
                </tr>
                {% if data.q5_project_deck_near_waterbody == "Yes" %}
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Distance to body of water:"|t }}</th>
                  <td>{{ data.q6_project_waterbody_distance }} {{ "feet"|t }}</td>
                </tr>
                {% endif %}

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Disturb more than 500 sq. ft. of soil:"|t }}</th>
                  <td>{{ data.q7_project_using_powered_machinery }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Single level deck:"|t }}</th>
                  <td>{{ data.q8_project_deck_single_level }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Connected to house:"|t }}</th>
                  <td>{{ data.q9_project_deck_connected_to_house }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Finishing materials on top of deck:"|t }}</th>
                  <td>{{ data.q10_project_deck_finish }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Rectangular deck:"|t }}</th>
                  <td>{{ data.q11_project_deck_rectangular }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "One row of posts supporting deck:"|t }}</th>
                  <td>{{ data.q12_project_deck_one_row_posts }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Support heavy weight:"|t }}</th>
                  <td>{{ data.q13_project_deck_heavy }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Manufactured handrails:"|t }}</th>
                  <td>{{ data.q14_project_deck_manufactured_handrails }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "More than 1,000 sq. ft. of impervious surface:"|t }}</th>
                  <td>{{ data.q15_project_large_impervious_surface }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Solid covered roof:"|t }}</th>
                  <td>{{ data.q16_project_deck_has_roof }}</td>
                </tr>

                {% if data.q17_project_deck_roof_over_200_sqft == "Yes" %}
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Solid cover roof is more than 200 sq. ft.:"|t }}</th>
                  <td>{{ data.q17_project_deck_roof_over_200_sqft }}</td>
                </tr>
                {% endif %}

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Septic system or cesspool:"|t }}</th>
                  <td>{{ data.q18_project_septic_on_property }}</td>
                </tr>

                {% if data.q18_project_septic_on_property == "Yes" %}
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Distance of septic system or cesspool:"|t }}</th>
                  <td>{{ data.q19_how_far_is_the_septic_from_the_deck }} feet</td>
                </tr>
                {% endif %}

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Trees near the project:"|t }}</th>
                  <td>{{ data.q20_project_deck_large_trees }}</td>
                </tr>
                {% if data.q20_project_deck_large_trees == "Yes" %}
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Distance of trees near the project:"|t }}</th>
                  <td>{{ data.q21_project_deck_trees_distance }} {{ "feet"|t }}</td>
                </tr>
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Trees in public right-of-way:"|t }}</th>
                  <td>{{ data.q22_project_deck_trees_near_row }}</td>
                </tr>
                {% endif %}
              </table>

              <a href="{{ data.return_link|replace({'returning_user=1&':''}) }}#residential-decks-guide" class="btn btn-outline-primary ms-auto rounded rounded-1 border-2">{{ 'Edit details'|t }}</a>

    computed_project_details_container:
      '#type': webform_computed_twig
      '#title': 'Computed Project Details Container'
      '#title_display': none
      '#display_on': form
      '#template': |
        <div class="accordion aria-accordion no-expand-all mb-5" id="acc-1-0">
          <h3 class="aria-accordion__heading accordion-item">
            <button
              class="accordion-button collapsed aria-accordion__trigger"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#acc-1-0-panel-1"
              aria-expanded="false"
              aria-controls="acc-1-0-panel-1"
              id="acc-1-0-panel-1-trigger">
              Your project details
            </button>
          </h3>
          <div
            id="acc-1-0-panel-1"
            class="accordion-collapse collapse aria-accordion__panel aria-accordion__panel--transition"
            role="region"
            aria-labelledby="acc-1-0-panel-1-trigger"
            data-bs-parent="#acc-1-0">
            <div class="accordion-body">

              {{ data.computed_project_details }}

            </div>
          </div>
        </div>
      '#ajax': true
    computed_no_permit_required:
      '#type': webform_computed_twig
      '#title': 'Computed No Permit Required'
      '#title_display': none
      '#display_on': none
      '#template': |+
        {% if data.computed_permit_required == "No" or data.test != "" %}

          <li>
            {{ data.process_step_permit_not_required|raw }}
          </li>
            
          <li>
            {{ data.process_step_start_no_permit_needed|raw }}
          </li>
            
        {% endif %}

      '#ajax': true
    computed_talk_with_us:
      '#type': webform_computed_twig
      '#title': 'Computed Talk With Us'
      '#title_display': none
      '#display_on': none
      '#template': |
        {% if data.q1_3_historic_landmark == "Yes" or data.q1_2_greenway_overlay_zone == "Yes" or data.q1_1_environmental_overlay_zone == "Yes" or data.test == "true" %}

        <li>
          {{ data.fetch_card_zoning_and_land_use_15_min_appointment|raw }}

            <div class="position-relative mt-4">
              <div class="alert p-3">
                <p class="mb-2"><strong>{{ "We're suggesting this because..."|t }}</strong></p>
                <ul class="mb-0">
                  {% if data.q1_3_historic_landmark == "Yes" or data.test is not empty %}
                  <li>{{ "This address is in a Historic District."|t }}</li>
                  {% endif %}
                  {% if data.q1_1_environmental_overlay_zone == "Yes" or data.test is not empty %}
                  <li>{{ "This address is in an Environmental Zone."|t }}</li>
                  {% endif %}
                  {% if data.q1_2_greenway_overlay_zone == "Yes" or data.test is not empty %}
                  <li>{{ "This address is in a Greenway Zone."|t }}</li>
                  {% endif %}
                  {% if data.q1_3_historic_landmark == "Yes" or data.q1_2_greenway_overlay_zone == "Yes" or data.q1_1_environmental_overlay_zone == "Yes" or data.test is not empty %}
                  <li>{{ "You're making exterior changes to the property."|t }}</li>
                  {% endif %}
                </ul>
              </div>
            </div>

        </li>

        {% endif %}
      '#ajax': true
    computed_requirements:
      '#type': webform_computed_twig
      '#title': 'Computed Requirements'
      '#title_display': none
      '#display_on': none
      '#mode': html
      '#template': |-
        {% set erosion_control_type = "" %}
        {% if data.computed_permit_required == "Yes" and data.q7_project_using_powered_machinery == "No" and data.q4_project_deck_site_slope < 10 and data.q1_1_environmental_overlay_zone == "No" and data.q1_2_greenway_overlay_zone == "No" and (data.q5_project_deck_near_waterbody == "No" or data.q6_project_waterbody_distance >= 50) %}
          {% set erosion_control_type = "Simple" %}
        {% endif %}
        {% if data.computed_permit_required == "Yes" and (data.q7_project_using_powered_machinery == "Yes" or data.q4_project_deck_site_slope >= 10 or data.q1_1_environmental_overlay_zone == "Yes" or data.q1_2_greenway_overlay_zone == "Yes" or (data.q5_project_deck_near_waterbody == "Yes" and data.q6_project_waterbody_distance < 50)) %}
          {% set erosion_control_type = "Full" %}
        {% endif %}

        {% if data.computed_permit_required == "Yes" or data.test is not empty %}

          <li>
            {{ data.process_step_gather_requirements|raw }}

            <!-- Building permit application --------------->
            {% if data.computed_permit_required == "Yes" or data.test is not empty %}
            {{ data.fetch_card_building_permit_application|raw }}
            {% endif %}

            <!-- Detailed Plans --------------->
            {% if data.computed_permit_required == "Yes" or data.test is not empty %}
            {{ data.fetch_card_detailed_plans|raw }}

            {% if (data.q8_project_deck_single_level == "Yes" and data.q9_project_deck_connected_to_house == "Yes" and data.q10_project_deck_finish == "No" and data.q11_project_deck_rectangular == "Yes" and data.q12_project_deck_one_row_posts == "Yes" and data.q13_project_deck_heavy == "No") or data.test is not empty %}
                  <div class="position-relative mb-4">
                    <div class="alert p-3">
                      <p>{{ 'Based on your project details, you are qualified to use "<strong>permit-ready plans</strong>."'|t }}</p>
                    </div>
                  </div>
            {% endif %}

            {% if data.q14_project_deck_manufactured_handrails == "Yes" or data.test is not empty %}
                  <div class="position-relative mb-4">
                    <div class="alert p-3">
                      <p>{{ 'If your deck uses a pre-made handrail system, you will also need to provide stamped structural drawings for the handrail and its attachment at the base.'|t }}</p>
                    </div>
                  </div>          
              {% endif %}
            {% endif %}
            
            <!-- Simple Erosion Control --------------->
            {% if erosion_control_type == "Simple" or data.test is not empty %}
              {{ data.fetch_card_simple_site_erosion_control|raw }}
            {% endif %}
            
            <!-- Stormwater Mitigation Plan --------------->
            {% if data.q15_project_large_impervious_surface == "Yes" or data.test is not empty %}
              {{ data.fetch_card_stormwater_mitigation_plan|raw }}
            {% endif %}
            
            <!-- "Owner doing work" form --------------->
            {% if data.q3_project_deck_builder == "The property owner" or data.test is not empty %}
              {{ data.fetch_card_owner_doing_work_form|raw }}
            {% endif %}

            <!-- Erosion Control --------------->
            {% if erosion_control_type == "Full" or data.test is not empty %}
              {{ data.fetch_card_erosion_control_plan|raw }}
            {% endif %}

            <!-- Disclaimer for existing on-site sewage system --------------->
            {% if (data.q18_project_septic_on_property == "Yes" and data.q19_how_far_is_the_septic_from_the_deck <=10) or data.test is not empty %}
              {{ data.fetch_card_existing_sewage_system|raw }}
            {% endif %}

            <!-- Street tree pruning requirements --------------->
            {% if data.q20_project_deck_large_trees == "Yes" or data.test is not empty %}
              {{ data.fetch_card_street_tree_pruning|raw }}
            {% endif %}

          </li>

        {% endif %}
    computed_results:
      '#type': webform_computed_twig
      '#title': 'Computed Results'
      '#title_display': none
      '#display_on': form
      '#mode': html
      '#template': |
        {% if data.test %}
        <div class="bg-info p-3 mb-5">
          NOTE: These results are being viewed in reviewer mode, with all possible options displayed for testing purposes. To exit reviewer mode, remove the parameter <strong>test=true</strong> from the URL.
        </div>
        {% endif %}

        <ol class="process-list mb-10">

          {{ data.computed_no_permit_required }}  

          {{ data.computed_talk_with_us }}

          {{ data.computed_requirements }}

        {% if data.computed_permit_required == "Yes" %}

          <li>
            {{ data.process_step_apply|raw }}
          </li>

          <li>
            {{ data.process_step_respond|raw }}
          </li>

        {% endif %}

        {% if data.computed_permit_required == "Yes" %}

          <li>
            {{ data.process_step_inspect|raw }}
          </li>

        </ol>

        {% endif %}
      '#whitespace': spaceless
      '#ajax': true
  actions:
    '#type': webform_actions
    '#title': 'Submit button(s)'
    '#states':
      invisible:
        - ':input[name="q1_project_address[location_verification_status]"]':
            empty: true
        - or
        - ':input[name="q1_project_address[location_verification_status]"]':
            empty: false
          ':input[name="edit_my_project[Edit my project]"]':
            unchecked: true
          ':input[name="returning_user"]':
            empty: false
css: "  .checkbox-button-outline-primary label.option {\r\n    display: inline-block;\r\n    padding: 0.375rem 0.75rem;\r\n    font-size: 1rem;\r\n    font-weight: 400;\r\n    line-height: 1.5;\r\n    text-align: center;\r\n    white-space: nowrap;\r\n    vertical-align: middle;\r\n    user-select: none;\r\n    background-color: transparent;\r\n    color: #1d62c9;\r\n    border: 2px solid #1d62c9;\r\n    border-radius: 0.2rem;\r\n    margin-left: auto;\r\n    margin-right: 0;\r\n    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out;\r\n    cursor: pointer;\r\n  }\r\n  \r\n  .checkbox-button-outline-primary label.option:hover {\r\n    background-color: #1d62c9;\r\n    color: #ffffff;\r\n    border: 2px solid #1d62c9;\r\n    border-radius: 0.2rem;\r\n  }\r\n\r\n"
javascript: "(function ($, Drupal, once) {\r\n  Drupal.behaviors.bodyLinkHandler = {\r\n    attach: function (context, settings) {\r\n      $(once('bodyLinkHandler', '#edit-edit-my-project label.webform-options-display-buttons-label', context))\r\n        .on('click', function () {\r\n          document.location = '#body-content';\r\n        });\r\n    }\r\n  };\r\n  Drupal.behaviors.pmapiSlopeAlert = {\r\n    attach: function (context) {\r\n      $(once('pmapiSlopeAlert', 'input[name=\"hidden_pmapi_site_slope\"]', context))\r\n        .on('change.pmapiSlope', function () {\r\n          var slopeVal = $(this).val();\r\n          var $target = $('input[name=\"q4_project_deck_site_slope\"]');\r\n\r\n          // Only set the value if the target field is empty\r\n          if ($target.length && !$target.val()) {\r\n            $target.val(slopeVal);\r\n          }\r\n        });\r\n    }\r\n  };\r\n})(jQuery, Drupal, once);\r\n"
settings:
  ajax: false
  ajax_scroll_top: form
  ajax_progress_type: ''
  ajax_effect: ''
  ajax_speed: null
  page: true
  page_submit_path: ''
  page_confirm_path: ''
  page_theme_name: ''
  form_title: source_entity_webform
  form_submit_once: false
  form_open_message: ''
  form_close_message: ''
  form_exception_message: ''
  form_previous_submissions: true
  form_confidential: false
  form_confidential_message: ''
  form_disable_remote_addr: false
  form_convert_anonymous: false
  form_prepopulate: true
  form_prepopulate_source_entity: false
  form_prepopulate_source_entity_required: false
  form_prepopulate_source_entity_type: ''
  form_unsaved: false
  form_disable_back: false
  form_submit_back: false
  form_disable_autocomplete: false
  form_novalidate: false
  form_disable_inline_errors: false
  form_required: false
  form_autofocus: false
  form_details_toggle: false
  form_reset: true
  form_access_denied: default
  form_access_denied_title: ''
  form_access_denied_message: ''
  form_access_denied_attributes: {  }
  form_file_limit: ''
  form_attributes:
    class:
      - permit-guide
    id: residential-decks-guide
  form_method: ''
  form_action: ''
  share: false
  share_node: false
  share_theme_name: ''
  share_title: true
  share_page_body_attributes: {  }
  submission_label: ''
  submission_exception_message: ''
  submission_locked_message: ''
  submission_log: false
  submission_excluded_elements: {  }
  submission_exclude_empty: false
  submission_exclude_empty_checkbox: false
  submission_views: {  }
  submission_views_replace: {  }
  submission_user_columns: {  }
  submission_user_duplicate: false
  submission_access_denied: default
  submission_access_denied_title: ''
  submission_access_denied_message: ''
  submission_access_denied_attributes: {  }
  previous_submission_message: ''
  previous_submissions_message: ''
  autofill: false
  autofill_message: ''
  autofill_excluded_elements: {  }
  wizard_progress_bar: true
  wizard_progress_pages: false
  wizard_progress_percentage: false
  wizard_progress_link: false
  wizard_progress_states: false
  wizard_start_label: ''
  wizard_preview_link: false
  wizard_confirmation: true
  wizard_confirmation_label: ''
  wizard_auto_forward: true
  wizard_auto_forward_hide_next_button: false
  wizard_keyboard: true
  wizard_track: ''
  wizard_prev_button_label: ''
  wizard_next_button_label: ''
  wizard_toggle: false
  wizard_toggle_show_label: ''
  wizard_toggle_hide_label: ''
  wizard_page_type: container
  wizard_page_title_tag: h2
  preview: 0
  preview_label: ''
  preview_title: ''
  preview_message: ''
  preview_attributes: {  }
  preview_excluded_elements: {  }
  preview_exclude_empty: true
  preview_exclude_empty_checkbox: false
  draft: none
  draft_multiple: false
  draft_auto_save: false
  draft_saved_message: ''
  draft_loaded_message: ''
  draft_pending_single_message: ''
  draft_pending_multiple_message: ''
  confirmation_type: inline
  confirmation_url: ''
  confirmation_title: ''
  confirmation_message: '<p>This permit guide has been generated based on the details of your project. If you provided an email address in the form, you''ll get a copy by email too.&nbsp;</p><h3>Project details</h3><div class="mb-10">[webform_submission:values:computed_project_details:html]</div><div>[webform_submission:values:computed_results:html]</div>'
  confirmation_attributes: {  }
  confirmation_back: false
  confirmation_back_label: ''
  confirmation_back_attributes: {  }
  confirmation_exclude_query: false
  confirmation_exclude_token: false
  confirmation_update: false
  limit_total: null
  limit_total_interval: null
  limit_total_message: ''
  limit_total_unique: false
  limit_user: null
  limit_user_interval: null
  limit_user_message: ''
  limit_user_unique: false
  entity_limit_total: null
  entity_limit_total_interval: null
  entity_limit_user: null
  entity_limit_user_interval: null
  purge: all
  purge_days: 1
  results_disabled: false
  results_disabled_ignore: false
  results_customize: false
  token_view: false
  token_update: false
  token_delete: false
  serial_disabled: false
access:
  create:
    roles:
      - anonymous
      - authenticated
    users: {  }
    permissions: {  }
  view_any:
    roles: {  }
    users: {  }
    permissions: {  }
  update_any:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_any:
    roles: {  }
    users: {  }
    permissions: {  }
  purge_any:
    roles: {  }
    users: {  }
    permissions: {  }
  view_own:
    roles: {  }
    users: {  }
    permissions: {  }
  update_own:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_own:
    roles: {  }
    users: {  }
    permissions: {  }
  administer:
    roles: {  }
    users: {  }
    permissions: {  }
  test:
    roles: {  }
    users: {  }
    permissions: {  }
  configuration:
    roles: {  }
    users: {  }
    permissions: {  }
handlers:
  email:
    id: email
    handler_id: email
    label: 'Send confirmation and return link'
    notes: ''
    status: true
    conditions: {  }
    weight: 0
    settings:
      states:
        - completed
      to_mail: '[webform_submission:values:email_address_optional:raw]'
      to_options: {  }
      bcc_mail: ''
      bcc_options: {  }
      cc_mail: ''
      cc_options: {  }
      from_mail: ppd@portlandoregon.gov
      from_options: {  }
      from_name: _default
      reply_to: ''
      return_path: ''
      sender_mail: ''
      sender_name: ''
      subject: 'Your residential deck permit guide'
      body: '<p>Thanks for telling us about your deck project on <span>Portland.gov</span>. We use these details to show you what you''ll need to apply for a permit. Those results are included below.</p><p>You can return to update your project and review the requirements anytime by using this link: <a href="[webform_submission:values:return_link]&amp;returning_user=1#residential-decks-guide"><strong>Return to your deck project details</strong></a></p><p>For more on completing your permitting project, <a href="https://www.portland.gov/ppd/residential-permitting/decks">visit our pages on residential decks</a>.</p><p>Have questions? Just reply to this email. We''re happy to help.</p><p>Thank you,</p><p>Portland Permitting &amp; Development (PPD)<br>City of Portland<br><a href="http://portland.gov/ppd">Portland.gov/ppd</a></p><hr style="margin:30px 0;"><h2>Project Details</h2><div>[webform_submission:values:computed_project_details:html]&nbsp;<br><br>&nbsp;</div><hr><h2>Your residential deck permit plan</h2><div>[webform_submission:values:computed_results:html]</div>'
      excluded_elements: {  }
      ignore_access: false
      exclude_empty: true
      exclude_empty_checkbox: false
      exclude_attachments: false
      html: true
      attachments: false
      twig: false
      theme_name: ''
      parameters: {  }
      debug: false
variants: {  }
