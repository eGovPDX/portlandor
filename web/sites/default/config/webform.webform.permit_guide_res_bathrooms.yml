uuid: 3193620e-f396-409f-9532-55d6ee6edc3c
langcode: en
status: open
dependencies:
  module:
    - portland
third_party_settings:
  portland:
    disable_demographic_form_prompt: 0
    exclude_from_json: {  }
weight: 0
open: null
close: null
uid: 60
template: false
archive: false
id: permit_guide_res_bathrooms
title: 'Permit Guide - Residential Bathrooms'
description: ''
categories:
  - 'Permit Guide'
elements: |-
  container_guide_cards:
    '#type': container
    fetch_card_building_permit_application:
      '#type': portland_node_fetcher
      '#title': 'Card - Residential - Building Permit Application'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-building-permit-application
      '#render_inline': 0
    fetch_card_zoning_and_land_use_15_min_appointment:
      '#type': portland_node_fetcher
      '#title': 'Card - Zoning and Land Use 15 Min Appointment'
      '#node_alias_path': /ppd/content-component/card-zoning-and-land-use-15-minute-appointment
      '#render_inline': 0
    fetch_card_detailed_plans:
      '#type': portland_node_fetcher
      '#title': 'Card - Residential - Bathrooms - Detailed Plans'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-bathrooms-detailed-plans
      '#render_inline': 0
    fetch_card_simple_bathroom_process:
      '#type': portland_node_fetcher
      '#title': 'Card - Residential - Bathrooms - Simple Bathroom Program'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-bathrooms-simple-bathroom-program
      '#render_inline': 0
    fetch_card_owner_doing_work_form:
      '#type': portland_node_fetcher
      '#title': 'Card - Residential - Owner Doing Work Form'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-owner-doing-work-form
      '#render_inline': 0
    fetch_card_electrical_permit_application:
      '#type': portland_node_fetcher
      '#title': 'Card - Residential - Bathrooms - Electrical Permit Application'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-bathrooms-electrical-permit
      '#render_inline': 0
    fetch_card_plumbing_permit_application:
      '#type': portland_node_fetcher
      '#title': 'Card - Residential - Bathrooms - Plumbing Permit Application'
      '#help': '<p><strong>Content missing: Plumbing Permit Application</strong></p>'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-bathrooms-plumbing-permit-application
      '#render_inline': 0
    fetch_card_mechanical_permit_application:
      '#type': portland_node_fetcher
      '#title': 'Card - Residential - Bathrooms - Mechanical Permit Application'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-bathrooms-mechanical-permit
      '#render_inline': 0
    fetch_card_water_meter_sizing_worksheet:
      '#type': portland_node_fetcher
      '#title': 'Card - Residential - Residential Meter Request Form'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-residential-meter-request-form
      '#render_inline': 0
    fetch_card_residential_sdc_form:
      '#type': portland_node_fetcher
      '#title': 'Card - Residential - Residential SDC Form'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-residential-sdc-form
      '#render_inline': 0
    process_step_gather:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Residential - Bathrooms - Research your project requirements'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-residential-bathrooms-research-your
      '#render_inline': 0
    process_step_apply:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Residential - Bathrooms - Prepare your application materials'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-residential-bathrooms-prepare-your
      '#render_inline': 0
    process_step_respond:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Apply, Pay, Respond to Feedback'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-residential-bathrooms-apply-pay-and
      '#render_inline': 0
    process_step_start:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Residential - Bathrooms - Get your permit and start work'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-residential-bathrooms-get-your-permit-and
      '#render_inline': 0
    process_step_inspect:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Residential - Bathrooms - Get inspections'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-residential-bathrooms-get-inspections
      '#render_inline': 0
    warning_invalid_zone:
      '#type': portland_node_fetcher
      '#title': 'Warning - Invalid Zone'
      '#node_alias_path': /ppd/content-component/warning-incorrect-zone
      '#render_inline': 0
    fetch_disclaimer_text:
      '#type': portland_node_fetcher
      '#title': 'Disclaimer - Permit Guide'
      '#title_display': none
      '#node_alias_path': /ppd/content-component/disclaimer-permit-guide
      '#render_inline': 0
      '#open_links_in_new_tab': 0
    disclaimer_permit_guide_email:
      '#type': portland_node_fetcher
      '#title': 'Disclaimer - Permit Guide - Email'
      '#title_display': none
      '#node_alias_path': /ppd/content-component/disclaimer-permit-guide-email
      '#render_inline': 0
      '#open_links_in_new_tab': 0
  test:
    '#type': hidden
    '#title': 'Test mode'
  returning_user:
    '#type': hidden
    '#title': 'Returning User?'
  container_project_details:
    '#type': container
    '#states':
      invisible:
        ':input[name="returning_user"]':
          filled: true
    section_location:
      '#type': webform_section
      '#title': 'Property Details'
      '#attributes':
        class:
          - mb-10
      q1_project_address:
        '#type': portland_address_verifier
        '#title': Address
        '#location_verification_status__required': true
        '#location_address__description': 'Begin typing to see a list of possible address matches in the Portland metro area, then select one.'
        '#location_address__required': true
        '#unit_number__access': false
        '#location_city__required': true
        '#location_state__required': true
        '#location_zip__required': true
        '#location_state__wrapper_attributes':
          class:
            - d-none
        '#find_unincorporated': 0
        '#require_portland_city_limits': 0
        '#not_verified_heading': "We're unable to find this address. Please try again."
        '#not_verified_reasons': 'This guide requires a valid address within the <a href="https://www.portland.gov/ppd">Portland Permitting & Development bureau</a> service area.'
        '#not_verified_remedy_required': 'If you need assistance, contact us at <a href="mailto:ppd@portlandoregon.gov">ppd@portlandoregon.gov</a>.'
        '#verify_button_text': Find
        '#lookup_taxlot': 1
        '#secondary_queries':
          - api: 'https://www.portlandmaps.com/api/detail/'
            api_args:
              - detail_type: zoning
              - sections: zoning
              - geometry: '{"x":${x}, "y":${y}}'
              - api_key: AC3208DDEFB2FD0AE5F26D573C27252F
            capture:
              - path: 'zoning.overlay[].code'
                field: hidden_zoning_overlays
                parse: stringify
              - path: 'zoning.base[0].code'
                field: hidden_base_zone
                parse: stringify
              - path: 'zoning.historic_district[].code'
                field: hidden_historic_district
                parse: stringify
              - path: 'zoning.national_register_district[].code'
                field: hidden_national_register_district
                parse: stringify
              - path: 'zoning.conservation_district[].code'
                field: hidden_conservation_district
                parse: stringify
              - path: historic_resource
                field: hidden_historic_resource
                parse: flatten
                omit_null_properties: true
          - api: 'https://www.portlandmaps.com/api/detail/'
            api_args:
              - detail_type: environmental-percent-slope
              - sections: general
              - geometry: '{"x":${x}, "y":${y}}'
              - api_key: AC3208DDEFB2FD0AE5F26D573C27252F
            capture:
              - path: general.percent_slope
                field: q4_project_deck_site_slope
      markup_01:
        '#type': webform_markup
        '#states':
          visible:
            ':input[name="q1_project_address[location_verification_status]"]':
              empty: true
        '#markup': '<p><strong>Find an address to begin using this guide.</strong> It must be in an area that''s managed by the <a href="https://www.portland.gov/ppd" target="_blank">Portland Permitting &amp; Development bureau</a>.</p>'
      container_hidden_property_details:
        '#type': container
        hidden_zoning_overlays:
          '#type': hidden
          '#title': 'Hidden Zoning Overlays'
        hidden_historic_district:
          '#type': hidden
          '#title': 'Hidden Historic District'
        hidden_national_register_district:
          '#type': hidden
          '#title': 'Hidden National Register District'
        hidden_conservation_district:
          '#type': hidden
          '#title': 'Hidden Conservation District'
        hidden_historic_resource:
          '#type': hidden
          '#title': 'Hidden Historic Resource'
        hidden_base_zone:
          '#type': textfield
          '#title': 'Hidden Base Zone'
        property_id:
          '#type': webform_computed_twig
          '#title': 'Property ID'
          '#title_display': inline
          '#wrapper_attributes':
            class:
              - d-none
          '#display_on': form
          '#template': |-
            {{ data.q1_project_address.location_taxlot_id
             }}
          '#whitespace': trim
          '#ajax': true
        q1_1_environmental_overlay_zone:
          '#type': webform_computed_twig
          '#title': 'Is the site in an environmental overlay zone?'
          '#title_display': inline
          '#wrapper_attributes':
            class:
              - d-none
          '#display_on': form
          '#mode': text
          '#template': |-
            {% set value = data.hidden_zoning_overlays %}
            {% if 'c' in value or 'p' in value %}Yes{% else %}No{% endif %}
          '#whitespace': trim
          '#ajax': true
        q1_2_greenway_overlay_zone:
          '#type': webform_computed_twig
          '#title': 'Is the site in a greenway overlay zone?'
          '#title_display': inline
          '#wrapper_attributes':
            class:
              - d-none
          '#display_on': form
          '#mode': text
          '#template': |-
            {% set value = data.hidden_zoning_overlays %}
            {% if 'g' in value  %}Yes{% else %}No{% endif %}
          '#whitespace': trim
          '#ajax': true
        q1_3_historic_landmark:
          '#type': webform_computed_twig
          '#title': 'Is the property a historic/conservation landmark or in a historic district?'
          '#title_display': inline
          '#wrapper_attributes':
            class:
              - d-none
          '#display_on': form
          '#mode': text
          '#template': '{% if data.hidden_historic_district != "" or data.hidden_national_register_district != "" or data.hidden_conservation_district != "" or data.hidden_historic_resource != "" %}Yes{% else %}No{% endif %}'
          '#whitespace': trim
          '#ajax': true
      computed_valid_zone:
        '#type': webform_computed_twig
        '#title': 'Is the zone valid?'
        '#title_display': none
        '#wrapper_attributes':
          class:
            - d-none
        '#mode': text
        '#template': "{% if data.hidden_base_zone in ['R10','R2.5','R20','R5','R7'] %}Yes{% elseif data.q1_project_address.location_verification_status == 'Verified' %}No{% endif %}"
        '#whitespace': trim
        '#ajax': true
      computed_invalid_zone_warning:
        '#type': webform_computed_twig
        '#title': 'Invalid Zone Warning'
        '#title_display': none
        '#wrapper_attributes':
          class:
            - mb-3
        '#display_on': form
        '#mode': html
        '#template': |-
          {% if data.computed_valid_zone == "No" %}
            <div class="mb-3">
            {{ data.warning_invalid_zone|raw }}
            </div>
          {% endif %}
        '#ajax': true
      computed_property_summary:
        '#type': webform_computed_twig
        '#title': 'Property Summary'
        '#title_display': invisible
        '#states':
          visible:
            ':input[name="q1_project_address[location_verification_status]"]':
              filled: true
        '#display_on': form
        '#mode': html
        '#template': |2-
                <table class="mb-5">

                  <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                    <th style="text-align: left;">{{ "Property ID:"|t }}</th>
                    <td><a href="https://portlandmaps.com/search/?query={{ data.q1_project_address.location_address }}">{{ data.property_id }} <em class="fa-solid fa-arrow-up-right-from-square"> </em></a></td>
                  </tr>

                  <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                    <th style="text-align: left;">{{ "Base zone"|t }}</th>
                    <td><a href="https://www.portlandmaps.com/bps/zoning/#/zones/base/{{ data.hidden_base_zone }}" target="_blank">{{ data.hidden_base_zone }} <em class="fa-solid fa-arrow-up-right-from-square"> </em></a></td>
                  </tr>

                  {% if data.q1_1_environmental_overlay_zone == "Yes" or data.q1_2_greenway_overlay_zone == "Yes" or data.q1_3_historic_landmark == "Yes" %}
                  <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                    <th style="text-align: left;">{{ "Zoning overlays"|t }}</th>
                    <td>
                    {% set overlays = [] %}
                    {% if data.q1_1_environmental_overlay_zone == "Yes" %}
                      {% set overlays = overlays|merge(['Environmental']) %}
                    {% endif %}
                    {% if data.q1_2_greenway_overlay_zone == "Yes" %}
                      {% set overlays = overlays|merge(['Greenway']) %}
                    {% endif %}
                    {% if data.q1_3_historic_landmark == "Yes" %}
                      {% set overlays = overlays|merge(['Historic']) %}
                    {% endif %}
                    {{ overlays|join(', ') }}
                    </td>
                  </tr>
                  {% endif %}

                  <tr>
                    <td colspan="2">
                      <p><em>{{ "Address and zoning data provided by"|t }} <a href="https://portlandmaps.com/search/?query={{ data.q1_project_address.location_address }}" target="_blank">PortlandMaps.com <em class="fa-solid fa-arrow-up-right-from-square"> </em></a></em></p>
                    </td>
                  </tr>
                </table>
        '#ajax': true
    section_project_details:
      '#type': webform_section
      '#title': 'Project Details'
      '#states':
        invisible:
          ':input[name="q1_project_address[location_verification_status]"]':
            empty: true
      '#attributes':
        class:
          - mb-10
      q2_who_will_be_doing_the_construction:
        '#type': radios
        '#title': 'Who will be doing the construction?'
        '#options':
          'The property owner': 'The property owner'
          'A contractor': 'A contractor'
        '#required': true
      q3_will_this_project_include_any_electrical_work:
        '#type': radios
        '#title': 'Will this project include any electrical work?'
        '#description': '<p>This includes adding, moving, or updating things like wiring, lighting, switches, or outlets.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q4_will_this_project_include_any_plumbing_work:
        '#type': radios
        '#title': 'Will this project include any plumbing work?'
        '#description': '<p>This includes adding, moving, or updating things like pipes, sinks, drains, or water lines.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q5_will_this_project_include_any_mechanical_work:
        '#type': radios
        '#title': 'Will this project include any mechanical work?'
        '#description': '<p>This includes HVAC work like adding, moving, or updating heating, cooling, or ventilation systems like ducts or fans.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q7_where_will_this_project_take_place:
        '#type': radios
        '#title': 'Where will this project take place?'
        '#options':
          'In the primary dwelling structure': 'In the primary dwelling structure'
          'In an accessory structure': 'In an accessory structure'
        '#required': true
      q8_will_this_project_add_new_plumbing_to_an_existing:
        '#type': radios
        '#title': 'Will this project add new plumbing to an existing detached structure?'
        '#description': '<p>This could include adding a sink to a detached garage, studio, or shed.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
        '#states':
          visible:
            ':input[name="q7_where_will_this_project_take_place"]':
              value: 'In an accessory structure'
      q9_will_this_project_include_any_changes_to_the_exterior:
        '#type': radios
        '#title': 'Will this project include any changes to the exterior of the property?'
        '#description': '<p>This includes things like new windows, doors, siding, or roof changes.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q10_will_the_sink_for_this_project_be_in_the_same_room:
        '#type': radios
        '#title': 'Will the sink for this project be in the same room as the toilet and shower/bath?'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q11_will_this_project_increase_the_number_of_fixtures:
        '#type': radios
        '#title': 'Will this project increase the number of fixtures on the property?'
        '#description': '<p>Fixtures include sinks, toilets, showers, spigots, and similar items.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q12_how_many_total_bathrooms_will_the_property_have:
        '#type': number
        '#title': 'How many total bathrooms will the property have?'
        '#description': '<p>Count both existing bathrooms and any new ones added in this project.</p>'
        '#description_display': before
        '#min': 1
      q13_will_this_project_include_any_structural_changes:
        '#type': radios
        '#title': 'Will this project include any structural changes or additions?'
        '#description': '<p>This includes changes to framing, beams, or load-bearing walls.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
    section_send_link:
      '#type': webform_section
      '#title': 'Send a link?'
      '#description': "<p>If you'd like us to send a link back to this project, please provide an email address. It will only be used to send this one email and won't be used for any other purpose.</p>"
      '#states':
        visible:
          ':input[name="q1_project_address[location_verification_status]"]':
            filled: true
      '#attributes':
        class:
          - mb-10
      email_address_optional:
        '#type': textfield
        '#title': 'Email address (optional)'
    section_disclaimer:
      '#type': webform_section
      '#title': Disclaimer
      '#states':
        visible:
          ':input[name="q1_project_address[location_verification_status]"]':
            filled: true
      computed_disclaimer:
        '#type': webform_computed_twig
        '#title': 'Computed Disclaimer'
        '#title_display': none
        '#template': '{{ data.fetch_disclaimer_text|raw }}'
      disclaimer_confirmation:
        '#type': checkbox
        '#title': 'I understand and acknowledge that this tool is for informational purposes only.'
        '#required': true
        '#required_error': 'You must indicate your acknowledgement by checking the box'
  container_welcome_back_results:
    '#type': container
    '#states':
      visible:
        - ':input[name="returning_user"]':
            filled: true
        - or
        - ':input[name="test"]':
            filled: true
    return_link:
      '#type': webform_computed_twig
      '#title': 'Return Link'
      '#wrapper_attributes':
        class:
          - d-none
      '#display_on': form
      '#template': "https://{{ webform_token('[site:url-brief]', webform_submission, [], options) }}{{ webform_token('[current-page:url:path]', webform_submission, [], options) }}?returning_user=1&q1_project_address[location_address]={{ data.q1_project_address.location_address }}&q1_project_address[location_city]={{ data.q1_project_address.location_city }}&q1_project_address[location_state]={{ data.q1_project_address.location_state }}&q1_project_address[location_zip]={{ data.q1_project_address.location_zip }}&q1_1_environmental_overlay_zone={{ data.q1_1_environmental_overlay_zone }}&q1_2_greenway_overlay_zone={{ data.q1_2_greenway_overlay_zone }}&q1_3_historic_landmark={{ data.q1_3_historic_landmark }}&q2_who_will_be_doing_the_construction={{ data.q2_who_will_be_doing_the_construction }}&q3_will_this_project_include_any_electrical_work={{ data.q3_will_this_project_include_any_electrical_work }}&q4_will_this_project_include_any_plumbing_work={{ data.q4_will_this_project_include_any_plumbing_work }}&q5_will_this_project_include_any_mechanical_work={{ data.q5_will_this_project_include_any_mechanical_work }}&q7_where_will_this_project_take_place={{ data.q7_where_will_this_project_take_place }}&q8_will_this_project_add_new_plumbing_to_an_existing={{ data.q8_will_this_project_add_new_plumbing_to_an_existing }}&q9_will_this_project_include_any_changes_to_the_exterior={{ data.q9_will_this_project_include_any_changes_to_the_exterior }}&q10_will_the_sink_for_this_project_be_in_the_same_room={{ data.q10_will_the_sink_for_this_project_be_in_the_same_room }}&q11_will_this_project_increase_the_number_of_fixtures={{ data.q11_will_this_project_increase_the_number_of_fixtures }}&q12_how_many_total_bathrooms_will_the_property_have={{ data.q12_how_many_total_bathrooms_will_the_property_have }}&q13_will_this_project_include_any_structural_changes={{ data.q13_will_this_project_include_any_structural_changes }}&email_address_optional={{ data.email_address_optional }}&disclaimer_confirmation={{ data.disclaimer_confirmation }}"
      '#ajax': true
    computed_permit_required:
      '#type': webform_computed_twig
      '#title': 'Computed Permit Required'
      '#display_on': none
      '#mode': text
      '#template': 'No'
      '#whitespace': trim
      '#ajax': true
    computed_requirements:
      '#type': webform_computed_twig
      '#title': 'Computed Requirements'
      '#title_display': none
      '#display_on': none
      '#mode': html
      '#template': |2-
            <!-- Building permit application --------------->
            {# alwyas required #}
            {{ data.fetch_card_building_permit_application|raw }}

            <!-- Detailed plans--------------->
            {# required if permit required, which is always #}
            {{ data.fetch_card_detailed_plans|raw }}
            
            <!-- Simple bathroom process --------------->
            {% if (data.q9_will_this_project_include_any_changes_to_the_exterior == "No" and data.q13_will_this_project_include_any_structural_changes == "No" and data.q12_how_many_total_bathrooms_will_the_property_have <= 3 and data.q7_where_will_this_project_take_place == "In the primary dwelling structure" and data.q10_will_the_sink_for_this_project_be_in_the_same_room == "Yes") or data.test is not empty %}
              {{ data.fetch_card_simple_bathroom_process|raw }}
            {% endif %}

            <!-- "Owner doing work" form --------------->
            {% if data.q2_who_will_be_doing_the_construction == "The property owner" or data.test is not empty %}
              {{ data.fetch_card_owner_doing_work_form|raw }}
            {% endif %}

            <!-- Electrical permit application --------------->
            {% if data.q3_will_this_project_include_any_electrical_work == "Yes" or data.test is not empty %}
              {{ data.fetch_card_electrical_permit_application|raw }}
            {% endif %}
            
            <!-- Plumbing permit application --------------->
            {% if data.q4_will_this_project_include_any_plumbing_work == "Yes" or data.test is not empty %}
              {{ data.fetch_card_plumbing_permit_application|raw }}
            {% endif %}
            
            <!-- Mechanical permit application --------------->
            {% if data.q5_will_this_project_include_any_mechanical_work == "Yes" or data.test is not empty %}
              {{ data.fetch_card_mechanical_permit_application|raw }}
            {% endif %}
            
            <!-- Water meter sizing --------------->
            {% if data.q8_will_this_project_add_new_plumbing_to_an_existing == "Yes" or data.q12_how_many_total_bathrooms_will_the_property_have > 4 or data.test is not empty %}
              {{ data.fetch_card_water_meter_sizing_worksheet|raw }}
            {% endif %}
            
            <!-- Residential SDC form --------------->
            {% if data.q11_will_this_project_increase_the_number_of_fixtures == "Yes" or data.test is not empty %}
              {{ data.fetch_card_residential_sdc_form|raw }}
            {% endif %}
    markup_02:
      '#type': webform_markup
      '#markup': "<h2>Your project guide</h2><p>We've created a guide to help you follow the City of Portland's building rules based on the details you provided about your project.</p>"
    computed_results:
      '#type': webform_computed_twig
      '#title': 'Computed Results'
      '#title_display': none
      '#display_on': form
      '#mode': html
      '#template': |+
        {% if data.test %}
        <div class="bg-info p-3 mb-5">
          NOTE: These results are being viewed in reviewer mode, with all possible options displayed for testing purposes. To exit reviewer mode, remove the parameter <strong>test=true</strong> from the URL.
        </div>
        {% endif %}

        <ol class="process-list mb-10">

        {% if ((data.q1_3_historic_landmark == "Yes" or data.q1_2_greenway_overlay_zone == "Yes" or data.q1_1_environmental_overlay_zone == "Yes") and data.q9_will_this_project_include_any_changes_to_the_exterior == "Yes") or data.computed_valid_zone == "No" or data.test == "true" %}

          <li>
            {{ data.fetch_card_zoning_and_land_use_15_min_appointment|raw }}

            <div class="position-relative mt-4">
              <div class="alert p-3">
                <p class="mb-2"><strong>{{ "We're suggesting this because..."|t }}</strong></p>
                <ul class="mb-0">
                  {% if data.q1_3_historic_landmark == "Yes" or data.test is not empty %}
                  <li>{{ "This address is in a Historic District."|t }}</li>
                  {% endif %}
                  {% if data.q1_1_environmental_overlay_zone == "Yes" or data.test is not empty %}
                  <li>{{ "This address is in an Environmental Zone."|t }}</li>
                  {% endif %}
                  {% if data.q1_2_greenway_overlay_zone == "Yes" or data.test is not empty %}
                  <li>{{ "This address is in a Greenway Zone."|t }}</li>
                  {% endif %}
                  {% if data.q1_3_historic_landmark == "Yes" or data.q1_2_greenway_overlay_zone == "Yes" or data.q1_1_environmental_overlay_zone == "Yes" or data.test is not empty %}
                  <li>{{ "You're making exterior changes to the property."|t }}</li>
                  {% endif %}
                  {% if data.computed_valid_zone == "No" or data.test == "true" %}
                  <li>{{ "The zoning for the address you entered may not allow this type of project. Please schedule an appointment to talk with our staff."|t }}</li>
                  {% endif %}
                </ul>
              </div>
            </div>

          </li>

        {% endif %}


          <li>
            {{ data.process_step_gather|raw }}
            {{ data.computed_requirements }}
          </li>

          <li>
            {{ data.process_step_apply|raw }}
          </li>

          <li>
            {{ data.process_step_respond|raw }}
          </li>

          <li>
            {{ data.process_step_start|raw }}
          </li>

          <li>
            {{ data.process_step_inspect|raw }}
          </li>

        </ol>

      '#whitespace': spaceless
      '#ajax': true
    computed_project_details:
      '#type': webform_computed_twig
      '#title': 'Computed Project Details'
      '#title_display': none
      '#wrapper_attributes':
        class:
          - d-none
      '#display_on': form
      '#mode': html
      '#template': |
        <table class="mb-5">

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Project address:"|t }}</th>
                  <td>{{ data.q1_project_address.location_address }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Property ID:"|t }}</th>
                  <td><a href="https://portlandmaps.com/search/?query={{ data.property_id }}" target="_blank">{{ data.property_id }} <em class="fa-solid fa-arrow-up-right-from-square"> </em></a></td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Base zone"|t }}</th>
                  <td><a href="https://www.portlandmaps.com/bps/zoning/#/zones/base/{{ data.hidden_base_zone }}" target="_blank">{{ data.hidden_base_zone }} <em class="fa-solid fa-arrow-up-right-from-square"> </em></a></td>
                </tr>

                {% if data.q1_1_environmental_overlay_zone == "Yes" or data.q1_2_greenway_overlay_zone == "Yes" or data.q1_3_historic_landmark == "Yes" %}
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Zoning overlays"|t }}</th>
                  <td>
                    {% set items = [] %}
                    {% if data.q1_1_environmental_overlay_zone == "Yes" %}
                      {% set items = items|merge(['Environmental']) %}
                    {% endif %}
                    {% if data.q1_2_greenway_overlay_zone == "Yes" %}
                      {% set items = items|merge(['Greenway']) %}
                    {% endif %}
                    {% if data.q1_3_historic_landmark == "Yes" %}
                      {% set items = items|merge(['Historic']) %}
                    {% endif %}
                    {{ items|join(', ') }}
                  </td>
                </tr>
                {% endif %}

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Who is doing the construction:"|t }}</th>
                  <td>{{ data.q2_who_will_be_doing_the_construction }}</td>
                </tr>


                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Includes electrical work:"|t }}</th>
                  <td>{{ data.q3_will_this_project_include_any_electrical_work }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Includes plumbing work:"|t }}</th>
                  <td>{{ data.q4_will_this_project_include_any_plumbing_work }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Includes mechanical work:"|t }}</th>
                  <td>{{ data.q5_will_this_project_include_any_mechanical_work }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Project location:"|t }}</th>
                  <td>{{ data.q7_where_will_this_project_take_place }}</td>
                </tr>

                {% if data.q7_where_will_this_project_take_place == "In an accessory dwelling unit" %}
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "New plumbing in detached structure:"|t }}</th>
                  <td>{{ data.q8_will_this_project_add_new_plumbing_to_an_existing }}</td>
                </tr>
                {% endif %}

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Changes to exterior:"|t }}</th>
                  <td>{{ data.q9_will_this_project_include_any_changes_to_the_exterior }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Sink in same room as toilet and shower/bath:"|t }}</th>
                  <td>{{ data.q10_will_the_sink_for_this_project_be_in_the_same_room }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Adds new plumbing fixtures:"|t }}</th>
                  <td>{{ data.q11_will_this_project_increase_the_number_of_fixtures }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Total number of bathrooms:"|t }}</th>
                  <td>{{ data.q12_how_many_total_bathrooms_will_the_property_have }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Includes structural changes:"|t }}</th>
                  <td>{{ data.q13_will_this_project_include_any_structural_changes }}</td>
                </tr>

                <tr>
                  <td colspan="2">
                    <p><em>Address and zoning data provided by <a href="https://portlandmaps.com/search/?query={{ data.q1_project_address.location_address }}" target="_blank">PortlandMaps.com <em class="fa-solid fa-arrow-up-right-from-square"> </em></a></em></p>
                  </td>
                </tr>

              </table>

              <a href="{{ data.return_link|replace({'returning_user=1&':''}) }}" class="btn btn-outline-primary ms-auto rounded rounded-1 border-2">{{ 'Edit details'|t }}</a>
              
      '#ajax': true
    computed_project_details_container:
      '#type': webform_computed_twig
      '#title': 'Computed Project Details Container'
      '#title_display': none
      '#display_on': form
      '#template': |
        <div class="accordion aria-accordion no-expand-all mb-5" id="acc-1-0">
          <h3 class="aria-accordion__heading accordion-item">
            <button
              class="accordion-button collapsed aria-accordion__trigger"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#acc-1-0-panel-1"
              aria-expanded="false"
              aria-controls="acc-1-0-panel-1"
              id="acc-1-0-panel-1-trigger">
              {{ "Your project details"|t }}
            </button>
          </h3>
          <div
            id="acc-1-0-panel-1"
            class="accordion-collapse collapse aria-accordion__panel aria-accordion__panel--transition"
            role="region"
            aria-labelledby="acc-1-0-panel-1-trigger"
            data-bs-parent="#acc-1-0">
            <div class="accordion-body">

              {{ data.computed_project_details }}

            </div>
          </div>
        </div>
      '#ajax': true
  actions:
    '#type': webform_actions
    '#title': 'Submit button(s)'
    '#states':
      invisible:
        - ':input[name="q1_project_address[location_verification_status]"]':
            empty: true
        - or
        - ':input[name="q1_project_address[location_verification_status]"]':
            empty: false
          ':input[name="edit_my_project[Edit my project]"]':
            unchecked: true
          ':input[name="returning_user"]':
            empty: false
css: ''
javascript: ''
settings:
  ajax: false
  ajax_scroll_top: form
  ajax_progress_type: ''
  ajax_effect: ''
  ajax_speed: null
  page: true
  page_submit_path: ''
  page_confirm_path: ''
  page_theme_name: ''
  form_title: source_entity_webform
  form_submit_once: false
  form_open_message: ''
  form_close_message: ''
  form_exception_message: ''
  form_previous_submissions: true
  form_confidential: false
  form_confidential_message: ''
  form_disable_remote_addr: false
  form_convert_anonymous: false
  form_prepopulate: true
  form_prepopulate_source_entity: false
  form_prepopulate_source_entity_required: false
  form_prepopulate_source_entity_type: ''
  form_unsaved: false
  form_disable_back: false
  form_submit_back: false
  form_disable_autocomplete: false
  form_novalidate: false
  form_disable_inline_errors: false
  form_required: false
  form_autofocus: false
  form_details_toggle: false
  form_reset: false
  form_access_denied: default
  form_access_denied_title: ''
  form_access_denied_message: ''
  form_access_denied_attributes: {  }
  form_file_limit: ''
  form_file_limit_message: ''
  form_attributes:
    class:
      - permit-guide
    id: residential-bathrooms-guide
  form_method: ''
  form_action: ''
  share: false
  share_node: false
  share_theme_name: ''
  share_title: true
  share_page_body_attributes: {  }
  submission_label: ''
  submission_exception_message: ''
  submission_locked_message: ''
  submission_log: false
  submission_excluded_elements: {  }
  submission_exclude_empty: false
  submission_exclude_empty_checkbox: false
  submission_views: {  }
  submission_views_replace: {  }
  submission_user_columns: {  }
  submission_user_duplicate: false
  submission_access_denied: default
  submission_access_denied_title: ''
  submission_access_denied_message: ''
  submission_access_denied_attributes: {  }
  previous_submission_message: ''
  previous_submissions_message: ''
  autofill: false
  autofill_message: ''
  autofill_excluded_elements: {  }
  wizard_progress_bar: true
  wizard_progress_pages: false
  wizard_progress_percentage: false
  wizard_progress_link: false
  wizard_progress_states: false
  wizard_start_label: ''
  wizard_preview_link: false
  wizard_confirmation: true
  wizard_confirmation_label: ''
  wizard_auto_forward: true
  wizard_auto_forward_hide_next_button: false
  wizard_keyboard: true
  wizard_track: ''
  wizard_prev_button_label: ''
  wizard_next_button_label: ''
  wizard_toggle: false
  wizard_toggle_show_label: ''
  wizard_toggle_hide_label: ''
  wizard_page_type: container
  wizard_page_title_tag: h2
  preview: 0
  preview_label: ''
  preview_title: ''
  preview_message: ''
  preview_attributes: {  }
  preview_excluded_elements: {  }
  preview_exclude_empty: true
  preview_exclude_empty_checkbox: false
  draft: none
  draft_multiple: false
  draft_auto_save: false
  draft_saved_message: ''
  draft_loaded_message: ''
  draft_pending_single_message: ''
  draft_pending_multiple_message: ''
  confirmation_type: inline
  confirmation_url: ''
  confirmation_title: ''
  confirmation_message: '<h2>Your project guide</h2><p>We''ve created a guide to help you follow the City of Portland''s building rules based on the details you provided about your project.</p><div class="mb-10">[webform_submission:values:computed_results:html]</div><h3>Your project details</h3><div>[webform_submission:values:computed_project_details:html]</div>'
  confirmation_attributes: {  }
  confirmation_back: false
  confirmation_back_label: ''
  confirmation_back_attributes: {  }
  confirmation_exclude_query: false
  confirmation_exclude_token: false
  confirmation_update: false
  limit_total: null
  limit_total_interval: null
  limit_total_message: ''
  limit_total_unique: false
  limit_user: null
  limit_user_interval: null
  limit_user_message: ''
  limit_user_unique: false
  entity_limit_total: null
  entity_limit_total_interval: null
  entity_limit_user: null
  entity_limit_user_interval: null
  purge: none
  purge_days: null
  results_disabled: true
  results_disabled_ignore: false
  results_customize: false
  token_view: false
  token_update: false
  token_delete: false
  serial_disabled: false
access:
  create:
    roles:
      - anonymous
      - authenticated
    users: {  }
    permissions: {  }
  view_any:
    roles: {  }
    users: {  }
    permissions: {  }
  update_any:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_any:
    roles: {  }
    users: {  }
    permissions: {  }
  purge_any:
    roles: {  }
    users: {  }
    permissions: {  }
  view_own:
    roles: {  }
    users: {  }
    permissions: {  }
  update_own:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_own:
    roles: {  }
    users: {  }
    permissions: {  }
  administer:
    roles: {  }
    users: {  }
    permissions: {  }
  test:
    roles: {  }
    users: {  }
    permissions: {  }
  configuration:
    roles: {  }
    users: {  }
    permissions: {  }
handlers:
  email:
    id: email
    handler_id: email
    label: 'Send confirmation and return link'
    notes: ''
    status: true
    conditions: {  }
    weight: 0
    settings:
      states:
        - completed
      to_mail: '[webform_submission:values:email_address_optional:raw]'
      to_options: {  }
      bcc_mail: ''
      bcc_options: {  }
      cc_mail: ''
      cc_options: {  }
      from_mail: ppd@portlandoregon.gov
      from_options: {  }
      from_name: _default
      reply_to: ''
      return_path: ''
      sender_mail: ''
      sender_name: ''
      subject: 'Your residential bathroom permit guide'
      body: '<p><span data-teams="true">Thanks for telling us about your project on Portland.gov. We used the information you provided to show you what you''ll need to apply for a permit. Those results are included below.</span></p><p>You can return to update your project and review the requirements anytime by using this link: <a href="[webform_submission:values:return_link]"><strong>Return to your project details</strong></a></p><p>For more on completing your permitting project, <a href="https://www.portland.gov/ppd/residential-permitting/bathrooms">visit our pages on residential bathrooms</a>.</p><p>Have questions? Just reply to this email. We''re happy to help.</p><p>Thank you,</p><p>Portland Permitting &amp; Development (PPD)<br>City of Portland<br><a href="http://portland.gov/ppd">Portland.gov/ppd</a></p><hr style="margin:30px 0;"><h2>Your project guide</h2><p>We''ve created a guide to help you follow the City of Portland''s building rules based on the details you provided about your project.</p><div>[webform_submission:values:computed_results:html]</div><hr style="margin:30px 0;"><h2>Project details</h2><div>[webform_submission:values:computed_project_details:html]&nbsp;</div><hr><h2>Disclaimer</h2><p>[webform_submission:values:disclaimer_permit_guide_email:raw]</p>'
      excluded_elements: {  }
      ignore_access: false
      exclude_empty: true
      exclude_empty_checkbox: false
      exclude_attachments: false
      html: true
      attachments: false
      twig: false
      theme_name: ''
      langcode: ''
      parameters: {  }
      debug: false
variants: {  }
