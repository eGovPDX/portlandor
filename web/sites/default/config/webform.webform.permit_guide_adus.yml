uuid: ba78bdc6-cc2e-45f0-b791-7a39959b8692
langcode: en
status: open
dependencies:
  module:
    - portland
third_party_settings:
  portland:
    disable_demographic_form_prompt: 0
    exclude_from_json: {  }
weight: 0
open: null
close: null
uid: 60
template: false
archive: false
id: permit_guide_adus
title: 'Permit Guide - ADUs'
description: ''
categories:
  - 'Permit Guide'
elements: |-
  container_guide_cards:
    '#type': container
    fetch_card_building_permit_application:
      '#type': portland_node_fetcher
      '#title': 'Card - Building Permit Application'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-general-building-permit-application
      '#render_inline': 0
    fetch_card_detailed_plans:
      '#type': portland_node_fetcher
      '#title': 'Card - Detailed Plans'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-bathrooms-detailed-plans
      '#render_inline': 0
    fetch_card_zoning_and_land_use_15_min_appointment:
      '#type': portland_node_fetcher
      '#title': 'Card - Zoning and Land Use 15 Min Appointment'
      '#node_alias_path': /ppd/content-component/card-zoning-and-land-use-15-minute-appointment
      '#render_inline': 0
    fetch_card_owner_doing_work_form:
      '#type': portland_node_fetcher
      '#title': 'Card - Owner Doing Work Form'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-general-owner-doing-work-form
      '#render_inline': 0
    fetch_card_electrical_permit_application:
      '#type': portland_node_fetcher
      '#title': 'Card - Electrical Permit Application'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-general-electrical-permit-application
      '#render_inline': 0
    fetch_card_plumbing_permit_application:
      '#type': portland_node_fetcher
      '#title': 'Card - Plumbing Permit Application'
      '#help': '<p><strong>Content missing: Plumbing Permit Application</strong></p>'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-general-plumbing-permit-application
      '#render_inline': 0
    fetch_card_mechanical_permit_application:
      '#type': portland_node_fetcher
      '#title': 'Card - Mechanical Permit Application'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-general-mechanical-permit-application
      '#render_inline': 0
    fetch_card_simple_site_erosion_control:
      '#type': portland_node_fetcher
      '#title': 'Card - Simple Site Erosion Control'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-simple-site-erosion-control
      '#render_inline': 0
    fetch_card_erosion_control_plan:
      '#type': portland_node_fetcher
      '#title': 'Card - Erosion Control Plan'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-erosion-control-plan
      '#render_inline': 0
    fetch_card_water_meter_sizing_worksheet:
      '#type': portland_node_fetcher
      '#title': 'Card - Residential Meter Request Form'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-residential-meter-request-form
      '#render_inline': 0
    fetch_card_major_residential_alteration_additions_requirements:
      '#type': portland_node_fetcher
      '#title': 'Card - Major Residential Alteration/Additions Requirements'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-adus-major-residential-alteration
      '#render_inline': 0
    fetch_card_street_tree_pruning_requirements:
      '#type': portland_node_fetcher
      '#title': 'Card - Street Tree Pruning Requirements'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-street-tree-pruning-requirements
      '#render_inline': 0
    fetch_card_residential_sdc_form:
      '#type': portland_node_fetcher
      '#title': 'Card - Residential SDC Form'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-general-residential-sdc-form
      '#render_inline': 0
    fetch_card_adu_sdc_waiver:
      '#type': portland_node_fetcher
      '#title': 'Card - ADU SDC Waiver'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-adu-sdc-waiver
      '#render_inline': 0
    fetch_card_fire_department_requirements:
      '#type': portland_node_fetcher
      '#title': 'Card - Fire Department Requirements'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-fire-department-requirements
      '#render_inline': 0
    fetch_card_fire_safety_15_minute_appointment:
      '#type': portland_node_fetcher
      '#title': 'Card - Fire Safety 15 Minute Appointment'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-fire-safety-15-minute-appointment
      '#render_inline': 0
    fetch_card_adu_addresses:
      '#type': portland_node_fetcher
      '#title': 'Card - ADU Addresses'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-adus-adu-addresses-info
      '#render_inline': 0
    fetch_card_stormwater_mitigation_plan:
      '#type': portland_node_fetcher
      '#title': 'Card - Stormwater Mitigation Plan'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-stormwater-mitigation-plan
      '#render_inline': 0
    card_elevation_certificate:
      '#type': portland_node_fetcher
      '#title': 'Card - Elevation Certificate'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-elevation-certificate
      '#render_inline': 0
    fetch_card_geotechnical_report:
      '#type': portland_node_fetcher
      '#title': 'Card - Geotechnical Report'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-geotechnical-report
      '#render_inline': 0
    fetch_card_site_development_15_minute_appointment:
      '#type': portland_node_fetcher
      '#title': 'Card - Site Development 15 Minute Appointment'
      '#node_alias_path': /ppd/residential-permitting/content-component/card-residential-site-development-15-minute
      '#render_inline': 0
    process_step_gather:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Gather Requirements'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-general-gather-requirements
      '#render_inline': 0
    process_step_apply:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Prepare Application'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-residential-adus-prepare-your-application
      '#render_inline': 0
    process_step_respond:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Apply, Pay, Respond to Feedback'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-residential-adus-apply-pay-and-respond
      '#render_inline': 0
    process_step_start:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Start'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-bathrooms-start-building
      '#render_inline': 0
    process_step_inspect:
      '#type': portland_node_fetcher
      '#title': 'Process Step - Inspect'
      '#node_alias_path': /ppd/residential-permitting/content-component/process-step-bathrooms-schedule-inspections
      '#render_inline': 0
    warning_invalid_zone:
      '#type': portland_node_fetcher
      '#title': 'Warning - Invalid Zone'
      '#node_alias_path': /ppd/content-component/warning-incorrect-zone
      '#render_inline': 0
    fetch_disclaimer_text:
      '#type': portland_node_fetcher
      '#title': 'Disclaimer - Permit Guide'
      '#title_display': none
      '#node_alias_path': /ppd/content-component/disclaimer-permit-guide
      '#render_inline': 0
    disclaimer_permit_guide_email:
      '#type': portland_node_fetcher
      '#title': 'Disclaimer - Permit Guide - Email'
      '#title_display': none
      '#node_alias_path': /ppd/content-component/disclaimer-permit-guide-email
      '#render_inline': 0
  test:
    '#type': hidden
    '#title': 'Test mode'
  returning_user:
    '#type': hidden
    '#title': 'Returning User?'
  ajax_indicator:
    '#type': portland_ajax_indicator
    '#title': 'Ajax Indicator'
  container_project_details:
    '#type': container
    '#states':
      invisible:
        ':input[name="returning_user"]':
          filled: true
        ':input[name="edit_my_project[Edit my project]"]':
          unchecked: true
    section_location:
      '#type': webform_section
      '#title': 'Project Details'
      '#attributes':
        class:
          - mb-10
      q0_project_address:
        '#type': portland_address_verifier
        '#title': Address
        '#location_address__required': true
        '#location_city__required': true
        '#location_state__required': true
        '#location_zip__required': true
        '#require_portland_city_limits': 1
        '#not_verified_remedy': 'A verified address is required. Please try again.'
        '#lookup_taxlot': 1
        '#secondary_queries':
          - api: 'https://www.portlandmaps.com/api/detail/'
            api_args:
              - detail_type: zoning
              - sections: zoning
              - geometry: '{"x":${x}, "y":${y}}'
              - api_key: AC3208DDEFB2FD0AE5F26D573C27252F
            capture:
              - path: 'zoning.overlay[].code'
                field: hidden_zoning_overlays
                parse: stringify
              - path: 'zoning.base[0].code'
                field: hidden_base_zone
                parse: stringify
              - path: 'zoning.historic_district[].code'
                field: hidden_historic_district
                parse: stringify
              - path: 'zoning.national_register_district[].code'
                field: hidden_national_register_district
                parse: stringify
              - path: 'zoning.conservation_district[].code'
                field: hidden_conservation_district
                parse: stringify
              - path: historic_resource
                field: hidden_historic_resource
                parse: flatten
                omit_null_properties: true
          - api: 'https://www.portlandmaps.com/api/detail/'
            api_args:
              - detail_type: environmental-percent-slope
              - sections: general
              - geometry: '{"x":${x}, "y":${y}}'
              - api_key: AC3208DDEFB2FD0AE5F26D573C27252F
            capture:
              - path: general.percent_slope
                field: hidden_pmapi_site_slope
          - api: 'https://www.portlandmaps.com/api/detail/'
            api_args:
              - detail_type: hazard-flood
              - sections: general
              - detail_id: taxlotId
              - api_key: AC3208DDEFB2FD0AE5F26D573C27252F
            capture:
              - path: general.1996_flood_inundation_area
                field: hidden_1996_flood_inundation_area
              - path: general.fema_special_flood_hazard_area
                field: hidden_fema_special_flood_hazard_area
          - api: 'https://www.portlandmaps.com/api/detail/'
            api_args:
              - detail_type: hazard-landslide
              - sections: general
              - detail_id: taxlotId
              - api_key: AC3208DDEFB2FD0AE5F26D573C27252F
            capture:
              - path: general.title_33_potential_landslide_hazard_area
                field: hidden_title_33_potential_landslide_hazard_area
          - api: 'https://www.portlandmaps.com/api/detail/'
            api_args:
              - detail_type: hazard-wild-lands-fire
              - sections: general
              - detail_id: taxlotId
              - api_key: AC3208DDEFB2FD0AE5F26D573C27252F
            capture:
              - path: general.wild_lands_fire
                field: hidden_wild_lands_fire
      hidden_zoning_overlays:
        '#type': hidden
        '#title': 'Hidden Zoning Overlays'
      hidden_historic_district:
        '#type': hidden
        '#title': 'Hidden Historic District'
      hidden_national_register_district:
        '#type': hidden
        '#title': 'Hidden National Register District'
      hidden_conservation_district:
        '#type': hidden
        '#title': 'Hidden Conservation District'
      hidden_historic_resource:
        '#type': hidden
        '#title': 'Hidden Historic Resource'
      hidden_base_zone:
        '#type': hidden
        '#title': 'Hidden Base Zone'
      hidden_pmapi_site_slope:
        '#type': hidden
        '#title': 'Hidden PM Site Slope'
      hidden_1996_flood_inundation_area:
        '#type': hidden
        '#title': 'Hidden 1996 Flood Inundation Area'
      hidden_fema_special_flood_hazard_area:
        '#type': hidden
        '#title': 'Hidden FEMA Special Flood Hazard Area'
      hidden_title_33_potential_landslide_hazard_area:
        '#type': hidden
        '#title': 'Hidden Title 33 Potential Landslide Hazard Area'
      hidden_wild_lands_fire:
        '#type': hidden
        '#title': 'Hidden Wild Lands Fire'
      markup_01:
        '#type': webform_markup
        '#states':
          visible:
            ':input[name="q0_project_address[location_verification_status]"]':
              empty: true
        '#markup': '<p><strong>Please enter and verify a property address in Portland to begin.</strong></p>'
      computed_valid_zone:
        '#type': webform_computed_twig
        '#title': 'Is the zone valid?'
        '#title_display': before
        '#wrapper_attributes':
          class:
            - d-none
        '#mode': text
        '#template': "{% if data.hidden_base_zone in ['R10','R2.5','R20','R5','R7'] %}Yes{% elseif data.q0_project_address.location_verification_status == 'Verified' %}No{% endif %}"
        '#whitespace': trim
        '#ajax': true
      computed_invalid_zone_warning:
        '#type': webform_computed_twig
        '#title': 'Invalid Zone Warning'
        '#title_display': none
        '#display_on': form
        '#mode': html
        '#template': |-
          {% if data.computed_valid_zone == "No" %}
            <div class="mb-3">
            {{ data.warning_invalid_zone|raw }}
            </div>
          {% endif %}
        '#ajax': true
    section_property_details:
      '#type': webform_section
      '#title': 'Property Details'
      '#description': '<p><em>Information provided by </em><a href="https://portlandmaps.com" target="_blank"><em>PortlandMaps</em></a><em>.</em></p>'
      '#attributes':
        class:
          - mb-10
          - d-none
      property_id:
        '#type': webform_computed_twig
        '#title': 'Property ID'
        '#title_display': inline
        '#display_on': form
        '#template': |-
          {{ data.q1_project_address.location_taxlot_id
           }}
        '#whitespace': trim
        '#ajax': true
      q0_1_environmental_overlay_zone:
        '#type': webform_computed_twig
        '#title': 'Is the site in an environmental overlay zone?'
        '#title_display': inline
        '#display_on': form
        '#mode': text
        '#template': |-
          {% set value = data.hidden_zoning_overlays %}
          {% if 'c' in value or 'p' in value %}Yes{% else %}No{% endif %}
        '#whitespace': trim
        '#ajax': true
      q0_2_greenway_overlay_zone:
        '#type': webform_computed_twig
        '#title': 'Is the site in a greenway overlay zone?'
        '#title_display': inline
        '#display_on': form
        '#mode': text
        '#template': |-
          {% set value = data.hidden_zoning_overlays %}
          {% if 'g' in value  %}Yes{% else %}No{% endif %}
        '#whitespace': trim
        '#ajax': true
      q0_3_historic_landmark:
        '#type': webform_computed_twig
        '#title': 'Is the property a historic/conservation landmark or in a historic district?'
        '#title_display': inline
        '#display_on': form
        '#mode': text
        '#template': '{% if data.hidden_historic_district != "" or data.hidden_national_register_district != "" or data.hidden_conservation_district != "" or data.hidden_historic_resource != "" %}Yes{% else %}No{% endif %}'
        '#whitespace': trim
        '#ajax': true
    section_project_details:
      '#type': webform_section
      '#title': 'Project Details'
      '#title_display': invisible
      '#states':
        invisible:
          ':input[name="q0_project_address[location_verification_status]"]':
            empty: true
      '#attributes':
        class:
          - mb-10
      q1_who_will_be_doing_the_construction:
        '#type': radios
        '#title': 'Who will be doing the construction?'
        '#options':
          'The property owner': 'The property owner'
          'A contractor': 'A contractor'
        '#required': true
      q2_will_this_project_include_any_electrical_work:
        '#type': radios
        '#title': 'Will this project include any electrical work?'
        '#description': '<p>This includes adding, moving, or updating things like wiring, lighting, switches, or outlets.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q3_will_this_project_include_any_plumbing_work:
        '#type': radios
        '#title': 'Will this project include any plumbing work?'
        '#description': '<p>This includes adding, moving, or updating things like pipes, sinks, drains, or water lines.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q4_will_this_project_include_any_mechanical_work:
        '#type': radios
        '#title': 'Will this project include any mechanical work?'
        '#description': '<p>This includes HVAC work like adding, moving, or updating heating, cooling, or ventilation systems like ducts or fans.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q5_project_disturb_ground:
        '#type': radios
        '#title': 'Will your project temporarily disturb more than 500 square feet of the ground?'
        '#options': yes_no
        '#required': true
      computed_slope_message:
        '#type': webform_computed_twig
        '#title': 'Slope message'
        '#title_display': none
        '#wrapper_attributes':
          class:
            - mb-0
        '#template': |
          <label for="edit-q6-project-site-slope" class="js-form-required form-required">{{ 'What is the slope of the worksite?'|t }}</label>
          <div id="edit-q6-project-site-slope--description" class="webform-element-description">
          {{ 'Using data from'|t }} <a href="https://www.portlandmaps.com/search/?query={{ data.q1_project_address.location_address }}" target="_blank">Portland Maps</a>, {{ 'we\'ve determined that the average slope of your property is'|t }} {{ data.hidden_pmapi_site_slope }}%. {{ 'If the slope of the worksite is more or less than that, please enter the new number as a percentage.'|t }} <a href="/ppd/glossary-term/slope" target="_blank">{{ 'Learn more about slope'|t }}</a>.
          </div>
        '#ajax': true
      q6_project_site_slope:
        '#type': number
        '#title': 'What is the slope of the worksite?'
        '#title_display': none
        '#description_display': invisible
        '#field_suffix': '%'
        '#required': true
        '#wrapper_attributes':
          class:
            - mt-3
      q7_project_deck_near_waterbody:
        '#type': radios
        '#title': 'Is there a wetland or body of water near the worksite?'
        '#options': yes_no
        '#required': true
      q8_project_waterbody_distance:
        '#type': number
        '#title': 'How far away is the wetland or body of water from the worksite?'
        '#description': '<p>Enter the distance in feet.</p>'
        '#description_display': before
        '#field_suffix': feet
        '#required': true
        '#states':
          visible:
            ':input[name="q7_project_deck_near_waterbody"]':
              value: 'Yes'
      q9_add_more_than_500_feet_indoor_space:
        '#type': radios
        '#title': 'Does this project add more than 500 square feet of indoor space to an existing building?'
        '#options': yes_no
        '#required': true
      q10_remove_exterior_walls:
        '#type': radios
        '#title': 'Does this project remove more than 50% of exterior walls to an existing structure?'
        '#options': yes_no
        '#required': true
      q11_sdc_waiver_no_short_term_rental:
        '#type': radios
        '#title': 'Do you want to skip city development fees by agreeing not to use the home as a short-term rental (under 30 days) for 10 years?'
        '#options': yes_no
        '#required': true
      q12_project_large_impervious_surface:
        '#type': radios
        '#title': 'Will the project add more than 1,000 square feet of impervious surface?'
        '#description': '<p>Impervious surfaces are things like concrete, asphalt, or decks that stop water from soaking into the ground. We use this to understand how your project affects rainwater drainage. This includes the footprint of the ADU and any driveways or decking.</p>'
        '#description_display': before
        '#options': yes_no
        '#required': true
      q13_tree_pruning_in_row:
        '#type': radios
        '#title': 'Do you need to prune any trees (branch or root) in the right-of-way?'
        '#options': yes_no
        '#required': true
    section_send_link:
      '#type': webform_section
      '#title': 'Send a link?'
      '#description': "<p>If you'd like us to send a link back to this project, please provide an email address. It will only be used to send this one email and won't be used for any other purpose.</p>"
      '#states':
        invisible:
          ':input[name="q0_project_address[location_verification_status]"]':
            empty: true
      '#attributes':
        class:
          - mb-10
      email_address_optional:
        '#type': textfield
        '#title': 'Email address (optional)'
    section_disclaimer:
      '#type': webform_section
      '#title': Disclaimer
      '#states':
        visible:
          ':input[name="q0_project_address[location_verification_status]"]':
            value: Verified
      computed_disclaimer:
        '#type': webform_computed_twig
        '#title': 'Computed Disclaimer'
        '#title_display': none
        '#template': '{{ data.fetch_disclaimer_text|raw }}'
      disclaimer_confirmation:
        '#type': checkbox
        '#title': 'I understand and acknowledge that this tool is for informational purposes only.'
        '#required': true
        '#required_error': 'You must indicate your acknowledgement by checking the box'
  container_welcome_back_results:
    '#type': container
    '#states':
      visible:
        - ':input[name="returning_user"]':
            filled: true
        - or
        - ':input[name="test"]':
            filled: true
    return_link:
      '#type': webform_computed_twig
      '#title': 'Return Link'
      '#wrapper_attributes':
        class:
          - d-none
      '#display_on': form
      '#template': |
        https://{{ webform_token('[site:url-brief]', webform_submission, [], options) }}{{ webform_token('[current-page:url:path]', webform_submission, [], options) }}?returning_user=1&q0_project_address[location_address]={{ data.q0_project_address.location_address }}&q0_project_address[location_city]={{ data.q0_project_address.location_city }}&q0_project_address[location_state]={{ data.q0_project_address.location_state }}&q0_project_address[location_zip]={{ data.q0_project_address.location_zip }}&q1_who_will_be_doing_the_construction={{ data.q1_who_will_be_doing_the_construction }}&q2_will_this_project_include_any_electrical_work={{ data.q2_will_this_project_include_any_electrical_work }}&q3_will_this_project_include_any_plumbing_work={{ data.q3_will_this_project_include_any_plumbing_work }}&q4_will_this_project_include_any_mechanical_work={{ data.q4_will_this_project_include_any_mechanical_work }}&q5_project_disturb_ground={{ data.q5_project_disturb_ground }}&q6_project_site_slope={{ data.q6_project_site_slope }}&q7_project_deck_near_waterbody={{ data.q7_project_deck_near_waterbody }}&q8_project_waterbody_distance={{ data.q8_project_waterbody_distance }}&q9_add_more_than_500_feet_indoor_space={{ data.q9_add_more_than_500_feet_indoor_space }}&q10_remove_exterior_walls={{ data.q10_remove_exterior_walls }}&q11_sdc_waiver_no_short_term_rental={{ data.q11_sdc_waiver_no_short_term_rental }}&q12_project_large_impervious_surface={{ data.q12_project_large_impervious_surface }}&q13_tree_pruning_in_row={{ data.q13_tree_pruning_in_row }}&email_address_optional={{ data.email_address_optional }}&disclaimer_confirmation={{ data.disclaimer_confirmation }}
      '#whitespace': trim
      '#ajax': true
    computed_permit_required:
      '#type': webform_computed_twig
      '#title': 'Computed Permit Required'
      '#display_on': none
      '#mode': text
      '#template': 'Yes'
      '#whitespace': trim
    computed_requirements:
      '#type': webform_computed_twig
      '#title': 'Computed Requirements'
      '#title_display': none
      '#display_on': none
      '#mode': html
      '#template': |2
            <!-- Site Development (15-minute appointment) --------------->
            {% set elevation_cert_required = data.hidden_fema_special_flood_hazard_area == "true" or data.hidden_1996_flood_inundation_area == "true" %}
            {% set georeport_required = data.hidden_title_33_potential_landslide_hazard_area == "true" or data.q6_project_site_slope > 20 %}
            
            {% if elevation_cert_required or georeport_required or data.test is not empty %}
              {{ data.fetch_card_site_development_15_minute_appointment|raw }}
              
            {% endif %}
            
            <!-- Fire Safety (15-minute appointment) --------------->
            {% if data.hidden_wild_lands_fire == "true" or data.test is not empty %}
              {{ data.fetch_card_fire_safety_15_minute_appointment|raw }}
            {% endif %}
            
            <!-- Building permit application --------------->
            {# alwyas required #}
            {{ data.fetch_card_building_permit_application|raw }}

            <!-- Detailed plans--------------->
            {# required if permit required, which is always #}
            {{ data.fetch_card_detailed_plans|raw }}
            
            <!-- "Owner doing work" form --------------->
            {% if data.q1_who_will_be_doing_the_construction == "The property owner" or data.test is not empty %}
              {{ data.fetch_card_owner_doing_work_form|raw }}
            {% endif %}

            <!-- Electrical permit application --------------->
            {% if data.q2_will_this_project_include_any_electrical_work == "Yes" or data.test is not empty %}
              {{ data.fetch_card_electrical_permit_application|raw }}
            {% endif %}
            
            <!-- Plumbing permit application --------------->
            {% if data.q3_will_this_project_include_any_plumbing_work == "Yes" or data.test is not empty %}
              {{ data.fetch_card_plumbing_permit_application|raw }}
            {% endif %}
            
            <!-- Mechanical permit application --------------->
            {% if data.q4_will_this_project_include_any_mechanical_work == "Yes" or data.test is not empty %}
              {{ data.fetch_card_mechanical_permit_application|raw }}
            {% endif %}
            
            <!-- Simple site erosion control --------------->
            {% if data.q5_project_disturb_ground == "No" and data.q6_project_site_slope < 10 and data.q0_1_environmental_overlay_zone == "No" and data.q0_2_greenway_overlay_zone == "No" and data.q0_3_historic_landmark == "No" and (data.q7_project_deck_near_waterbody == "No" or data.q8_project_waterbody_distance > 50) %}
              {{ data.fetch_card_simple_site_erosion_control|raw }}
              {% if data.test is not empty %}
                {{ data.fetch_card_simple_site_erosion_control|raw }}
              {% endif %}
            {% else %}
              {{ data.fetch_card_erosion_control_plan|raw }}
            {% endif %}

            <!-- Residential meter request from --------------->
            {% if data.computed_permit_required == "Yes" or data.test is not empty %}
              {{ data.fetch_card_water_meter_sizing_worksheet|raw }}
            {% endif %}
            
            <!-- Major residential alteration/additions requirements --------------->
            {% if data.q9_add_more_than_500_feet_indoor_space == "Yes" or data.q10_remove_exterior_walls == "Yes" or data.test is not empty %}
              {{ data.fetch_card_major_residential_alteration_additions_requirements|raw }}
            {% endif %}
            
            <!-- Street tree pruning requirements --------------->
            {% if data.q13_tree_pruning_in_row == "Yes" or data.test is not empty %}
              {{ data.fetch_card_street_tree_pruning_requirements|raw }}
            {% endif %}
            
            <!-- Residential SDC form --------------->
            {# always required #}
            {{ data.fetch_card_residential_sdc_form|raw }}
            
            <!-- ADU system development charge (SDC) waiver --------------->
            {% if data.q11_sdc_waiver_no_short_term_rental == "Yes" or data.test is not empty %}
              {{ data.fetch_card_adu_sdc_waiver|raw }}
            {% endif %}
            
            <!-- Fire department requirements --------------->
            {# always required #}
            {{ data.fetch_card_fire_department_requirements|raw }}
            
            <!-- ADU addresses --------------->
            {# always required #}
            {{ data.fetch_card_adu_addresses|raw }}
            
            <!-- Stormwater mitigation plan --------------->
            {% if data.q12_project_large_impervious_surface == "Yes" or data.test is not empty %}
              {{ data.fetch_card_stormwater_mitigation_plan|raw }}
            {% endif %}
            
            <!-- Elevation certificate --------------->
            {% if data.hidden_1996_flood_inundation_area == "true" or data.hidden_fema_special_flood_hazard_area == "true" or data.test is not empty %}
              {{ data.card_elevation_certificate|raw }}
            {% endif %}
            
            <!-- Geotechnical report --------------->
            {% if data.q6_project_site_slope >= 20 or data.hidden_title_33_potential_landslide_hazard_area == "true" or data.test is not empty %}
              {{ data.fetch_card_geotechnical_report|raw }}
            {% endif %}
    computed_results:
      '#type': webform_computed_twig
      '#title': 'Computed Results'
      '#title_display': none
      '#display_on': form
      '#mode': html
      '#template': |
        {% if data.test %}
        <div class="bg-info p-3 mb-5">
          NOTE: These results are being viewed in reviewer mode, with all possible options displayed for testing purposes. To exit reviewer mode, remove the parameter <strong>test=true</strong> from the URL.
        </div>
        {% endif %}

        <ol class="process-list mb-10">

        {% if (data.q0_3_historic_landmark == "Yes" or data.q0_2_greenway_overlay_zone == "Yes" or data.q0_1_environmental_overlay_zone == "Yes") or data.computed_valid_zone == "No" or data.test is not empty %}

          <li>
            {{ data.fetch_card_zoning_and_land_use_15_min_appointment|raw }}

            <div class="position-relative mt-4">
              <div class="alert p-3">
                <p class="mb-2"><strong>{{ "We're suggesting this because..."|t }}</strong></p>
                <ul class="mb-0">
                  {% if data.computed_valid_zone == "No" or data.test is not empty %}
                  <li>{{ "The zoning for the address you entered may not allow this type of project. Please schedule an appointment to talk with our staff."|t }}</li>
                  {% endif %}
                  {% if data.q0_3_historic_landmark == "Yes" or data.q1_2_greenway_overlay_zone == "Yes" or data.q1_1_environmental_overlay_zone == "Yes" or data.test is not empty %}
                  <li>{{ "You're making exterior changes to the property."|t }}</li>
                  {% endif %}
                  {% if data.q0_3_historic_landmark == "Yes" or data.test is not empty %}
                  <li>{{ "This address is in a Historic District."|t }}</li>
                  {% endif %}
                  {% if data.q0_1_environmental_overlay_zone == "Yes" or data.test is not empty %}
                  <li>{{ "This address is in an Environmental Zone."|t }}</li>
                  {% endif %}
                  {% if data.q0_2_greenway_overlay_zone == "Yes" or data.test is not empty %}
                  <li>{{ "This address is in a Greenway Zone."|t }}</li>
                  {% endif %}
                </ul>
              </div>
            </div>

          </li>

        {% endif %}


          <li>
            {{ data.process_step_gather|raw }}
            {{ data.computed_requirements }}
          </li>

          <li>
            {{ data.process_step_apply|raw }}
          </li>

          <li>
            {{ data.process_step_respond|raw }}
          </li>

          <li>
            {{ data.process_step_start|raw }}
          </li>

          <li>
            {{ data.process_step_inspect|raw }}
          </li>

        </ol>
      '#whitespace': spaceless
      '#ajax': true
    computed_project_details:
      '#type': webform_computed_twig
      '#title': 'Computed Project Details'
      '#title_display': none
      '#display_on': none
      '#mode': html
      '#template': |-
        {% if data.computed_valid_zone %}
          <div class="mb-5">{{ data.computed_invalid_zone_warning|raw }}</div>
        {% endif %}

              <table class="mb-5">

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Project address"|t }}</th>
                  <td>{{ data.q0_project_address.location_address }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Who is doing the construction"|t }}</th>
                  <td>{{ data.q1_who_will_be_doing_the_construction }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Electrical work"|t }}</th>
                  <td>{{ data.q2_will_this_project_include_any_electrical_work }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Plumbing work"|t }}</th>
                  <td>{{ data.q3_will_this_project_include_any_plumbing_work }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Mechanical work"|t }}</th>
                  <td>{{ data.q4_will_this_project_include_any_mechanical_work }}</td>
                </tr>

                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Disturb more than 500 sq. ft. of soil"|t }}</th>
                  <td>{{ data.q5_project_disturb_ground }}</td>
                </tr>
                
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Worksite slope"|t }}</th>
                  <td>{{ data.q6_project_site_slope }}%</td>
                </tr>
                
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Nearby body of water"|t }}</th>
                  <td>{{ data.q7_project_deck_near_waterbody }}</td>
                </tr>
                
                {% if data.q7_project_deck_near_waterbody == "Yes" or data.test is not empty %}
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Distance to body of water"|t }}</th>
                  <td>{{ data.q8_project_waterbody_distance }} feet</td>
                </tr>
                {% endif %}
                
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Add 500+ sq. ft. interior space"|t }}</th>
                  <td>{{ data.q9_add_more_than_500_feet_indoor_space }}</td>
                </tr>
                
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Remove 50%+ of exterior walls"|t }}</th>
                  <td>{{ data.q10_remove_exterior_walls }}</td>
                </tr>
                
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "SDC waiver (short-term rental use)"|t }}</th>
                  <td>{{ data.q11_sdc_waiver_no_short_term_rental }}</td>
                </tr>
                
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "More than 1,000 sq. ft. of impervious surface"|t }}</th>
                  <td>{{ data.q12_project_large_impervious_surface }}</td>
                </tr>
                
                <tr class="border-top border-1 border-dark border-bottom-1 border-start-0 border-end-0">
                  <th style="text-align: left;">{{ "Tree pruning in right-of-way"|t }}</th>
                  <td>{{ data.q13_tree_pruning_in_row  }}</td>
                </tr>

              </table>

              <a href="{{ data.return_link|replace({'returning_user=1&':''}) }}" class="btn btn-outline-primary ms-auto rounded rounded-1 border-2">{{ 'Edit details'|t }}</a>
    computed_project_details_container:
      '#type': webform_computed_twig
      '#title': 'Computed Project Details Container'
      '#title_display': none
      '#display_on': form
      '#template': |
        <div class="accordion aria-accordion no-expand-all mb-5" id="acc-1-0">
          <h3 class="aria-accordion__heading accordion-item">
            <button
              class="accordion-button collapsed aria-accordion__trigger"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#acc-1-0-panel-1"
              aria-expanded="false"
              aria-controls="acc-1-0-panel-1"
              id="acc-1-0-panel-1-trigger">
              Your project details
            </button>
          </h3>
          <div
            id="acc-1-0-panel-1"
            class="accordion-collapse collapse aria-accordion__panel aria-accordion__panel--transition"
            role="region"
            aria-labelledby="acc-1-0-panel-1-trigger"
            data-bs-parent="#acc-1-0">
            <div class="accordion-body">

              {{ data.computed_project_details }}

            </div>
          </div>
        </div>
      '#ajax': true
  actions:
    '#type': webform_actions
    '#title': 'Submit button(s)'
    '#states':
      invisible:
        - ':input[name="q1_project_address[location_verification_status]"]':
            empty: true
        - or
        - ':input[name="q1_project_address[location_verification_status]"]':
            empty: false
          ':input[name="edit_my_project[Edit my project]"]':
            unchecked: true
          ':input[name="returning_user"]':
            empty: false
css: ''
javascript: "(function ($, Drupal, once) {\r\n  Drupal.behaviors.bodyLinkHandler = {\r\n    attach: function (context, settings) {\r\n      $(once('bodyLinkHandler', '#edit-edit-my-project label.webform-options-display-buttons-label', context))\r\n        .on('click', function () {\r\n          document.location = '#body-content';\r\n        });\r\n    }\r\n  };\r\n  Drupal.behaviors.pmapiSlopeAlert = {\r\n    attach: function (context) {\r\n      $(once('pmapiSlopeAlert', 'input[name=\"hidden_pmapi_site_slope\"]', context))\r\n        .on('change.pmapiSlope', function () {\r\n          var slopeVal = $(this).val();\r\n          var $target = $('input[name=\"q6_project_site_slope\"]');\r\n\r\n          // Only set the value if the target field is empty\r\n          if ($target.length && !$target.val()) {\r\n            $target.val(slopeVal);\r\n          }\r\n        });\r\n    }\r\n  };\r\n})(jQuery, Drupal, once);\r\n"
settings:
  ajax: false
  ajax_scroll_top: form
  ajax_progress_type: ''
  ajax_effect: ''
  ajax_speed: null
  page: true
  page_submit_path: ''
  page_confirm_path: ''
  page_theme_name: ''
  form_title: source_entity_webform
  form_submit_once: false
  form_open_message: ''
  form_close_message: ''
  form_exception_message: ''
  form_previous_submissions: true
  form_confidential: false
  form_confidential_message: ''
  form_disable_remote_addr: false
  form_convert_anonymous: false
  form_prepopulate: true
  form_prepopulate_source_entity: false
  form_prepopulate_source_entity_required: false
  form_prepopulate_source_entity_type: ''
  form_unsaved: false
  form_disable_back: false
  form_submit_back: false
  form_disable_autocomplete: false
  form_novalidate: false
  form_disable_inline_errors: false
  form_required: false
  form_autofocus: false
  form_details_toggle: false
  form_reset: false
  form_access_denied: default
  form_access_denied_title: ''
  form_access_denied_message: ''
  form_access_denied_attributes: {  }
  form_file_limit: ''
  form_attributes:
    class:
      - permit-guide
    id: residential-bathrooms-guide
  form_method: ''
  form_action: ''
  share: false
  share_node: false
  share_theme_name: ''
  share_title: true
  share_page_body_attributes: {  }
  submission_label: ''
  submission_exception_message: ''
  submission_locked_message: ''
  submission_log: false
  submission_excluded_elements: {  }
  submission_exclude_empty: false
  submission_exclude_empty_checkbox: false
  submission_views: {  }
  submission_views_replace: {  }
  submission_user_columns: {  }
  submission_user_duplicate: false
  submission_access_denied: default
  submission_access_denied_title: ''
  submission_access_denied_message: ''
  submission_access_denied_attributes: {  }
  previous_submission_message: ''
  previous_submissions_message: ''
  autofill: false
  autofill_message: ''
  autofill_excluded_elements: {  }
  wizard_progress_bar: true
  wizard_progress_pages: false
  wizard_progress_percentage: false
  wizard_progress_link: false
  wizard_progress_states: false
  wizard_start_label: ''
  wizard_preview_link: false
  wizard_confirmation: true
  wizard_confirmation_label: ''
  wizard_auto_forward: true
  wizard_auto_forward_hide_next_button: false
  wizard_keyboard: true
  wizard_track: ''
  wizard_prev_button_label: ''
  wizard_next_button_label: ''
  wizard_toggle: false
  wizard_toggle_show_label: ''
  wizard_toggle_hide_label: ''
  wizard_page_type: container
  wizard_page_title_tag: h2
  preview: 0
  preview_label: ''
  preview_title: ''
  preview_message: ''
  preview_attributes: {  }
  preview_excluded_elements: {  }
  preview_exclude_empty: true
  preview_exclude_empty_checkbox: false
  draft: none
  draft_multiple: false
  draft_auto_save: false
  draft_saved_message: ''
  draft_loaded_message: ''
  draft_pending_single_message: ''
  draft_pending_multiple_message: ''
  confirmation_type: inline
  confirmation_url: ''
  confirmation_title: ''
  confirmation_message: '<p>This permit guide has been generated based on the details of your project. If you provided an email address in the form, you''ll get a copy by email too.&nbsp;</p><h3>Project details</h3><div class="mb-10">[webform_submission:values:computed_results:html]</div><div>[webform_submission:values:computed_project_details:html]</div>'
  confirmation_attributes: {  }
  confirmation_back: false
  confirmation_back_label: ''
  confirmation_back_attributes: {  }
  confirmation_exclude_query: false
  confirmation_exclude_token: false
  confirmation_update: false
  limit_total: null
  limit_total_interval: null
  limit_total_message: ''
  limit_total_unique: false
  limit_user: null
  limit_user_interval: null
  limit_user_message: ''
  limit_user_unique: false
  entity_limit_total: null
  entity_limit_total_interval: null
  entity_limit_user: null
  entity_limit_user_interval: null
  purge: none
  purge_days: null
  results_disabled: true
  results_disabled_ignore: false
  results_customize: false
  token_view: false
  token_update: false
  token_delete: false
  serial_disabled: false
access:
  create:
    roles:
      - anonymous
      - authenticated
    users: {  }
    permissions: {  }
  view_any:
    roles: {  }
    users: {  }
    permissions: {  }
  update_any:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_any:
    roles: {  }
    users: {  }
    permissions: {  }
  purge_any:
    roles: {  }
    users: {  }
    permissions: {  }
  view_own:
    roles: {  }
    users: {  }
    permissions: {  }
  update_own:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_own:
    roles: {  }
    users: {  }
    permissions: {  }
  administer:
    roles: {  }
    users: {  }
    permissions: {  }
  test:
    roles: {  }
    users: {  }
    permissions: {  }
  configuration:
    roles: {  }
    users: {  }
    permissions: {  }
handlers:
  email:
    id: email
    handler_id: email
    label: 'Send confirmation and return link'
    notes: ''
    status: true
    conditions: {  }
    weight: 0
    settings:
      states:
        - completed
      to_mail: '[webform_submission:values:email_address_optional:raw]'
      to_options: {  }
      bcc_mail: ''
      bcc_options: {  }
      cc_mail: ''
      cc_options: {  }
      from_mail: ppd@portlandoregon.gov
      from_options: {  }
      from_name: _default
      reply_to: ''
      return_path: ''
      sender_mail: ''
      sender_name: ''
      subject: 'Your ADU permit guide'
      body: '<p>Thanks for telling us about your project on <span>Portland.gov</span>. We use these details to show you what you''ll need to apply for a permit. Those results are included below.</p><p>You can return to update your project and review the requirements anytime by using this link: <a href="[webform_submission:values:return_link]"><strong>Return to your project details</strong></a></p><p>For more on completing your permitting project, <a href="/ppd/commercial-permitting/food-carts">visit our pages on food carts</a>.</p><p>Have questions? Just reply to this email. We''re happy to help.</p><p>Thank you,</p><p>Portland Permitting &amp; Development (PPD)<br>City of Portland<br><a href="/ppd">Portland.gov/ppd</a></p><hr style="margin:30px 0;"><h2>Project details</h2><div>[webform_submission:values:computed_project_details:html]&nbsp;</div><hr style="margin:30px 0;"><h2>Your tenant improvement permit plan</h2><div>[webform_submission:values:computed_results:html]</div><hr style="margin:30px 0;"><h2>Disclaimer</h2><p>[webform_submission:values:disclaimer_permit_guide_email:raw]</p>'
      excluded_elements: {  }
      ignore_access: false
      exclude_empty: true
      exclude_empty_checkbox: false
      exclude_attachments: false
      html: true
      attachments: false
      twig: false
      theme_name: ''
      parameters: {  }
      debug: false
variants: {  }
