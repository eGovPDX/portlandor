
-
    request:
        method: POST
        url: 'https://onebox/api/authorize/machine-token'
        headers:
            Host: onebox
            Expect: null
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/1.5.1-dev (php_version=7.0.19&script=bin/terminus)'
            Accept: null
        body: '{"machine_token":"111111111111111111111111111111111111111111111","client":"terminus"}'
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Fri, 01 Sep 2017 16:25:52 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Content-Length: '182'
            Connection: keep-alive
            X-Pantheon-Trace-Id: 3898e350-8f32-11e7-b926-49828d3a221b
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"session":"11111111-1111-1111-1111-111111111111:38cfba7e-8f32-11e7-962e-bc764e11bdd3:gUbEcUD3r5fTCCZNV7xgp","expires_at":1506702352,"user_id":"11111111-1111-1111-1111-111111111111"}'
-
    request:
        method: GET
        url: 'https://onebox/api/users/11111111-1111-1111-1111-111111111111'
        headers:
            Host: onebox
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/1.5.1-dev (php_version=7.0.19&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:38cfba7e-8f32-11e7-962e-bc764e11bdd3:gUbEcUD3r5fTCCZNV7xgp'
            Accept: null
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Fri, 01 Sep 2017 16:25:53 GMT'
            Content-Type: application/json
            Content-Length: '3585'
            Connection: keep-alive
            X-Pantheon-Trace-Id: 3931c7f0-8f32-11e7-aad7-c959201480f7
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"profile": {"utm_term": "", "tracking_first_organization_invite": 1479332608, "invites_to_nonuser": 4, "seen_first_time_user_popover": true, "utm_content": "/", "experiments": {"welcome_video": "shown"}, "full_name": "Dev User", "pullFromLive": true, "utm_device": "", "web_services_business": null, "initial_identity_strategy": null, "utm_campaign": "pantheon.io (organic)", "invites_sent": 14, "verify": "037eadb020d51ccddba9e06a64908c98", "tracking_first_code_push": 1428811227, "google_adwords_account_registered_sent": 1428707350, "invites_to_user": 10, "utm_medium": "", "job_function": "developer", "tracking_first_workflow_in_live": 1428811293, "tracking_first_team_invite": 1436464837, "firstname": "Dev", "invites_to_site": 13, "lastname": "User", "pda_campaign": null, "utm_source": "https://www.bing.com/search?setmkt=en-US&q=pantheon+san+francisco", "google_adwords_pushed_code_sent": 1428811242, "last-org-spinup": "none", "tracking_first_site_create": 1428723370, "initial_identity_name": null, "guilty_of_abuse": null, "invites_to_org": 1, "tracking_first_site_upgrade": 1437784612, "seens": {"global-cdn": true, "terminus-1": true}, "google_adwords_paid_for_site_sent": 1438018300, "modified": 1492930415, "maxdevsites": 2, "lead_type": "", "organization": " Pantheon Systems, Inc"}, "feature_flags": [{"name": "Self-Serve Upstreams", "default": false, "enabled": true, "visible": false, "optional": false, "id": "self-serve_upstreams"}, {"name": "Experimental Products", "default": false, "enabled": false, "visible": false, "optional": false, "id": "experimental-products"}, {"name": "annotate git tags", "default": false, "enabled": false, "visible": false, "optional": false, "id": "annotate_git_tags"}, {"name": "Cacheserver Add-on", "default": false, "enabled": false, "visible": false, "optional": false, "id": "cacheserver-addon"}, {"name": "Apollo Spinup", "default": true, "enabled": true, "visible": false, "optional": false, "id": "apollo-spinup"}, {"name": "Pantheon One", "default": false, "enabled": false, "visible": false, "optional": false, "id": "one"}, {"name": "Unified User Account Screen ", "default": false, "enabled": false, "visible": true, "optional": false, "id": "apollo-user"}, {"name": "Indexserver Add-on", "default": false, "enabled": false, "visible": true, "optional": false, "id": "indexserver-addon"}, {"name": "Wordpress", "default": false, "enabled": false, "visible": false, "optional": false, "id": "wordpress"}, {"name": "Apollo Self-Service Toggle", "default": true, "enabled": true, "visible": false, "optional": false, "id": "apollo-toggle"}, {"name": "Site Audit Checks", "default": false, "enabled": false, "visible": false, "optional": false, "id": "site_audit_checks"}, {"description": "Enables the new Desk API 2.0 Interface", "default": false, "enabled": true, "visible": true, "percentage": 100, "optional": false, "id": "desk", "name": "desk"}, {"name": "org tags", "default": false, "enabled": false, "visible": true, "optional": false, "id": "org-tags"}, {"name": "Apollo Dashboard", "default": true, "enabled": true, "visible": false, "optional": false, "id": "apollo"}, {"name": "Org Upstream Updates", "default": false, "enabled": false, "visible": false, "optional": false, "id": "org-has-code"}], "user_id": "11111111-1111-1111-1111-111111111111", "created_at": 1428707345, "dev_sites_count": 1, "id": "11111111-1111-1111-1111-111111111111", "destination_organization_id": null, "is_registered": true, "created_organization_id": null, "password": "SCRUBBED", "email": "devuser@pantheon.io"}'
-
    request:
        method: GET
        url: 'https://onebox/api/site-names/behat-tests'
        headers:
            Host: onebox
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/1.5.1-dev (php_version=7.0.19&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:38cfba7e-8f32-11e7-962e-bc764e11bdd3:gUbEcUD3r5fTCCZNV7xgp'
            Accept: null
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Fri, 01 Sep 2017 16:25:54 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Pantheon-Trace-Id: 3a1dae90-8f32-11e7-8288-d550e6d46d72
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"id": "11111111-1111-1111-1111-111111111111", "name": "behat-tests"}'
-
    request:
        method: GET
        url: 'https://onebox/api/sites/11111111-1111-1111-1111-111111111111?site_state=true'
        headers:
            Host: onebox
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/1.5.1-dev (php_version=7.0.19&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:38cfba7e-8f32-11e7-962e-bc764e11bdd3:gUbEcUD3r5fTCCZNV7xgp'
            Accept: null
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Fri, 01 Sep 2017 16:25:55 GMT'
            Content-Type: application/json
            Content-Length: '3664'
            Connection: keep-alive
            X-Pantheon-Trace-Id: 3a5a1b50-8f32-11e7-b926-49828d3a221b
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"created": 1495660180, "created_by_user_id": "3a1d2042-cca3-432e-94c4-12a8f2b6a950", "current_num_domains": 0, "drush_version": 8, "framework": "drupal", "holder_id": "6d363fae-20cc-8d21-9d31-f28b14bf268b", "holder_type": "organization", "instrument": "1796d505-ad72-0c6f-1a4f-40bdaa097f69", "last_code_push": {"timestamp": "2017-05-24T21:10:10", "user_uuid": null}, "name": "behat-tests", "organization": "6d363fae-20cc-8d21-9d31-f28b14bf268b", "owner": "3a1d2042-cca3-432e-94c4-12a8f2b6a950", "php_version": "55", "preferred_zone": "us-central1", "service_level": "free", "service_level_updated_at": 1495660180, "upstream": {"repository_branch": "master", "machine_name": "protected-upstream", "product_id": "c9f1311f-4cae-41ca-8276-cca230c25f37", "url": "https://github.com/ronan/drops-7.git", "label": "Protected Upstream", "organization_id": "6d363fae-20cc-8d21-9d31-f28b14bf268b", "framework": "drupal", "branch": "master", "repository_url": "https://github.com/ronan/drops-7.git", "type": "custom", "id": "c9f1311f-4cae-41ca-8276-cca230c25f37"}, "label": "Protected Upstream Site", "id": "11111111-1111-1111-1111-111111111111", "holder": {"custom_upstreams": true, "instrument": "1796d505-ad72-0c6f-1a4f-40bdaa097f69", "maxdevsites": "10", "name": "The Upstreamers", "id": "6d363fae-20cc-8d21-9d31-f28b14bf268b", "key": "6d363fae-20cc-8d21-9d31-f28b14bf268b", "service_level": "enterprise", "org_logo_height": 85, "machine_name": "the-upstreamers", "org_logo_width": 85, "has_multidev": false, "support_plan": "regular_support", "show_org_name_header": "yes", "base_domain": null, "requires_onboarding": false, "has_change_management": false, "profile": {"machine_name": "the-upstreamers", "change_service_url": null, "name": "The Upstreamers", "email_domain": null, "org_logo_width": 85, "org_logo_height": 85, "base_domain": null, "billing_url": null, "terms_of_service": null, "org_logo": null}, "use_org_instrument": true, "settings": {"service_level": "enterprise", "use_org_instrument": true, "show_org_name_header": "yes", "base_domain": null, "discoverable": false, "email_domain": null}}, "settings": {"allow_domains": false, "max_num_cdes": 10, "stunnel": false, "min_backups": 0, "owner": "3a1d2042-cca3-432e-94c4-12a8f2b6a950", "secure_runtime_access": false, "label": "Protected Upstream Site", "allow_indexserver": false, "created_by_user_id": "3a1d2042-cca3-432e-94c4-12a8f2b6a950", "failover_appserver": 0, "pingdom": 0, "cacheserver": 1, "support_plan": "regular_support", "appserver": 1, "on_server_development": false, "drush_version": 8, "current_num_domains": 0, "instrument": "1796d505-ad72-0c6f-1a4f-40bdaa097f69", "allow_read_slaves": false, "indexserver": 1, "php_version": "55", "php_channel": "stable", "allow_cacheserver": false, "ssl_enabled": null, "service_level": "free", "dedicated_ip": null, "dbserver": 1, "framework": "drupal", "max_total_domains": 0, "upstream": {"url": "https://github.com/ronan/drops-7.git", "product_id": "c9f1311f-4cae-41ca-8276-cca230c25f37", "branch": "master"}, "guilty_of_abuse": null, "preferred_zone": "us-central1", "pingdom_chance": 0, "holder_id": "6d363fae-20cc-8d21-9d31-f28b14bf268b", "name": "protected-upstream-site", "created": 1495660180, "max_backups": 0, "holder_type": "organization", "replica_verification_strategy": "pt-heartbeat", "organization": "6d363fae-20cc-8d21-9d31-f28b14bf268b", "pingdom_manually_enabled": false, "service_level_updated_at": 1495660180, "last_code_push": {"timestamp": "2017-05-24T21:10:10", "user_uuid": null}}, "base_domain": null, "attributes": {"hostname_limit": true, "label": "Protected Upstream Site", "m3_ui": true}, "add_ons": []}'
-
    request:
        method: POST
        url: 'https://onebox/api/sites/11111111-1111-1111-1111-111111111111/workflows'
        headers:
            Host: onebox
            Expect: null
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/1.5.1-dev (php_version=7.0.19&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:38cfba7e-8f32-11e7-962e-bc764e11bdd3:gUbEcUD3r5fTCCZNV7xgp'
            Accept: null
        body: '{"type":"clear_code_cache","params":{}}'
    response:
        status:
            http_version: '1.1'
            code: '202'
            message: Accepted
        headers:
            Server: nginx
            Date: 'Fri, 01 Sep 2017 16:31:11 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Pantheon-Trace-Id: f72540c0-8f32-11e7-aad7-c959201480f7
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
        body: '{"final_task_id": "f747b0f6-8f32-11e7-98c7-bc764e10d7c2", "finished_at": 1504283471.889864, "params": {}, "reason": "", "result": "succeeded", "role": "owner", "site_id": "11111111-1111-1111-1111-111111111111", "started_at": 1504283471.82989, "task_ids": ["f747b0f6-8f32-11e7-98c7-bc764e10d7c2"], "trace_id": "f72540c0-8f32-11e7-aad7-c959201480f7", "type": "clear_code_cache", "user_id": "11111111-1111-1111-1111-111111111111", "waiting_for_task_id": null, "id": "11111111-1111-1111-1111-111111111111", "key": "1504281600", "environment_id": null, "keep_forever": false, "phase": "finished", "queued_time": null, "run_time": 0.059973955154418945, "created_at": 1504283471.742104, "environment": null, "total_time": 0.14775991439819336, "active_description": "Cleared Code Cache", "description": "Clear Code Cache", "step": 1, "has_operation_log_output": false, "number_of_tasks": 1, "trace_log_url": "https://app.logz.io/#/dashboard/kibana?kibanaRoute=discover%3F_a%3D(query:(query_string:(analyze_wildcard:!t,query:%27trace_id:f72540c0-8f32-11e7-aad7-c959201480f7%27)))%26_g%3D(refreshInterval:(display:Off,pause:!f,value:0),time:(from:%272017-09-01T16:26:11.742104Z%27,mode:quick,to:%272017-09-01T16:36:11.889864Z%27))", "user": {"user_id": "11111111-1111-1111-1111-111111111111", "created_at": 1428707345, "destination_organization_id": null, "is_registered": true, "created_organization_id": null, "password": "SCRUBBED", "email": "devuser@pantheon.io"}, "user_email": "tesladethray@gmail.com", "final_task": {"environment": "dev", "finished_at": 1504283471.854221, "fn_name": "trigger_task", "initialized_at": 1504283471.830216, "params": {"task_type": "clear_code_cache", "site_id": "11111111-1111-1111-1111-111111111111"}, "queued_at": 1504283471.834922, "responses": [{"code": 200, "body": "Site 11111111-1111-1111-1111-111111111111 code cache was cleared.", "error_details": "", "internal_reason": ""}], "result": "succeeded", "site_id": "11111111-1111-1111-1111-111111111111", "started_at": 1504283471.834925, "trace_id": "f72540c0-8f32-11e7-aad7-c959201480f7", "user_id": "11111111-1111-1111-1111-111111111111", "workflow_id": "11111111-1111-1111-1111-111111111111", "id": "f747b0f6-8f32-11e7-98c7-bc764e10d7c2", "key": "1504281600", "queued_time": 2.86102294921875e-06, "host": null, "phase": "finished", "created_at": 1504283471.789695, "allow_concurrent": false, "run_time": 0.01929616928100586, "total_time": 0.06452608108520508, "reason": "", "error_details": "", "internal_reason": "", "trace_log_url": "https://app.logz.io/#/dashboard/kibana?kibanaRoute=discover%3F_a%3D(query:(query_string:(analyze_wildcard:!t,query:%27trace_id:f72540c0-8f32-11e7-aad7-c959201480f7%27)))%26_g%3D(refreshInterval:(display:Off,pause:!f,value:0),time:(from:%272017-09-01T16:26:11.789695Z%27,mode:quick,to:%272017-09-01T16:36:11.854221Z%27))", "type": "clear_code_cache", "build_url": null, "messages": {"2017-09-01T16:31:11.923706": {"message": "Site 11111111-1111-1111-1111-111111111111 code cache was cleared.", "level": "INFO"}}}}'
-
    request:
        method: GET
        url: 'https://onebox/api/sites/11111111-1111-1111-1111-111111111111/workflows/11111111-1111-1111-1111-111111111111'
        headers:
            Host: onebox
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/1.5.1-dev (php_version=7.0.19&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:38cfba7e-8f32-11e7-962e-bc764e11bdd3:gUbEcUD3r5fTCCZNV7xgp'
            Accept: null
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Fri, 01 Sep 2017 16:31:12 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Pantheon-Trace-Id: f78477c0-8f32-11e7-8343-ff77428ce12b
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"final_task_id": "f747b0f6-8f32-11e7-98c7-bc764e10d7c2", "finished_at": 1504283471.889864, "params": {}, "reason": "", "result": "succeeded", "role": "owner", "site_id": "11111111-1111-1111-1111-111111111111", "started_at": 1504283471.82989, "task_ids": ["f747b0f6-8f32-11e7-98c7-bc764e10d7c2"], "trace_id": "f72540c0-8f32-11e7-aad7-c959201480f7", "type": "clear_code_cache", "user_id": "11111111-1111-1111-1111-111111111111", "waiting_for_task_id": null, "id": "11111111-1111-1111-1111-111111111111", "key": "11111111-1111-1111-1111-111111111111", "environment_id": null, "keep_forever": false, "phase": "finished", "queued_time": null, "run_time": 0.059973955154418945, "created_at": 1504283471.742104, "environment": null, "total_time": 0.14775991439819336, "active_description": "Cleared Code Cache", "description": "Clear Code Cache", "step": 1, "has_operation_log_output": false, "number_of_tasks": 1, "trace_log_url": "https://app.logz.io/#/dashboard/kibana?kibanaRoute=discover%3F_a%3D(query:(query_string:(analyze_wildcard:!t,query:%27trace_id:f72540c0-8f32-11e7-aad7-c959201480f7%27)))%26_g%3D(refreshInterval:(display:Off,pause:!f,value:0),time:(from:%272017-09-01T16:26:11.742104Z%27,mode:quick,to:%272017-09-01T16:36:11.889864Z%27))", "user": {"user_id": "11111111-1111-1111-1111-111111111111", "created_at": 1428707345, "destination_organization_id": null, "is_registered": true, "created_organization_id": null, "password": "SCRUBBED", "email": "devuser@pantheon.io"}, "user_email": "tesladethray@gmail.com", "final_task": {"environment": "dev", "finished_at": 1504283471.854221, "fn_name": "trigger_task", "initialized_at": 1504283471.830216, "params": {"task_type": "clear_code_cache", "site_id": "11111111-1111-1111-1111-111111111111"}, "queued_at": 1504283471.834922, "responses": [{"code": 200, "body": "Site 11111111-1111-1111-1111-111111111111 code cache was cleared.", "error_details": "", "internal_reason": ""}], "result": "succeeded", "site_id": "11111111-1111-1111-1111-111111111111", "started_at": 1504283471.834925, "trace_id": "f72540c0-8f32-11e7-aad7-c959201480f7", "user_id": "11111111-1111-1111-1111-111111111111", "workflow_id": "11111111-1111-1111-1111-111111111111", "id": "f747b0f6-8f32-11e7-98c7-bc764e10d7c2", "key": "1504281600", "queued_time": 2.86102294921875e-06, "host": null, "phase": "finished", "created_at": 1504283471.789695, "allow_concurrent": false, "run_time": 0.01929616928100586, "total_time": 0.06452608108520508, "reason": "", "error_details": "", "internal_reason": "", "trace_log_url": "https://app.logz.io/#/dashboard/kibana?kibanaRoute=discover%3F_a%3D(query:(query_string:(analyze_wildcard:!t,query:%27trace_id:f72540c0-8f32-11e7-aad7-c959201480f7%27)))%26_g%3D(refreshInterval:(display:Off,pause:!f,value:0),time:(from:%272017-09-01T16:26:11.789695Z%27,mode:quick,to:%272017-09-01T16:36:11.854221Z%27))", "type": "clear_code_cache", "build_url": null, "messages": {"2017-09-01T16:31:12.331094": {"message": "Site 11111111-1111-1111-1111-111111111111 code cache was cleared.", "level": "INFO"}}}}'
